"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[86469],{43023:(e,n,t)=>{t.d(n,{R:()=>d,x:()=>c});var s=t(63696);const i={},r=s.createContext(i);function d(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),s.createElement(r.Provider,{value:n},e.children)}},91163:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"concepts/affected","title":"Affected","description":"Affected is a term to describe when a project or task is affected by a change in the environment","source":"@site/docs/concepts/affected.mdx","sourceDirName":"concepts","slug":"/concepts/affected","permalink":"/docs/concepts/affected","draft":false,"unlisted":false,"editUrl":"https://github.com/moonrepo/moon/tree/master/website/docs/concepts/affected.mdx","tags":[],"version":"current","frontMatter":{"title":"Affected"},"sidebar":"docs","previous":{"title":"Concepts","permalink":"/docs/concepts"},"next":{"title":"Cache","permalink":"/docs/concepts/cache"}}');var i=t(62540),r=t(43023);const d={title:"Affected"},c=void 0,o={},a=[{value:"Change types",id:"change-types",level:2},{value:"Files",id:"files",level:3},{value:"Environment variables",id:"environment-variables",level:3},{value:"Graph relations",id:"graph-relations",level:3},{value:"Graph depth",id:"graph-depth",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["Affected is a term to describe when a project or task is ",(0,i.jsx)(n.em,{children:"affected by a change"})," in the environment\n(workspace). This is a core concept in moon, and is the basis for many of our features, such as task\nrunning, incremental builds, and more."]}),"\n",(0,i.jsx)(n.h2,{id:"change-types",children:"Change types"}),"\n",(0,i.jsx)(n.p,{children:'To start, there are 3 types of "sources" that can trigger an affected state: files, environment\nvariables, and graph relations.'}),"\n",(0,i.jsx)(n.h3,{id:"files",children:"Files"}),"\n",(0,i.jsxs)(n.p,{children:["A file is considered changed if it has been added, modified, deleted, renamed, moved, copied, so on\nand so forth. This state is determined by the version control system (VCS) in use, such as Git,\nMercurial, or Subversion. For Git, this is determined by the ",(0,i.jsx)(n.code,{children:"git status"})," command."]}),"\n",(0,i.jsx)(n.p,{children:"For a project, any changed file that is within the project folder (starts with the project source),\ntriggers affected."}),"\n",(0,i.jsxs)(n.p,{children:["For a task, any changed file that is configured within the task's\n",(0,i.jsx)(n.a,{href:"../config/project#inputs",children:(0,i.jsx)(n.code,{children:"inputs"})})," triggers affected."]}),"\n",(0,i.jsx)(n.h3,{id:"environment-variables",children:"Environment variables"}),"\n",(0,i.jsx)(n.p,{children:"An environment variable is considered changed if it exists and is non-empty. This is determined by\nthe presence of the variable in the environment, and its value."}),"\n",(0,i.jsxs)(n.p,{children:["For projects, they are ",(0,i.jsx)(n.em,{children:"not"})," affected by environment variables."]}),"\n",(0,i.jsxs)(n.p,{children:["For a task, any changed environment variable that is configured within the task's\n",(0,i.jsx)(n.a,{href:"../config/project#inputs",children:(0,i.jsx)(n.code,{children:"inputs"})})," triggers affected."]}),"\n",(0,i.jsx)(n.h3,{id:"graph-relations",children:"Graph relations"}),"\n",(0,i.jsx)(n.p,{children:"A relation is considered changed if a project or task that is depended on, or depends on, is\naffected by a changed file or environment variable. This is determined by the project and task\ngraph, which is built from the workspace configuration."}),"\n",(0,i.jsxs)(n.p,{children:["For a project, affected dependency/dependent projects of the project (via\n",(0,i.jsx)(n.a,{href:"../config/project#dependson",children:(0,i.jsx)(n.code,{children:"dependsOn"})}),"), or affected tasks within the project, triggers\naffected."]}),"\n",(0,i.jsxs)(n.p,{children:["For a task, affected dependency/dependent tasks of the task (via ",(0,i.jsx)(n.a,{href:"../config/project#deps",children:(0,i.jsx)(n.code,{children:"deps"})}),")\ntriggers affected."]}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.p,{children:["This check is conditionally enabled. For ",(0,i.jsx)(n.a,{href:"../commands/query",children:(0,i.jsx)(n.code,{children:"moon query"})}),", it is always enabled.\nFor exec-based commands, it is not enabled by default and the ",(0,i.jsx)(n.code,{children:"--include-relations"})," flag must be\npassed."]})}),"\n",(0,i.jsx)(n.h2,{id:"graph-depth",children:"Graph depth"}),"\n",(0,i.jsxs)(n.p,{children:["When determining affected state based on graph relations, the depth of traversal can be configured\nwith the ",(0,i.jsx)(n.code,{children:"--upstream"})," (",(0,i.jsx)(n.code,{children:"--dependencies"}),") and ",(0,i.jsx)(n.code,{children:"--downstream"})," (",(0,i.jsx)(n.code,{children:"--dependents"}),") options. These options\ncan be set to one of the following values:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"none"})," - Do not include any relations."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"direct"})," - Include only direct relations."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"deep"})," - Include all relations."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["For exec-based commands, the default is ",(0,i.jsx)(n.code,{children:"--upstream=deep"})," and ",(0,i.jsx)(n.code,{children:"--downstream=none"}),", meaning all\ndependencies are included, but no dependents are included. For query and other commands, the default\nis ",(0,i.jsx)(n.code,{children:"none"})," for both."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}}}]);