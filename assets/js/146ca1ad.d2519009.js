"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3872],{15868:(e,n,s)=>{s.d(n,{A:()=>i});var t=s(65162),r=s(62540);function i(e){let{header:n,inline:s,updated:i,version:o}=e;return(0,r.jsx)(t.A,{text:`v${o}`,variant:i?"success":"info",className:n?"absolute right-0 top-1.5":s?"inline-block ml-1":"ml-2"})}},33983:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>c,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"commands/query/tasks","title":"query tasks","description":"Use the moon query tasks sub-command to query task information for all projects in the project","source":"@site/docs/commands/query/tasks.mdx","sourceDirName":"commands/query","slug":"/commands/query/tasks","permalink":"/docs/commands/query/tasks","draft":false,"unlisted":false,"editUrl":"https://github.com/moonrepo/moon/tree/master/website/docs/commands/query/tasks.mdx","tags":[],"version":"current","frontMatter":{"title":"query tasks","sidebar_label":"tasks","toc_max_heading_level":6},"sidebar":"docs","previous":{"title":"projects","permalink":"/docs/commands/query/projects"},"next":{"title":"touched-files","permalink":"/docs/commands/query/touched-files"}}');var r=s(62540),i=s(43023),o=s(15868);const c={title:"query tasks",sidebar_label:"tasks",toc_max_heading_level:6},a=void 0,l={},d=[{value:"Arguments",id:"arguments",level:3},{value:"Options",id:"options",level:3},{value:"Affected",id:"affected",level:4},{value:"Filters<VersionLabel></VersionLabel>",id:"filters",level:4},{value:"Configuration",id:"configuration",level:3}];function h(e){const n={a:"a",code:"code",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["Use the ",(0,r.jsx)(n.code,{children:"moon query tasks"})," sub-command to query task information for all projects in the project\ngraph. The tasks list can be filtered by passing a ",(0,r.jsx)(n.a,{href:"../../concepts/query-lang",children:"query statement"})," as\nan argument, or by using ",(0,r.jsx)(n.a,{href:"#options",children:"options"})," arguments."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'# Find all tasks grouped by project\n$ moon query tasks\n\n# Find all tasks from projects with an id that matches "react"\n$ moon query tasks --id react\n$ moon query tasks "task~react"\n'})}),"\n",(0,r.jsxs)(n.p,{children:["By default, this will output a list of projects, and tasks within the project being indented (with a\ntab) on their own line, in the format of ",(0,r.jsx)(n.code,{children:"<id> | <command> | <type> | <toolchain> | <description>"}),'.\nIf no description is defined, "..." will be displayed instead.']}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"web\n\tlint | eslint | test | node | ...\n\ttest | jest | test | node | ...\napp\n\tformat | prettier | test | node | ...\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The tasks can also be output in JSON by passing the ",(0,r.jsx)(n.code,{children:"--json"})," flag. The output has the following\nstructure:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"{\n\ttasks: Record<string, Record<string, Task>>,\n\toptions: QueryOptions,\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"arguments",children:"Arguments"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"[query]"})," - An optional ",(0,r.jsx)(n.a,{href:"../../concepts/query-lang",children:"query statement"})," to filter projects with. When\nprovided, all ",(0,r.jsx)(n.a,{href:"#filters",children:"filter options"})," are ignored. ",(0,r.jsx)(o.A,{version:"1.4.0"})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"options",children:"Options"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"--json"})," - Display the projects in JSON format."]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"affected",children:"Affected"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"--affected"})," - Filter tasks that have been affected by touched files."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"--downstream"}),' - Include downstream dependents of queried tasks. Supports "none" (default),\n"direct", "deep".',"\n",(0,r.jsx)(o.A,{version:"1.30.0"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"--upstream"}),' - Include upstream dependencies of queried tasks. Supports "none", "direct", "deep"\n(default).',"\n",(0,r.jsx)(o.A,{version:"1.30.0"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h4,{id:"filters",children:["Filters",(0,r.jsx)(o.A,{version:"1.30.0"})]}),"\n",(0,r.jsx)(n.p,{children:"All option values are case-insensitive regex patterns."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"--command <regex>"})," - Filter tasks that match this command."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"--id <regex>"})," - Filter tasks that match this ID."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"--project <regex>"})," - Filter tasks that belong to this project."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"--script <regex>"})," - Filter tasks that match this script."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"--toolchain <regex>"})," - Filter tasks of this toolchain. ",(0,r.jsx)(o.A,{version:"1.31.0"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"--type <regex>"})," - Filter tasks of this type."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"../../config/workspace#projects",children:(0,r.jsx)(n.code,{children:"projects"})})," in ",(0,r.jsx)(n.code,{children:".moon/workspace.yml"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"../../config/project#tasks",children:(0,r.jsx)(n.code,{children:"tasks"})})," in ",(0,r.jsx)(n.code,{children:"moon.yml"})]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},43023:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>c});var t=s(63696);const r={},i=t.createContext(r);function o(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(i.Provider,{value:n},e.children)}},65162:(e,n,s)=>{s.d(n,{A:()=>c});var t=s(11750),r=s(74599),i=s(62540);const o={failure:"bg-red-100 text-red-900",info:"bg-pink-100 text-pink-900",success:"bg-green-100 text-green-900",warning:"bg-orange-100 text-orange-900"};function c(e){let{className:n,icon:s,text:c,variant:a}=e;return(0,i.jsxs)("span",{className:(0,t.A)("inline-flex items-center px-1 py-0.5 rounded text-xs font-bold uppercase",a?o[a]:"bg-gray-100 text-gray-800",n),children:[s&&(0,i.jsx)(r.A,{icon:s,className:"mr-1"}),c]})}}}]);