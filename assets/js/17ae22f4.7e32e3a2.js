"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[76352],{59030:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>i,contentTitle:()=>r,default:()=>p,frontMatter:()=>s,metadata:()=>a,toc:()=>c});var t=o(24246),l=o(71670);const s={slug:"proto-v0.17",title:"proto v0.17 - Experimental Python support and canary releases",authors:["milesj"],tags:["proto","plugin","tool","canary","python"],image:"./img/proto/v0.17.png"},r=void 0,a={permalink:"/blog/proto-v0.17",editUrl:"https://github.com/moonrepo/moon/tree/master/website/blog/2023-09-11_proto-v0.17.mdx",source:"@site/blog/2023-09-11_proto-v0.17.mdx",title:"proto v0.17 - Experimental Python support and canary releases",description:"This release implements two long requested features, Python language support and canary releases.",date:"2023-09-11T00:00:00.000Z",formattedDate:"September 11, 2023",tags:[{label:"proto",permalink:"/blog/tags/proto"},{label:"plugin",permalink:"/blog/tags/plugin"},{label:"tool",permalink:"/blog/tags/tool"},{label:"canary",permalink:"/blog/tags/canary"},{label:"python",permalink:"/blog/tags/python"}],readingTime:2.39,hasTruncateMarker:!0,authors:[{name:"Miles Johnson",title:"Founder, developer",url:"https://github.com/milesj",imageURL:"/img/authors/miles.jpg",key:"milesj"}],frontMatter:{slug:"proto-v0.17",title:"proto v0.17 - Experimental Python support and canary releases",authors:["milesj"],tags:["proto","plugin","tool","canary","python"],image:"./img/proto/v0.17.png"},unlisted:!1,prevItem:{title:"proto v0.18 - List installed tools and configure HTTP client",permalink:"/blog/proto-v0.18"},nextItem:{title:"moon v1.13 - Toolchain now uses WASM plugins",permalink:"/blog/moon-v1.13"}},i={image:o(78980).Z,authorsImageUrls:[void 0]},c=[{value:"Experimental Python support",id:"experimental-python-support",level:2},{value:"Install canary releases",id:"install-canary-releases",level:2},{value:"Other changes",id:"other-changes",level:2}];function h(e){const n={a:"a",code:"code",em:"em",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"This release implements two long requested features, Python language support and canary releases."}),"\n",(0,t.jsx)(n.h2,{id:"experimental-python-support",children:"Experimental Python support"}),"\n",(0,t.jsxs)(n.p,{children:["It's been quite a while since we've introduced a new language into proto, and we're excited to\nannounce the highly requested language, Python! Since Python is now an\n",(0,t.jsx)(n.a,{href:"https://github.com/moonrepo/python-plugin",children:"officially supported language"}),", installing Python (and\npip) is as simple as:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"$ proto install python\n"})}),"\n",(0,t.jsx)(n.p,{children:"However, we're marking language support as experimental for the time being. We expect our\nimplementation to work for modern Python versions, but may not work for older versions, especially\nPython 2. The reasons for this are as follows:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["proto will install pre-built binaries from\n",(0,t.jsx)(n.a,{href:"https://github.com/indygreg/python-build-standalone",children:"indygreg/python-build-standalone"}),". This is\nan unofficial project, and ",(0,t.jsx)(n.em,{children:"does not"})," support all Python versions."]}),"\n",(0,t.jsxs)(n.li,{children:["If ",(0,t.jsx)(n.a,{href:"https://github.com/pyenv/pyenv/blob/master/plugins/python-build/README.md",children:(0,t.jsx)(n.code,{children:"python-build"})})," is\navailable, we'll attempt to use it to build + install Python. This currently requires ",(0,t.jsx)(n.code,{children:"pyenv"})," to\nbe installed, and ",(0,t.jsx)(n.em,{children:"does not"})," work on Windows."]}),"\n",(0,t.jsxs)(n.li,{children:["Furthermore, we only support ",(0,t.jsx)(n.code,{children:"cpython"})," at the moment, and do not support ",(0,t.jsx)(n.code,{children:"pypy"}),", ",(0,t.jsx)(n.code,{children:"jython"}),", or\nother Python implementations. It's unknown whether this functionality should be in the core Python\nplugin, or another plugin entirely."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:'In a future proto version, we want to support a true "build from source" approach for all tools.\nOnce that functionality has landed, we can properly support Python on all platforms, but until then,\nlet us know how this works for you!'}),"\n",(0,t.jsx)(n.h2,{id:"install-canary-releases",children:"Install canary releases"}),"\n",(0,t.jsx)(n.p,{children:"A canary release is a mechanism for rolling out new features and changes to a small subset of users,\nwithout it being an official release on an official channel. This allows users to opt-in and test\nfunctionality if they so choose. Canary releases are not meant to be used in production, and may\ncontain bugs or breaking changes. A canary is similar to a nightly (or weekly) release, depending on\nthe tool."}),"\n",(0,t.jsxs)(n.p,{children:["We now support this workflow in proto. To install a canary release, simply use the\n",(0,t.jsxs)(n.a,{href:"/docs/proto/commands/install",children:[(0,t.jsx)(n.code,{children:"--canary"})," flag when installing a tool"]}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"$ proto install <tool> --canary\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This will install the latest canary release to ",(0,t.jsx)(n.code,{children:"~/.proto/tools/<tool>/canary"}),", and ",(0,t.jsx)(n.em,{children:"only"})," the latest\nrelease can be used. Re-installing with ",(0,t.jsx)(n.code,{children:"--canary"})," will overwrite the previous canary installation."]}),"\n",(0,t.jsxs)(n.p,{children:["However, because we ",(0,t.jsx)(n.a,{href:"/docs/proto/detection",children:"detect a version to run with at runtime"}),", how should you\nactually run canary? The easiest way is to prefix the shim with an environment variable:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"$ PROTO_BUN_VERSION=canary bun ./index.ts\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Or to explicitly configure the version in ",(0,t.jsx)(n.a,{href:"/docs/proto/config",children:(0,t.jsx)(n.code,{children:".prototools"})}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'bun = "canary"\n'})}),"\n",(0,t.jsx)(n.h2,{id:"other-changes",children:"Other changes"}),"\n",(0,t.jsxs)(n.p,{children:["View the ",(0,t.jsx)(n.a,{href:"https://github.com/moonrepo/proto/releases/tag/v0.17.0",children:"official release"})," for a full list\nof changes."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Added colors to command line ",(0,t.jsx)(n.code,{children:"--help"})," menus."]}),"\n",(0,t.jsxs)(n.li,{children:["Updated the following locations to support partial versions and aliases:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Tool versions in ",(0,t.jsx)(n.code,{children:".prototools"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Pinning a default version with ",(0,t.jsx)(n.code,{children:"proto install --pin"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Setting global version with ",(0,t.jsx)(n.code,{children:"proto global"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Setting local version with ",(0,t.jsx)(n.code,{children:"proto local"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Node, npm, pnpm, and yarn will again extract a version from ",(0,t.jsx)(n.code,{children:"package.json"})," engines."]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},78980:(e,n,o)=>{o.d(n,{Z:()=>t});const t=o.p+"assets/images/v0.17-c6f866913e8dd547a862c49630b6a96b.png"},71670:(e,n,o)=>{o.d(n,{Z:()=>a,a:()=>r});var t=o(27378);const l={},s=t.createContext(l);function r(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);