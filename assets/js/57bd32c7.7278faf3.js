"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[5911],{5318:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>d});var a=n(7378);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=a.createContext({}),s=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=s(e.components);return a.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),m=s(n),d=r,f=m["".concat(c,".").concat(d)]||m[d]||u[d]||o;return n?a.createElement(f,l(l({ref:t},p),{},{components:n})):a.createElement(f,l({ref:t},p))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=m;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var s=2;s<o;s++)l[s]=n[s];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},9798:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(7378),r=n(8944);const o="tabItem_wHwb";function l(e){let{children:t,hidden:n,className:l}=e;return a.createElement("div",{role:"tabpanel",className:(0,r.Z)(o,l),hidden:n},t)}},3337:(e,t,n)=>{n.d(t,{Z:()=>d});var a=n(5773),r=n(7378),o=n(8944),l=n(6457),i=n(784),c=n(9947),s=n(3457);const p="tabList_J5MA",u="tabItem_l0OV";function m(e){var t,n;const{lazy:l,block:m,defaultValue:d,values:f,groupId:g,className:h}=e,k=r.Children.map(e.children,(e=>{if((0,r.isValidElement)(e)&&"value"in e.props)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),b=null!=f?f:k.map((e=>{let{props:{value:t,label:n,attributes:a}}=e;return{value:t,label:n,attributes:a}})),y=(0,i.l)(b,((e,t)=>e.value===t.value));if(y.length>0)throw new Error('Docusaurus error: Duplicate values "'+y.map((e=>e.value)).join(", ")+'" found in <Tabs>. Every value needs to be unique.');const v=null===d?d:null!=(t=null!=d?d:null==(n=k.find((e=>e.props.default)))?void 0:n.props.value)?t:k[0].props.value;if(null!==v&&!b.some((e=>e.value===v)))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+v+'" but none of its children has the corresponding value. Available values are: '+b.map((e=>e.value)).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");const{tabGroupChoices:w,setTabGroupChoices:j}=(0,c.U)(),[N,x]=(0,r.useState)(v),C=[],{blockElementScrollPositionUntilNextRender:E}=(0,s.o5)();if(null!=g){const e=w[g];null!=e&&e!==N&&b.some((t=>t.value===e))&&x(e)}const T=e=>{const t=e.currentTarget,n=C.indexOf(t),a=b[n].value;a!==N&&(E(t),x(a),null!=g&&j(g,String(a)))},O=e=>{var t;let n=null;switch(e.key){case"ArrowRight":{var a;const t=C.indexOf(e.currentTarget)+1;n=null!=(a=C[t])?a:C[0];break}case"ArrowLeft":{var r;const t=C.indexOf(e.currentTarget)-1;n=null!=(r=C[t])?r:C[C.length-1];break}}null==(t=n)||t.focus()};return r.createElement("div",{className:(0,o.Z)("tabs-container",p)},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":m},h)},b.map((e=>{let{value:t,label:n,attributes:l}=e;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:N===t?0:-1,"aria-selected":N===t,key:t,ref:e=>C.push(e),onKeyDown:O,onFocus:T,onClick:T},l,{className:(0,o.Z)("tabs__item",u,null==l?void 0:l.className,{"tabs__item--active":N===t})}),null!=n?n:t)}))),l?(0,r.cloneElement)(k.filter((e=>e.props.value===N))[0],{className:"margin-top--md"}):r.createElement("div",{className:"margin-top--md"},k.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==N})))))}function d(e){const t=(0,l.Z)();return r.createElement(m,(0,a.Z)({key:String(t)},e))}},7915:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(7378),r=n(3469),o=n(9619);function l(e){let{text:t}=e;return a.createElement(o.Z,{text:t,icon:r.SZw,variant:"success",className:"absolute right-0 top-1.5"})}},9634:(e,t,n)=>{n.d(t,{Z:()=>u});var a=n(7378),r=n(1884),o=n(5773),l=n(9928),i=n(3469),c=n(1792);const s={discord:l.omb,github:l.zhw,moon:i.Gp0,"new-project":i.g6h,"new-task":i.EQ8,project:i.pL1,"project-config":i.dhu,"project-config-global":i.YdP,"project-graph":i.Bkj,"run-task":i.sl_,task:i.diR,"task-config":i.o$R,token:i.BwA,toolchain:i.AlB,twitter:l.mdU,workspace:i.emM,"workspace-config":i.cRF};function p(e){let{name:t,...n}=e;return a.createElement(c.Z,(0,o.Z)({},n,{icon:s[t]}))}function u(e){let{links:t}=e;return a.createElement("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2"},t.map((e=>a.createElement(r.default,{key:e.url,href:e.url,className:"focus:outline-none"},a.createElement("div",{className:"relative rounded-lg px-3 py-3 flex items-center space-x-2 border-solid border border-t-0 border-b-2 bg-gray-50 hover:bg-gray-100/90 border-gray-200/75 dark:bg-slate-700 dark:hover:bg-slate-600 dark:border-slate-900/75"},a.createElement("div",{className:"flex-shrink-0"},a.createElement(p,{size:"lg",name:e.icon})),a.createElement("div",{className:"flex-1 min-w-0 text-gray-900 dark:text-gray-100"},e.label))))))}},9619:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(7378),r=n(8944),o=n(1792);const l={failure:"bg-red-100 text-red-900",info:"bg-pink-100 text-pink-900",success:"bg-green-100 text-green-900",warning:"bg-orange-100 text-orange-900"};function i(e){let{className:t,icon:n,text:i,variant:c}=e;return a.createElement("span",{className:(0,r.Z)("inline-flex items-center px-1 py-0.5 rounded text-xs font-bold uppercase",c?l[c]:"bg-gray-100 text-gray-800",t)},n&&a.createElement(o.Z,{icon:n,className:"mr-1"}),i)}},6570:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>m,contentTitle:()=>p,default:()=>g,frontMatter:()=>s,metadata:()=>u,toc:()=>d});var a=n(5773),r=(n(7378),n(5318)),o=n(3337),l=n(9798),i=n(7915),c=n(9634);const s={title:"Create a project"},p=void 0,u={unversionedId:"create-project",id:"create-project",title:"Create a project",description:"With a workspace, we can now house one or many projects,",source:"@site/docs/create-project.mdx",sourceDirName:".",slug:"/create-project",permalink:"/docs/create-project",draft:!1,editUrl:"https://github.com/moonrepo/moon/tree/master/website/docs/create-project.mdx",tags:[],version:"current",frontMatter:{title:"Create a project"},sidebar:"docs",previous:{title:"Setup workspace",permalink:"/docs/setup-workspace"},next:{title:"Create a task",permalink:"/docs/create-task"}},m={},d=[{value:"Declaring a project in the workspace",id:"declaring-a-project-in-the-workspace",level:2},{value:"Configuring a project",id:"configuring-a-project",level:2},{value:"Adding optional metadata",id:"adding-optional-metadata",level:3},{value:"Next steps",id:"next-steps",level:2}],f={toc:d};function g(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(i.Z,{text:"3 min",mdxType:"HeaderLabel"}),(0,r.kt)("p",null,"With a ",(0,r.kt)("a",{parentName:"p",href:"./setup-workspace"},"workspace"),", we can now house one or many ",(0,r.kt)("a",{parentName:"p",href:"./concepts/project"},"projects"),",\nwith a project being an application, library, or tool. In the end, each project will have its own\nbuild layer, personal tasks, and custom configuration."),(0,r.kt)("h2",{id:"declaring-a-project-in-the-workspace"},"Declaring a project in the workspace"),(0,r.kt)("p",null,"Although a project may exist in your repository, it's not accessible from moon until it's been\nmapped in the ",(0,r.kt)("a",{parentName:"p",href:"./config/workspace#projects"},(0,r.kt)("inlineCode",{parentName:"a"},"projects"))," setting found in\n",(0,r.kt)("a",{parentName:"p",href:"./config/workspace"},(0,r.kt)("inlineCode",{parentName:"a"},".moon/workspace.yml")),". When mapping a project, we require a unique name for\nthe project, and a project source location (path relative from the workspace root)."),(0,r.kt)("p",null,'Let\'s say we have a frontend web application called "client", and a backend Node.js application\ncalled "server", our ',(0,r.kt)("inlineCode",{parentName:"p"},"projects")," setting would look like the following."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title=".moon/workspace.yml"',title:'".moon/workspace.yml"'},"projects:\n    client: 'apps/client'\n    server: 'apps/server'\n")),(0,r.kt)("p",null,"We can now run ",(0,r.kt)("a",{parentName:"p",href:"./commands/project"},(0,r.kt)("inlineCode",{parentName:"a"},"moon project client"))," and\n",(0,r.kt)("a",{parentName:"p",href:"./commands/project"},(0,r.kt)("inlineCode",{parentName:"a"},"moon project server"))," to display information about each project. If these\nprojects were not mapped, or were pointing to an invalid source, the command would throw an error."),(0,r.kt)("admonition",{type:"success"},(0,r.kt)("p",{parentName:"admonition"},"The ",(0,r.kt)("a",{parentName:"p",href:"./config/workspace#projects"},(0,r.kt)("inlineCode",{parentName:"a"},"projects"))," setting also supports a list of globs, if you'd prefer\nto not manually curate the projects list!")),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Want to use ",(0,r.kt)("inlineCode",{parentName:"p"},"package.json")," names? Enable the\n",(0,r.kt)("a",{parentName:"p",href:"./config/workspace#aliaspackagenames"},(0,r.kt)("inlineCode",{parentName:"a"},"node.aliasPackageNames"))," setting!")),(0,r.kt)("h2",{id:"configuring-a-project"},"Configuring a project"),(0,r.kt)("p",null,"A project can be configured in 1 of 2 ways:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Through the ",(0,r.kt)("a",{parentName:"li",href:"./config/global-project"},(0,r.kt)("inlineCode",{parentName:"a"},".moon/project.yml"))," config file, which defines file groups\nand tasks that are inherited by ",(0,r.kt)("em",{parentName:"li"},"all")," projects within the workspace. Perfect for standardizing\ncommon tasks like linting, type-checking, and code formatting."),(0,r.kt)("li",{parentName:"ul"},"Through the ",(0,r.kt)("a",{parentName:"li",href:"./config/project"},(0,r.kt)("inlineCode",{parentName:"a"},"moon.yml"))," config file, found at the root of each project, which\ndefines files groups, tasks, dependencies, and more that are unique to that project.")),(0,r.kt)("p",null,"Both config files are optional, and can be used separately or together, the choice is yours!"),(0,r.kt)("p",null,"Now let's continue with our client and server example above. If we wanted to configure both\nprojects, and define config that's also shared between the 2, we could do something like the\nfollowing:"),(0,r.kt)(o.Z,{groupId:"project-config",defaultValue:"client",values:[{label:"Client",value:"client"},{label:"Server",value:"server"},{label:"Both (inherited)",value:"inherit"}],mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"client",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="apps/client/moon.yml"',title:'"apps/client/moon.yml"'},"tasks:\n    build:\n        command:\n            - 'webpack'\n            - 'build'\n            - '--mode'\n            - 'production'\n            - '--entry'\n            - 'src/index.tsx'\n            - '--output-path'\n            - 'build'\n        inputs:\n            - 'src/**/*'\n        outputs:\n            - 'build'\n"))),(0,r.kt)(l.Z,{value:"server",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="apps/server/moon.yml"',title:'"apps/server/moon.yml"'},"tasks:\n    build:\n        command: 'babel src --out-dir build'\n        inputs:\n            - 'src/**/*'\n        outputs:\n            - 'build'\n"))),(0,r.kt)(l.Z,{value:"inherit",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title=".moon/project.yml"',title:'".moon/project.yml"'},"tasks:\n    format:\n        command: 'prettier --write .'\n    lint:\n        command: 'eslint --no-error-on-unmatched-pattern .'\n    test:\n        command: 'jest --passWithNoTests .'\n    typecheck:\n        command: 'tsc --build'\n")))),(0,r.kt)("h3",{id:"adding-optional-metadata"},"Adding optional metadata"),(0,r.kt)("p",null,"When utilizing moon in a large monorepo or organization, ownership becomes very important, but also\ndifficult to maintain. To combat this problem, moon supports the\n",(0,r.kt)("a",{parentName:"p",href:"./config/project#project"},(0,r.kt)("inlineCode",{parentName:"a"},"project"))," field within a project's ",(0,r.kt)("a",{parentName:"p",href:"./config/project"},(0,r.kt)("inlineCode",{parentName:"a"},"moon.yml")),"\nconfig."),(0,r.kt)("p",null,"This field is ",(0,r.kt)("em",{parentName:"p"},"optional")," by default, but when defined it provides metadata about the project,\nspecifically around team ownership, which developers maintain the project, where to discuss it, and\nmore!"),(0,r.kt)("p",null,"Furthermore, we also support the ",(0,r.kt)("a",{parentName:"p",href:"./config/project#type-1"},(0,r.kt)("inlineCode",{parentName:"a"},"type"))," and\n",(0,r.kt)("a",{parentName:"p",href:"./config/project#language"},(0,r.kt)("inlineCode",{parentName:"a"},"language"))," settings for a more granular breakdown of what exists in the\nrepository."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="moon.yml"',title:'"moon.yml"'},"type: 'tool'\nlanguage: 'typescript'\nproject:\n  name: 'moon'\n  description: 'A repo management tool.'\n  channel: '#moon'\n  owner: 'infra.platform'\n  maintainers: ['miles.johnson']\n")),(0,r.kt)("h2",{id:"next-steps"},"Next steps"),(0,r.kt)(c.Z,{links:[{icon:"new-task",label:"Create a task",url:"./create-task"},{icon:"workspace-config",label:(0,r.kt)("span",null,"Configure ",(0,r.kt)("code",null,".moon/workspace.yml")," further"),url:"./config/workspace"},{icon:"project-config-global",label:(0,r.kt)("span",null,"Configure ",(0,r.kt)("code",null,".moon/project.yml")," further"),url:"./config/global-project"},{icon:"project-config",label:(0,r.kt)("span",null,"Configure ",(0,r.kt)("code",null,"moon.yml")," further"),url:"./config/project"},{icon:"project",label:"Learn about projects",url:"./concepts/project"}],mdxType:"NextSteps"}))}g.isMDXComponent=!0}}]);