"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[52768],{38127:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>h,contentTitle:()=>l,default:()=>u,frontMatter:()=>c,metadata:()=>r,toc:()=>p});const r=JSON.parse('{"id":"how-it-works/task-graph","title":"Task graph","description":"The task graph is a representation of all configured","source":"@site/docs/how-it-works/task-graph.mdx","sourceDirName":"how-it-works","slug":"/how-it-works/task-graph","permalink":"/docs/how-it-works/task-graph","draft":false,"unlisted":false,"editUrl":"https://github.com/moonrepo/moon/tree/master/website/docs/how-it-works/task-graph.mdx","tags":[],"version":"current","frontMatter":{"title":"Task graph"},"sidebar":"docs","previous":{"title":"Project graph","permalink":"/docs/how-it-works/project-graph"},"next":{"title":"Action graph","permalink":"/docs/how-it-works/action-graph"}}');var n=a(62540),s=a(43023),o=a(63696),i=a(79035);function d(){const e=(0,o.useRef)(null);return(0,o.useEffect)((()=>{e.current&&(0,i.D)(e.current,{edges:[{data:{source:"target-app-build",target:"target-app-clean"}},{data:{source:"target-app-build",target:"target-components-build"}},{data:{source:"target-app-build",target:"target-types-codegen"}},{data:{source:"target-components-build",target:"target-types-codegen"}}],nodes:[{data:{id:"target-app-build",label:"app:build",type:"sm"}},{data:{id:"target-app-clean",label:"app:clean",type:"sm"}},{data:{id:"target-components-build",label:"components:build",type:"sm"}},{data:{id:"target-types-codegen",label:"types:codegen",type:"sm"}}]})}),[]),(0,n.jsx)("div",{id:"task-graph",ref:e,className:"p-1 mb-2 rounded bg-slate-800",style:{height:"450px",width:"100%"}})}const c={title:"Task graph"},l=void 0,h={},p=[{value:"Relationships",id:"relationships",level:2},{value:"Required",id:"required",level:3},{value:"Optional",id:"optional",level:3},{value:"What is the graph used for?",id:"what-is-the-graph-used-for",level:2}];function g(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",ul:"ul",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(t.p,{children:["The task graph is a representation of all configured\n",(0,n.jsx)(t.a,{href:"../config/workspace#projects",children:"tasks in the workspace"})," and their relationships between each other,\nand is represented internally as a directed acyclic graph (DAG). This graph is derived from\ninformation in the ",(0,n.jsx)(t.a,{href:"./project-graph",children:"project graph"}),". Below is a visual representation of a task\ngraph."]}),"\n",(0,n.jsx)(d,{}),"\n",(0,n.jsx)(t.admonition,{type:"info",children:(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.a,{href:"../commands/task-graph",children:(0,n.jsx)(t.code,{children:"moon task-graph"})})," command can be used to view the structure of your\nworkspace."]})}),"\n",(0,n.jsx)(t.h2,{id:"relationships",children:"Relationships"}),"\n",(0,n.jsxs)(t.p,{children:["A relationship is between a dependent (downstream task) and a dependency/requirement (upstream\ntask). Relationships are derived explicitly with the task ",(0,n.jsx)(t.a,{href:"../config/project#deps",children:(0,n.jsx)(t.code,{children:"deps"})})," setting,\nand fall into 1 of 2 categories:"]}),"\n",(0,n.jsx)(t.h3,{id:"required",children:"Required"}),"\n",(0,n.jsx)(t.p,{children:"These are dependencies that are required to run and complete with a success, before the owning task\ncan run. If a required dependency fails, then the owning task will abort."}),"\n",(0,n.jsx)(t.h3,{id:"optional",children:"Optional"}),"\n",(0,n.jsxs)(t.p,{children:["The opposite of ",(0,n.jsx)(t.a,{href:"#required",children:"required"}),", these are dependencies that can either a) not exist during\ntask inheritance, or b) run and fail without aborting the owning task."]}),"\n",(0,n.jsx)(t.h2,{id:"what-is-the-graph-used-for",children:"What is the graph used for?"}),"\n",(0,n.jsx)(t.p,{children:"Great question, the task graph is extremely important for running tasks (duh), and it also:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["Is fed into the ",(0,n.jsx)(t.a,{href:"./action-graph",children:"action graph"})," that can be executed in topological order."]}),"\n",(0,n.jsxs)(t.li,{children:["Determines affected tasks in ",(0,n.jsx)(t.a,{href:"../guides/ci",children:"continuous integration"})," workflows."]}),"\n"]})]})}function u(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(g,{...e})}):g(e)}},79035:(e,t,a)=>{a.d(t,{D:()=>o});var r=a(60359),n=a(51571),s=a.n(n);function o(e,t){return(0,r.A)({container:e,elements:t,layout:{fit:!0,name:"dagre",nodeDimensionsIncludeLabels:!0,spacingFactor:1},style:[{selector:"edges",style:{"arrow-scale":2,color:"#e4f7fb","curve-style":"straight","font-size":12,label:"data(label)","line-cap":"round","line-color":"#c9eef6","line-opacity":.25,"overlay-color":"#c9eef6","target-arrow-color":"#c9eef6","target-arrow-shape":"chevron","text-opacity":.6,width:3}},{selector:"node",style:{"background-fill":"linear-gradient","background-gradient-direction":"to-bottom-right","background-gradient-stop-colors":"#d7dfe9 #bdc9db #97a1af",color:"#fff",height:60,label:"data(label)","overlay-color":"#99aab7","overlay-shape":"ellipse",padding:"0",shape:"ellipse","text-halign":"center","text-margin-y":6,"text-valign":"bottom","underlay-shape":"ellipse",width:60}},{selector:'node[type="run-task"]',style:{"background-gradient-stop-colors":"#6e58d1 #4a2ec6 #3b259e"}},{selector:'node[type="run-target"]',style:{"background-gradient-stop-colors":"#6e58d1 #4a2ec6 #3b259e"}},{selector:'node[type="sync-project"]',style:{"background-gradient-stop-colors":"#ffafff #ff79ff #cc61cc",height:80,width:80}},{selector:'node[type="install-dependencies"]',style:{"background-gradient-stop-colors":"#afe6f2 #79d5e9 #61aaba",height:90,width:90}},{selector:'node[type="setup-environment"]',style:{"background-gradient-stop-colors":"#c9e166 #b7d733 #a5cd00",height:90,width:90}},{selector:'node[type="setup-toolchain"]',style:{"background-gradient-stop-colors":"#ff9da6 #ff5b6b #cc4956",height:100,width:100}},{selector:'node[type="setup-proto"]',style:{"background-gradient-stop-colors":"#ffafff #ff79ff #cc61cc",height:110,width:110}},{selector:'node[id="sync-workspace"]',style:{"background-gradient-stop-colors":"#b7a9f9 #9a87f7 #8c75f5",height:120,width:120}}]})}r.A.use(s())}}]);