"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[18842],{5393:(e,o,n)=>{n.d(o,{A:()=>t});const t=n.p+"assets/images/v0.53-5c645bdaa8e0758e18ed18be42c36cee.png"},43023:(e,o,n)=>{n.d(o,{R:()=>s,x:()=>a});var t=n(63696);const i={},r=t.createContext(i);function s(e){const o=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function a(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(r.Provider,{value:o},e.children)}},93115:e=>{e.exports=JSON.parse('{"permalink":"/blog/proto-v0.53","editUrl":"https://github.com/moonrepo/moon/tree/master/website/blog/2025-09-18_proto-v0.53.mdx","source":"@site/blog/2025-09-18_proto-v0.53.mdx","title":"proto v0.53 - New exec command and backend configuration","description":"In this release, we\'re introducing another way to execute tools within proto.","date":"2025-09-18T00:00:00.000Z","tags":[{"inline":true,"label":"exec","permalink":"/blog/tags/exec"},{"inline":true,"label":"workflow","permalink":"/blog/tags/workflow"},{"inline":true,"label":"backend","permalink":"/blog/tags/backend"},{"inline":true,"label":"config","permalink":"/blog/tags/config"}],"readingTime":2.44,"hasTruncateMarker":true,"authors":[{"name":"Miles Johnson","title":"Founder, developer","url":"https://github.com/milesj","imageURL":"/img/authors/miles.jpg","key":"milesj","page":null}],"frontMatter":{"slug":"proto-v0.53","title":"proto v0.53 - New exec command and backend configuration","authors":["milesj"],"tags":["exec","workflow","backend","config"],"image":"./img/proto/v0.53.png"},"unlisted":false,"prevItem":{"title":"moon v1.41 - Deno WASM toolchain and task input/output improvements","permalink":"/blog/moon-v1.41"},"nextItem":{"title":"moon v1.40 - JavaScript ecosystem WASM toolchains and more","permalink":"/blog/moon-v1.40"}}')},96189:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>t,toc:()=>l});var t=n(93115),i=n(62540),r=n(43023);const s={slug:"proto-v0.53",title:"proto v0.53 - New exec command and backend configuration",authors:["milesj"],tags:["exec","workflow","backend","config"],image:"./img/proto/v0.53.png"},a=void 0,c={image:n(5393).A,authorsImageUrls:[void 0]},l=[{value:"New <code>proto exec</code> command",id:"new-proto-exec-command",level:2},{value:"Backend configuration support",id:"backend-configuration-support",level:2},{value:"Other changes",id:"other-changes",level:2},{value:"Looking for contributors",id:"looking-for-contributors",level:2}];function d(e){const o={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.p,{children:"In this release, we're introducing another way to execute tools within proto."}),"\n",(0,i.jsxs)(o.h2,{id:"new-proto-exec-command",children:["New ",(0,i.jsx)(o.code,{children:"proto exec"})," command"]}),"\n",(0,i.jsxs)(o.p,{children:["Since proto's inception, we've had the ",(0,i.jsx)(o.a,{href:"/docs/proto/commands/run",children:(0,i.jsx)(o.code,{children:"proto run"})})," command for executing\na specific tool with a list of arguments. While this works well for simple use-cases, like our shims\nlayer, it has some limitations, such as:"]}),"\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsx)(o.li,{children:"It only works with one tool at a time, not multiple."}),"\n",(0,i.jsx)(o.li,{children:"It cannot bootstrap the environment (vars and paths)."}),"\n",(0,i.jsx)(o.li,{children:"It cannot execute arbitrary commands."}),"\n",(0,i.jsx)(o.li,{children:"It requires a tool to have a primary/main executable (not everything does)."}),"\n",(0,i.jsx)(o.li,{children:"Executing a secondary executable is not straightforward."}),"\n"]}),"\n",(0,i.jsxs)(o.p,{children:["To address these limitations, we're introducing a new command,\n",(0,i.jsx)(o.a,{href:"/docs/proto/commands/exec",children:(0,i.jsx)(o.code,{children:"proto exec"})}),"! This command is designed to bootstrap the environment\nwith any numbers of tools, and execute an arbitrary command within that environment."]}),"\n",(0,i.jsx)(o.p,{children:"For example, say we want to run a backend application that requires Node.js, pnpm, and Ruby, we can\ndo the following:"}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-shell",children:"$ proto exec node@24 pnpm@10 ruby@3.4 -- pnpm run app:start\n"})}),"\n",(0,i.jsxs)(o.p,{children:["This will load and activate these three tools, set environment variables, update ",(0,i.jsx)(o.code,{children:"PATH"}),", and execute\nthe command! Pretty nifty, right? It even supports executing the command within a shell! Head to the\ndocs for more information."]}),"\n",(0,i.jsx)(o.h2,{id:"backend-configuration-support",children:"Backend configuration support"}),"\n",(0,i.jsxs)(o.p,{children:["In our previous release, we updated backend plugins with user-driven support, instead of being\nhard-coded into proto core. To build upon this, we've improved the interoperability of backends by\nsupporting configuration of the backend itself (not the tool that the backend represents), using the\nnew ",(0,i.jsxs)(o.a,{href:"/docs/proto/config#backends",children:[(0,i.jsx)(o.code,{children:"[backends]"})," setting"]}),"."]}),"\n",(0,i.jsxs)(o.p,{children:["For example, say you're using ",(0,i.jsx)(o.code,{children:"asdf:zig"}),", which is the ",(0,i.jsx)(o.code,{children:"zig"})," tool in the ",(0,i.jsx)(o.code,{children:"asdf"})," backend. To\nconfigure the tool, you would use ",(0,i.jsx)(o.code,{children:'[tools."asdf:zig"]'}),", but to configure the ",(0,i.jsx)(o.code,{children:"asdf"})," backend itself,\nyou can now use ",(0,i.jsx)(o.code,{children:"[backends.asdf]"}),"."]}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-toml",metastring:'title=".prototools"',children:'[backends.asdf]\nbackend-setting = "value"\n\n[tools."asdf:zig"]\ntool-setting = "value"\n'})}),"\n",(0,i.jsxs)(o.p,{children:["Backend configuration is useful where you want to control the behavior of the backend itself and\napply it to ",(0,i.jsx)(o.em,{children:"all"})," tools, while backend-managed tool configuration is useful when you want to control\nthe behavior of a specific tool."]}),"\n",(0,i.jsx)(o.admonition,{type:"warning",children:(0,i.jsxs)(o.p,{children:["In previous versions, configuring a backend-managed tool was done without the backend prefix, for\nexample ",(0,i.jsx)(o.code,{children:"[tools.zig]"}),". To avoid collision with non-backend-managed tools, this is no longer\nsupported, and you must use the full locator, for example ",(0,i.jsx)(o.code,{children:'[tools."asdf:zig"]'}),"."]})}),"\n",(0,i.jsx)(o.h2,{id:"other-changes",children:"Other changes"}),"\n",(0,i.jsxs)(o.p,{children:["View the ",(0,i.jsx)(o.a,{href:"https://github.com/moonrepo/proto/releases/tag/v0.53.0",children:"official release"})," for a full list\nof changes."]}),"\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsx)(o.li,{children:"Added a mechanism for plugins to setup the environment during activation and execution workflows."}),"\n",(0,i.jsx)(o.li,{children:"Fixed an issue where shims that belong to a backend would fail to run."}),"\n"]}),"\n",(0,i.jsx)(o.h2,{id:"looking-for-contributors",children:"Looking for contributors"}),"\n",(0,i.jsx)(o.p,{children:"We have a lot of cool stuff planned for proto, like more official backends and tools, improved\nworkflows, an official registry, and more! So if you're interested in Rust or WASM, we would love\nand appreciate your help. Feel free to ping us on Discord!"})]})}function h(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,i.jsx)(o,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);