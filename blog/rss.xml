<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>moonrepo Blog</title>
        <link>https://moonrepo.dev/blog</link>
        <description>moonrepo Blog</description>
        <lastBuildDate>Mon, 26 Feb 2024 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[moon v1.22 - Organizational settings, wildcard env var inputs, and Nx migration]]></title>
            <link>https://moonrepo.dev/blog/moon-v1.22</link>
            <guid>https://moonrepo.dev/blog/moon-v1.22</guid>
            <pubDate>Mon, 26 Feb 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[This release introduces new organizational settings for projects, a migrate from Nx extension, and]]></description>
            <content:encoded><![CDATA[<p>This release introduces new organizational settings for projects, a migrate from Nx extension, and
more.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="more-organizational-settings">More organizational settings<a href="https://moonrepo.dev/blog/moon-v1.22#more-organizational-settings" class="hash-link" aria-label="Direct link to More organizational settings" title="Direct link to More organizational settings">​</a></h2>
<p>One aspect of moon that sets us apart from other build systems and tools, is that we have built-in
support for human-readable project and task metadata. This is extremely useful in organizing and
managing large repositories, especially when ownership comes into play. This information is also
used for categorization and filtering for MQL and our editor extensions/plugins.</p>
<p>To expand on this functionality even further, we're adding a few requests from the community, and
they are:</p>
<ul>
<li>
<p>New <code>configuration</code> and <code>scaffolding</code> variants for the project <a href="https://moonrepo.dev/docs/config/project#type"><code>type</code></a>
setting in <a href="https://moonrepo.dev/docs/config/project"><code>moon.yml</code></a>. Perfect for contracts and templates.</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">type</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'configuration'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>New <a href="https://moonrepo.dev/docs/config/project#stack"><code>stack</code></a> setting in <a href="https://moonrepo.dev/docs/config/project"><code>moon.yml</code></a>, for
categorizing which tech stack the project belongs to. Supports <code>frontend</code>, <code>backend</code>,
<code>infrastructure</code>, and <code>systems</code>.</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">stack</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'frontend'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>New <a href="https://moonrepo.dev/docs/config/project#description-1"><code>description</code></a> setting for tasks, that provides
human-readable information.</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">build</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">description</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'Builds the project using Vite'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'vite build'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="new-wildcard-environment-variable-inputs">New wildcard environment variable inputs<a href="https://moonrepo.dev/blog/moon-v1.22#new-wildcard-environment-variable-inputs" class="hash-link" aria-label="Direct link to New wildcard environment variable inputs" title="Direct link to New wildcard environment variable inputs">​</a></h2>
<p>Task inputs have supported environment variables for quite a while now, but they are explicit, which
can be tedious too manage when you have many environment variables. To make this easier, we've added
support for wildcard environment variables, denoted by a <code>*</code>, which will match any environment
variable with that pattern.</p>
<p>For example, say we want to track all Node.js and Vite environment variables that start with <code>NODE_</code>
and <code>VITE_</code> respectively, we can simply do:</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">build</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'vite build'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">inputs</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'$NODE_*'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'$VITE_*'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>Do note that this <em>isn't</em> a glob, and the <code>*</code> is merely a substitution for any character!</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="new-migrate-nx-extension">New <code>migrate-nx</code> extension<a href="https://moonrepo.dev/blog/moon-v1.22#new-migrate-nx-extension" class="hash-link" aria-label="Direct link to new-migrate-nx-extension" title="Direct link to new-migrate-nx-extension">​</a></h2>
<p>In our previous release, we added support for <a href="https://moonrepo.dev/blog/moon-v1.21">migrating from Turborepo</a>, but what
about Nx? Nx is a very popular build system with many users. A lot of our current moon users were
former Nx users, but unfortunately, they had to go through the tedious process of migrating
everything manually. We wanted to make this process easier for new users, so we created a new
experimental extension to help with this process,
<a href="https://moonrepo.dev/docs/guides/extensions#migrate-nx"><code>migrate-nx</code></a>.</p>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ moon ext migrate-nx</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This extension was quite complicated to implement, as Nx has a <em>ton</em> of features. However, when the
extension is executed, we'll convert the root <code>nx.json</code> and <code>workspace.json</code> files to
<a href="https://moonrepo.dev/docs/config/workspace"><code>.moon/workspace.yml</code></a> and related top-level config files, and we'll also
convert every <code>project.json</code> and <code>package.json</code> (with an <code>nx</code> block) into a
<a href="https://moonrepo.dev/docs/config/project"><code>moon.yml</code></a> file.</p>
<p>Conversion is not a perfect 1:1, as moon and Nx are quite different. Please refer to the
<a href="https://moonrepo.dev/docs/guides/extensions#migrate-nx">official documentation</a> for a list of unsupported settings and
features.</p>
<div class="theme-admonition theme-admonition-info admonition_WCGJ alert alert--info"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_pbrs"><p>An awesome feature that didn't make it in time for this release, is an npm package for Nx
compatiblity, that will allow Nx executors/plugins to be executed through moon, without the
requirement of Nx itself. This will allow for a seamless transition from Nx to moon, without the
need to change any of your existing Nx executors/plugins till later.</p><p>This functionality will be provided by our new
<a href="https://github.com/moonrepo/moon/tree/master/packages/nx-compat" target="_blank" rel="noopener noreferrer"><code>@moonrepo/nx-compat</code> package</a>,
which we hope to finish in the coming weeks.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="https://moonrepo.dev/blog/moon-v1.22#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2>
<p>View the <a href="https://github.com/moonrepo/moon/releases/tag/v1.22.0" target="_blank" rel="noopener noreferrer">official release</a> for a full list
of changes.</p>
<ul>
<li>Added an <code>installArgs</code> setting for bun/npm/pnpm/yarn in <code>.moon/toolchain.yml</code>, to customize the
args used when installing dependencies.</li>
<li>Updated the <code>envFile</code> task option to support a list of file paths.</li>
</ul>]]></content:encoded>
            <category>project</category>
            <category>metadata</category>
            <category>nx</category>
            <category>migrate</category>
        </item>
        <item>
            <title><![CDATA[moon v1.21 - Deno tier 3, file group improvements, task shells, and more!]]></title>
            <link>https://moonrepo.dev/blog/moon-v1.21</link>
            <guid>https://moonrepo.dev/blog/moon-v1.21</guid>
            <pubDate>Wed, 07 Feb 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[With this release, get ready for Deno tier 3 support, file group and task improvements, a new]]></description>
            <content:encoded><![CDATA[<p>With this release, get ready for Deno tier 3 support, file group and task improvements, a new
extension, and more.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="deno-tier-3-support">Deno tier 3 support<a href="https://moonrepo.dev/blog/moon-v1.21#deno-tier-3-support" class="hash-link" aria-label="Direct link to Deno tier 3 support" title="Direct link to Deno tier 3 support">​</a></h2>
<p>We've supported Deno tier 1 and 2 for almost a year now, but were hesitant to support tier 3 until
<a href="https://moonrepo.dev/proto">proto</a> stabilizes further. Now that proto is <em>almost</em> at an official v1 release, and other
tools in the toolchain (like Node.js, Bun, and Rust) are powered by proto, we're confident in
supporting Deno tier 3. To make use of this, simply set the
<a href="https://moonrepo.dev/docs/config/toolchain#deno"><code>deno.version</code></a> setting in
<a href="https://moonrepo.dev/docs/config/toolchain"><code>.moon/toolchain.yml</code></a>.</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/toolchain.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">deno</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">version</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'1.40.0'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>When enabled, moon will download and install that version of Deno in the background, and run all
subsequent tasks with it. This is great for ensuring that your project is always using the same
version of Deno, across all machines.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="file-groups-now-support-environment-variables">File groups now support environment variables<a href="https://moonrepo.dev/blog/moon-v1.21#file-groups-now-support-environment-variables" class="hash-link" aria-label="Direct link to File groups now support environment variables" title="Direct link to File groups now support environment variables">​</a></h2>
<p>Task <a href="https://moonrepo.dev/docs/config/project#inputs"><code>inputs</code></a> have supported environment variables for a while now,
but file groups have not. The main reason for this is that file groups were implemented far before
environment variables in task inputs! To bridge this gap, we've added support for environment
variables in file groups.</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">fileGroups</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">vite</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'...'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'$VITE_SECRET_KEY'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'$NODE_ENV'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">build</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'vite build'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">inputs</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'@group(vite)'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Environment variables can be referenced using the
<a href="https://moonrepo.dev/docs/concepts/token#group"><code>@group</code> token function</a>, or the new
<a href="https://moonrepo.dev/docs/concepts/token#envs"><code>@envs</code> token function</a>. The latter is only supported for <code>inputs</code> and
will error for other locations, while the former is supported in <code>args</code>, <code>inputs</code>, and <code>outputs</code>,
but will filter out environment variables when they are not supported.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="new-unixshell-and-windowsshell-task-options">New <code>unixShell</code> and <code>windowsShell</code> task options<a href="https://moonrepo.dev/blog/moon-v1.21#new-unixshell-and-windowsshell-task-options" class="hash-link" aria-label="Direct link to new-unixshell-and-windowsshell-task-options" title="Direct link to new-unixshell-and-windowsshell-task-options">​</a></h2>
<p>When the <a href="https://moonrepo.dev/docs/config/project#shell"><code>shell</code></a> task option is enabled, we run the task within a
shell. However, the chosen shell was hard-coded to <code>$SHELL</code> on Unix machines and PowerShell on
Windows, but what if you wanted to run it with a different shell? Or the same shell across all
operating systems? Well, you couldn't.</p>
<p>But not anymore! With this release, we're introducing <a href="https://moonrepo.dev/docs/config/project#unixshell"><code>unixShell</code></a>
and <a href="https://moonrepo.dev/docs/config/project#windowsshell"><code>windowsShell</code></a> task options. When paired with <code>shell</code>, the
task will run in a shell of your choice. For example, why not Bash everywhere?</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">moon.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">build</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'vite build'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">options</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token key atrule">shell</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#94dded">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token key atrule">unixShell</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'bash'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token key atrule">windowsShell</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'bash'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="new-migrate-turborepo-extension">New <code>migrate-turborepo</code> extension<a href="https://moonrepo.dev/blog/moon-v1.21#new-migrate-turborepo-extension" class="hash-link" aria-label="Direct link to new-migrate-turborepo-extension" title="Direct link to new-migrate-turborepo-extension">​</a></h2>
<p>In our previous release, we added support for <a href="https://moonrepo.dev/blog/moon-v1.20">extensions, a new kind of WASM plugin</a>.
Since this is a new experimental feature, we really wanted to show off what it can do, and stress
test its boundaries. To do that, we chose to migrate the old <code>moon migrate from-turborepo</code> command
into an extension
(<a href="https://github.com/moonrepo/moon-extensions/tree/master/crates/migrate-turborepo" target="_blank" rel="noopener noreferrer">source can be found here</a>).
This is our most complex extension so far, as it:</p>
<ul>
<li>Loads and parses files on the file system.</li>
<li>Reads and writes JSON and YAML files.</li>
<li>Supports deserializing data into structs.</li>
<li>Extracts project graph information by executing <code>moon project-graph</code>.</li>
</ul>
<p>Do you currently have a Turborepo powered repository? And want to migrate to moon? Then simply
execute the extension as such. View our
<a href="https://moonrepo.dev/docs/guides/extensions#migrate-turborepo">guide for more information</a>!</p>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ moon ext migrate-turborepo</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As part of the migration from moon's Rust core into a WASM plugin, we've added support for the
following new features:</p>
<ul>
<li>Added Bun support behind a new <code>--bun</code> flag.</li>
<li>Added support for Turbo's <code>globalDotEnv</code>, <code>dotEnv</code>, and <code>outputMode</code>.</li>
<li>Added support for root-level tasks (<code>//#</code>) through a root <code>moon.yml</code>, instead of logging a
warning.</li>
<li>Updated migrated task commands to run through a package manager, instead of
<code>moon node run-script</code>.</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_WCGJ alert alert--info"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_pbrs"><p>Based on the success of this extension, we plan to support a <code>migrate-nx</code> extension in the future!
If you'd like to help in this endeavor, let us know!</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="https://moonrepo.dev/blog/moon-v1.21#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2>
<p>View the <a href="https://github.com/moonrepo/moon/releases/tag/v1.21.0" target="_blank" rel="noopener noreferrer">official release</a> for a full list
of changes.</p>
<ul>
<li>Added <code>bun.inferTasksFromScripts</code> setting to <code>.moon/toolchain.yml</code>, for compatibility with
Node.js.</li>
<li>Added a <code>--quiet</code> global argument, for hiding non-critical moon output.</li>
<li>Updated tasks with glob-like arguments to automatically enabled the <code>shell</code> option, so that glob
expansion works correctly.</li>
<li>Implemented a new buffered console layer for writing to stdout/stderr.</li>
</ul>]]></content:encoded>
            <category>deno</category>
            <category>file-groups</category>
            <category>env</category>
            <category>shell</category>
            <category>tasks</category>
            <category>turborepo</category>
        </item>
        <item>
            <title><![CDATA[moon v1.20 - Extension plugins, default task options, and more]]></title>
            <link>https://moonrepo.dev/blog/moon-v1.20</link>
            <guid>https://moonrepo.dev/blog/moon-v1.20</guid>
            <pubDate>Fri, 26 Jan 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[In this release, we're excited to introduce extensions, our first type of plugin!]]></description>
            <content:encoded><![CDATA[<p>In this release, we're excited to introduce extensions, our first type of plugin!</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="new-extension-plugins">New extension plugins<a href="https://moonrepo.dev/blog/moon-v1.20#new-extension-plugins" class="hash-link" aria-label="Direct link to New extension plugins" title="Direct link to New extension plugins">​</a></h2>
<p>In our <a href="https://moonrepo.dev/blog/2024-roadmap">2024 roadmap blog post</a>, we talked heavily about plugins, as we believe
they're the future of moon and its ecosystem. What we didn't talk about is that we plan to have
<em>many types of plugins</em>, and not just language/platform specific ones. And with that, we're excited
to introduce extensions!</p>
<p>An extension is a WASM plugin that allows you to extend moon with additional functionality, have
whitelisted access to the file system, and receive partial information about the current workspace.
Extensions are extremely useful in offering new and unique functionality that doesn't need to be
built into moon's core.</p>
<p>Once such extension is our built-in <code>download</code> extension, which is a basic extension that simply
downloads a file from a URL into the current moon workspace.</p>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ moon ext download -- </span><span class="token parameter variable" style="color:#fef9c3">--url</span><span class="token plain"> https://github.com/moonrepo/proto/releases/latest/download/proto_cli-aarch64-apple-darwin.tar.xz</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Shipping alongside extensions are the following new features:</p>
<ul>
<li>An <a href="https://moonrepo.dev/docs/guides/extensions">official extensions guide</a>!</li>
<li>An <a href="https://moonrepo.dev/docs/config/workspace#extensions"><code>extensions</code></a> setting for configuring new extensions.</li>
<li>A <a href="https://moonrepo.dev/docs/commands/ext"><code>moon ext</code></a> command for executing a configured extension.</li>
<li>The required infrastructure for plugins!</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="configure-default-options-for-tasks">Configure default options for tasks<a href="https://moonrepo.dev/blog/moon-v1.20#configure-default-options-for-tasks" class="hash-link" aria-label="Direct link to Configure default options for tasks" title="Direct link to Configure default options for tasks">​</a></h2>
<p><a href="https://moonrepo.dev/docs/config/project#options">Task options</a> provide a way to apply granular changes to a task's
behavior when running in the pipeline. However, they can become tedious when you need to apply them
to many tasks, especially when inheritance is involved. To help with this, you can now configure the
<a href="https://moonrepo.dev/docs/config/tasks#taskoptions"><code>taskOptions</code></a> setting in task related configs, like
<code>.moon/tasks.yml</code> and <code>.moon/tasks/*.yml</code>, which acts as the base/default options for all inherited
tasks.</p>
<p>For example, the following config:</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/tasks.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">build</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token comment" style="color:#97a1af;font-style:italic"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">options</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token key atrule">outputStyle</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'stream'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token key atrule">retryCount</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token number" style="color:#94dded">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">lint</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token comment" style="color:#97a1af;font-style:italic"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">options</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token key atrule">outputStyle</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'stream'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token key atrule">retryCount</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token number" style="color:#94dded">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">test</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token comment" style="color:#97a1af;font-style:italic"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">options</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token key atrule">outputStyle</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'stream'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token key atrule">retryCount</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token number" style="color:#94dded">2</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Can simply be rewritten as:</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/tasks.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">taskOptions</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">outputStyle</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'stream'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">retryCount</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token number" style="color:#94dded">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">build</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token comment" style="color:#97a1af;font-style:italic"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">lint</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token comment" style="color:#97a1af;font-style:italic"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">test</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token comment" style="color:#97a1af;font-style:italic"># ...</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Because these options are defined at the workspace-level, they adhere to the same merge and
inheritance rules as other settings. Just be aware that these options are inherited first in the
chain, and can be overwritten by other layers, or by project-level tasks.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="optional-task-dependencies">Optional task dependencies<a href="https://moonrepo.dev/blog/moon-v1.20#optional-task-dependencies" class="hash-link" aria-label="Direct link to Optional task dependencies" title="Direct link to Optional task dependencies">​</a></h2>
<p>By default, all task <a href="https://moonrepo.dev/docs/config/project#tasks-1"><code>deps</code></a> are required to exist when tasks are
being built and expanded, but this isn't always true when dealing with composition and inheritance.
For example, say you're using
<a href="https://moonrepo.dev/docs/concepts/task-inheritance#scope-by-project-metadata">tag-based inheritance</a>, and a global
task relies on one of these tagged tasks, but not all projects may define the appropriate tags. In
previous versions of moon, this is a hard failure, as the dependent task does not exist.</p>
<p>To remedy this, we're introducing a new <a href="https://moonrepo.dev/docs/config/project#optional-1"><code>optional</code></a> flag for task
dependencies. When set to <code>true</code>, moon will no longer error when the task doesn't exist, and instead
will omit the dependency.</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/tasks.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">build</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'vite'</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">deps</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token key atrule">target</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'#components:build'</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#e5e9f1"><span class="token plain">        </span><span class="token key atrule">optional</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#94dded">true</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>Thanks to <a href="https://github.com/maastrich" target="_blank" rel="noopener noreferrer">@maastrich</a> for this contribution!</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="https://moonrepo.dev/blog/moon-v1.20#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2>
<p>View the <a href="https://github.com/moonrepo/moon/releases/tag/v1.20.0" target="_blank" rel="noopener noreferrer">official release</a> for a full list
of changes.</p>
<ul>
<li>Added a "Tags" view to the VSCode extension.</li>
<li>Updated proto to v0.29.1 (from v0.26.4).</li>
<li>Updated proto installation to trigger for all applicable commands, not just <code>moon run</code>,
<code>moon check</code>, and <code>moon ci</code>.</li>
</ul>]]></content:encoded>
            <category>task</category>
            <category>options</category>
            <category>extensions</category>
            <category>plugins</category>
        </item>
        <item>
            <title><![CDATA[proto v0.29 - Better environment support]]></title>
            <link>https://moonrepo.dev/blog/proto-v0.29</link>
            <guid>https://moonrepo.dev/blog/proto-v0.29</guid>
            <pubDate>Tue, 23 Jan 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[In this release, we focused heavily on environment interoperability.]]></description>
            <content:encoded><![CDATA[<p>In this release, we focused heavily on environment interoperability.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="new-environment-aware-configuration">New environment aware configuration<a href="https://moonrepo.dev/blog/proto-v0.29#new-environment-aware-configuration" class="hash-link" aria-label="Direct link to New environment aware configuration" title="Direct link to New environment aware configuration">​</a></h2>
<p>We've made a small but useful improvement to <code>.prototools</code>, environment aware files! When the
<code>PROTO_ENV</code> environment variable is set, proto will look for an additional <code>.prototools.{env}</code> file
and merge it with the base configuration.</p>
<p>This is useful for certain deploy scenarios where you need different versions of tools, environment
variables, or settings!</p>
<div class="language-toml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.prototools</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-toml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key property" style="color:#b7a9f9">node</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">=</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"21.0.0"</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-toml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.prototools.production</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-toml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key property" style="color:#b7a9f9">node</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">=</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"20.0.0"</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="new-env-and-toolsenv-settings">New <code>[env]</code> and <code>[tools.*.env]</code> settings<a href="https://moonrepo.dev/blog/proto-v0.29#new-env-and-toolsenv-settings" class="hash-link" aria-label="Direct link to new-env-and-toolsenv-settings" title="Direct link to new-env-and-toolsenv-settings">​</a></h2>
<p>We're also introducing 2 new settings to the <code>.prototools</code> file, <a href="https://moonrepo.dev/docs/proto/config#env"><code>[env]</code></a>
and <a href="https://moonrepo.dev/docs/proto/config#toolsenv"><code>[tools.*.env]</code></a>, both of which configure environment variables
that'll be applied when the tool is executed. This is useful for defining directory-level and
tool-specific variables.</p>
<div class="language-toml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.prototools</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-toml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token punctuation" style="color:#cad4e2">[</span><span class="token table class-name" style="color:#ff94ff;font-weight:bold">env</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key property" style="color:#b7a9f9">DEBUG</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">=</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"*"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token table class-name" style="color:#ff94ff;font-weight:bold">tools.node.env</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key property" style="color:#b7a9f9">NODE_ENV</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">=</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"production"</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>View the <a href="https://moonrepo.dev/docs/proto/config">configuration documentation</a> for more information on how these work!</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="https://moonrepo.dev/blog/proto-v0.29#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2>
<p>View the <a href="https://github.com/moonrepo/proto/releases/tag/v0.29.0" target="_blank" rel="noopener noreferrer">official release</a> for a full list
of changes.</p>
<ul>
<li>Updated <code>proto tool info</code> to display aliases and environment variables.</li>
<li>Updated WASM logs to be shown alongside proto's <code>--log</code> output (under the <code>extism::pdk</code>
namespace).</li>
</ul>]]></content:encoded>
            <category>proto</category>
            <category>environment</category>
        </item>
        <item>
            <title><![CDATA[proto v0.28 - Upgraded WASM runtime]]></title>
            <link>https://moonrepo.dev/blog/proto-v0.28</link>
            <guid>https://moonrepo.dev/blog/proto-v0.28</guid>
            <pubDate>Wed, 17 Jan 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[This is a small release that primarily upgrades our WASM runtime.]]></description>
            <content:encoded><![CDATA[<p>This is a small release that primarily upgrades our WASM runtime.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="upgraded-wasm-runtime">Upgraded WASM runtime<a href="https://moonrepo.dev/blog/proto-v0.28#upgraded-wasm-runtime" class="hash-link" aria-label="Direct link to Upgraded WASM runtime" title="Direct link to Upgraded WASM runtime">​</a></h2>
<p>proto utilizes <a href="https://extism.org/" target="_blank" rel="noopener noreferrer">Extism</a> for our WASM plugin architecture, which internally uses
<a href="https://wasmtime.dev/" target="_blank" rel="noopener noreferrer">wasmtime</a> as our execution runtime. Up until this point, we've been using a
beta release of Extism, v0.5, which has worked quite nicely. We've also been working closely with
the Extism team to report bugs, provide feedback, and help improve the project. Once such feature
was the massive performance gains in <a href="https://moonrepo.dev/blog/proto-v0.24">proto v0.24</a>.</p>
<p>Thanks to all the hard work from the Extism team over the past year, an official v1.0 was released.
Because this was a major release, it did include breaking changes around the WASM runtime, and as
such, proto WASM plugins before v0.28 are <em>no longer compatible</em>, and will need to be recompiled
with the latest PDKs. Our proto TOML plugins are not affected.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="https://moonrepo.dev/blog/proto-v0.28#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2>
<p>View the <a href="https://github.com/moonrepo/proto/releases/tag/v0.28.0" target="_blank" rel="noopener noreferrer">official release</a> for a full list
of changes.</p>
<ul>
<li>Will now display an upgrade message when the current proto version is out of date.</li>
<li>Improved error messages to include plugin specific information.</li>
<li>Updated our "last used at" logic to avoid race conditions with the tool manifest.</li>
</ul>]]></content:encoded>
            <category>proto</category>
            <category>wasm</category>
            <category>runtime</category>
            <category>extism</category>
        </item>
        <item>
            <title><![CDATA[What's in store for 2024]]></title>
            <link>https://moonrepo.dev/blog/2024-roadmap</link>
            <guid>https://moonrepo.dev/blog/2024-roadmap</guid>
            <pubDate>Fri, 12 Jan 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[Happy new year! Let's start 2024 by reflecting on last year and diving into our tentative year long]]></description>
            <content:encoded><![CDATA[<p>Happy new year! Let's start 2024 by reflecting on last year and diving into our tentative year long
roadmap.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="year-2023-in-review">Year 2023 in review<a href="https://moonrepo.dev/blog/2024-roadmap#year-2023-in-review" class="hash-link" aria-label="Direct link to Year 2023 in review" title="Direct link to Year 2023 in review">​</a></h2>
<p>Last year was an extremely exciting year for us! To start, we were accepted into the
<a href="https://www.ycombinator.com/companies/moonrepo" target="_blank" rel="noopener noreferrer">Y Combinator 2023 winter batch</a>, which was
extremely unexpected, but very much welcome. The 3 months we spent in YC was quite eye opening, as
we learned so much about the industry, and how to move forward. We spent those 3 months really
diving into what we want to build and deliver, and after much trial and error, and many failed
prototypes, we chose to move forward with launching <a href="https://moonrepo.dev/proto">proto</a> as its own tool, improving
<a href="https://moonrepo.dev/moon">moon</a>, and slowing down development of <a href="https://moonrepo.dev/moonbase">moonbase</a> (outside of remote caching).</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="moon">moon<a href="https://moonrepo.dev/blog/2024-roadmap#moon" class="hash-link" aria-label="Direct link to moon" title="Direct link to moon">​</a></h3>
<p>For <a href="https://moonrepo.dev/moon">moon</a>, we officially launched v1 back in March, and celebrated its 2 year birthday in
October. Over the course of 2023, we released 23 minor versions, jam packed with new features such
as:</p>
<ul>
<li>Action and project graphs improvements</li>
<li>Bun tier 1, 2, and 3 support</li>
<li>Canary &amp; nightly releases</li>
<li>Code ownership (<code>CODEOWNERS</code>)</li>
<li>Configuration rewrite (using our <a href="https://github.com/moonrepo/schematic" target="_blank" rel="noopener noreferrer">schematic</a> crate)</li>
<li>Deno tier 1 and 2 support</li>
<li>Developer experience improvements</li>
<li>Documentation polish</li>
<li>Experiments</li>
<li>Interactive &amp; persistent tasks</li>
<li>JavaScript and TypeScript improvements</li>
<li>Onboarding flow improvements</li>
<li><code>PATH</code> based task execution</li>
<li><a href="https://moonrepo.dev/proto">proto</a> integration</li>
<li>Query language</li>
<li><a href="https://railway.app/" target="_blank" rel="noopener noreferrer">Railway</a> support</li>
<li>Rust tier 1, 2, and 3 support</li>
<li>Tagging and boundaries/contraints</li>
<li>Task extending, inheritance, and configuration enhancements</li>
<li>Task dependencies configurations</li>
<li>Toolchain enhancements</li>
<li>VCS (Git) hooks</li>
<li>... and much much more!</li>
</ul>
<p>However, when looking at our <a href="https://moonrepo.dev/blog/2023-roadmap">2023 roadmap</a>, there are a few items we failed to
deliver on. The biggest are additional languages, better tier support, and release workflows. We
ultimately didn't land these features as we plan to move to a plugin based architecture, and didn't
want to invest too much time into the current implementation.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="moonbase">moonbase<a href="https://moonrepo.dev/blog/2024-roadmap#moonbase" class="hash-link" aria-label="Direct link to moonbase" title="Direct link to moonbase">​</a></h3>
<p>During YC, we officially launched <a href="https://moonrepo.dev/moonbase">moonbase</a>, our cloud service that offers remote caching
to all moon users (and also includes a free tier). Over the next few months, we continued to improve
the service, by adding basic insights into CI runs (powered by <a href="https://moonrepo.dev/docs/commands/ci"><code>moon ci</code></a>), and
overall stability.</p>
<p>However, we unfortunately made the decision to pause development of new features for moonbase, as we
were unsure of the value that they would provide to end-users compared to the cost it would take to
build &amp; maintain. Some such features include code and project ownership, project registry, and
repository health scores. We may revisit this in the future.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="proto">proto<a href="https://moonrepo.dev/blog/2024-roadmap#proto" class="hash-link" aria-label="Direct link to proto" title="Direct link to proto">​</a></h3>
<p>As for <a href="https://moonrepo.dev/proto">proto</a>, it's been an exciting year. For context, proto's implementation was
originally built into moon directly, and powered
<a href="https://moonrepo.dev/docs/concepts/toolchain">moon's integrated toolchain</a>. We strongly felt this functionality can be
useful as a stand-alone tool, as tool installation and developer environment setup is still a major
pain point for developers.</p>
<p>So we decided to extract it out into its own tool, and thus proto was born. Since then, we've
released 27 minor versions with:</p>
<ul>
<li>Additional language support: Go, Python</li>
<li>Binary symlinking</li>
<li>Canary &amp; nightly releases</li>
<li>Detection improvements</li>
<li>Directory-level configuration</li>
<li>Deeper shell integration</li>
<li>Global packages support</li>
<li>Native shim executables</li>
<li>Runtime version detection</li>
<li>WASM and TOML based plugins</li>
<li>... and more to come!</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="launching-moon-v2">Launching moon v2<a href="https://moonrepo.dev/blog/2024-roadmap#launching-moon-v2" class="hash-link" aria-label="Direct link to Launching moon v2" title="Direct link to Launching moon v2">​</a></h2>
<p>It's been almost a year since we launched v1, and we believe we're ready to start planning out and
working on v2. Our goal for major releases is to introduce breaking changes in the most seamless way
possible, and to do so, we plan to incrementally land internal changes in v1 in preparation for v2,
provide codemods for migrating configuration, and of course, provide an in-depth migration guide.</p>
<p>In order of importance, we plan to land the following changes. This list does not include features
that will <a href="https://moonrepo.dev/blog/2024-roadmap#post-launch-features">land after v2</a>.</p>
<ul>
<li>Move to a <a href="https://moonrepo.dev/blog/2024-roadmap#plugin-based-architecture">plugin based architecture</a></li>
<li>Rename and standardize some configuration settings</li>
<li>Removed deprecated features</li>
</ul>
<p>It's a short list but also a ton of work. We have no ETA on when this will land exactly.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="plugin-based-architecture">Plugin based architecture<a href="https://moonrepo.dev/blog/2024-roadmap#plugin-based-architecture" class="hash-link" aria-label="Direct link to Plugin based architecture" title="Direct link to Plugin based architecture">​</a></h3>
<p>The biggest change and primary focus for v2 is to move to a WASM plugin based architecture (for
language integration). Based on our work with <a href="https://moonrepo.dev/docs/proto/plugins">proto's plugins</a>, we have a very
good idea of how we would model this for moon, and a new love for WASM based plugins (powered by
<a href="https://extism.org/" target="_blank" rel="noopener noreferrer">Extism</a>).</p>
<p>One of the leading factors for this decision, is that building everything into Rust directly is not
scalable, is a maintenance headache, and is also extremely difficult. It results in a lot of
duplicated code, increased compilation times, and a lot of complexity. By moving to plugins, we can
ditch most of this, and in the grand scheme of things, plugin integration is simply function calls.</p>
<p>Of course there are a handful of additional benefits that come from plugins:</p>
<ul>
<li>Enables the community to build and share their own plugins (additional languages).</li>
<li>Plugins can be individually updated, versioned, and released. Less moon patches.</li>
<li>Reduces moon's compilation times, as plugins live in their own repositories.</li>
<li>Easier to contribute to, as moon's codebase is quite complex.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="post-launch-features">Post-launch features<a href="https://moonrepo.dev/blog/2024-roadmap#post-launch-features" class="hash-link" aria-label="Direct link to Post-launch features" title="Direct link to Post-launch features">​</a></h3>
<p>Curious what kind of features we have planned for after v2? Of course you are! This isn't an
exhaustive or detailed list, but is top of mind:</p>
<ul>
<li>Additional languages support (will be much easier with a plugin system)</li>
<li>Release workflows (versioning, publishing, changelogs, etc)</li>
<li>System dependencies within the toolchain</li>
<li>Language dependency management tools</li>
<li>Repository and project health scores</li>
<li>Improved action graph and pipeline</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="launching-proto-v1">Launching proto v1<a href="https://moonrepo.dev/blog/2024-roadmap#launching-proto-v1" class="hash-link" aria-label="Direct link to Launching proto v1" title="Direct link to Launching proto v1">​</a></h2>
<p>We're extremely close to a v1 release, most definitely in Q1. For the most part, we believe we're
passed the point of introducing breaking changes, and so the remainder of the time will be spent on
polish, improvements, and documentation. There are a few big features we want to land relatively
soon though (but maybe after v1), and they are:</p>
<ul>
<li>Build from source for languages (this is quite complicated)</li>
<li>Build/extension variants for languages (PyPy for Python, PHP extensions, etc)</li>
<li>Directory and tool level environment variables (think <a href="https://direnv.net/" target="_blank" rel="noopener noreferrer">direnv</a> kind of
functionality)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="expanding-language-support">Expanding language support<a href="https://moonrepo.dev/blog/2024-roadmap#expanding-language-support" class="hash-link" aria-label="Direct link to Expanding language support" title="Direct link to Expanding language support">​</a></h3>
<p>While not part of v1, we definitely want to support more official languages in proto. We've been
pushing back on new languages until after v1 and the plugin APIs have stabilized, but since that's
relatively close to being done, expect more in the future! Our top of mind languages at the moment
are: Ruby (and Crystal), PHP, and Java.</p>
<p>Don't forget that the community can also build and share their own plugins! For example, the
<a href="https://github.com/konomae/zig-plugin" target="_blank" rel="noopener noreferrer">Zig programming language</a> already exists, and is provided by
<a href="https://github.com/konomae" target="_blank" rel="noopener noreferrer">konomae</a>! Thanks for the amazing work.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="self-hosting-moonbase">Self-hosting moonbase<a href="https://moonrepo.dev/blog/2024-roadmap#self-hosting-moonbase" class="hash-link" aria-label="Direct link to Self-hosting moonbase" title="Direct link to Self-hosting moonbase">​</a></h2>
<p>And last but not least, let's talk about moonbase. Although we've paused development on new
features, we consistently get requests for self-hosting moonbase (primarily for remote caching), as
companies don't want to store their proprietary builds, even though they are compiled and minified,
in a cloud storage provider that they do not own.</p>
<p>We definitely understand this concern, and that's why we've been working on a self-hosted version of
moonbase (also known as on-premises). We've never done this before, so it's been quite a learning
lesson, especially since we have many facets to take into account: database access, cloud
credentials, error handling, auth, so on and so forth.</p>
<p>We'd say we're about 50% done with this effort, and we aim to have it ready by the end of Q1. With
that said, the self-hosted version of moonbase will <em>not</em> be free, and will use a license based
model. We're still working out the details, but we'll have more information soon.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="looking-for-contributors">Looking for contributors<a href="https://moonrepo.dev/blog/2024-roadmap#looking-for-contributors" class="hash-link" aria-label="Direct link to Looking for contributors" title="Direct link to Looking for contributors">​</a></h2>
<p>Thanks for reading this far, but we do have one last thing to talk about. The moonrepo ecosystem and
all its products are quite large, with a lot of complexity. However, we're a small team, with most
of the public-facing work being done by me (Miles), but there's only so much we can do in a given
timeframe. With that said, we're looking for open source contributors that would like to help us
out! We have a long list of features and enhancements that need to be done, and even some secret
projects that would be very cool to work on. If you're interested, please reach out to us on
Discord!</p>]]></content:encoded>
            <category>roadmap</category>
            <category>moonbase</category>
            <category>proto</category>
            <category>toolchain</category>
        </item>
        <item>
            <title><![CDATA[proto v0.27 - PowerShell profiles, shim regeneration, and more]]></title>
            <link>https://moonrepo.dev/blog/proto-v0.27</link>
            <guid>https://moonrepo.dev/blog/proto-v0.27</guid>
            <pubDate>Thu, 04 Jan 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[This is a small release that improves the overall developer experience.]]></description>
            <content:encoded><![CDATA[<p>This is a small release that improves the overall developer experience.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="powershell-profile-support">PowerShell profile support<a href="https://moonrepo.dev/blog/proto-v0.27#powershell-profile-support" class="hash-link" aria-label="Direct link to PowerShell profile support" title="Direct link to PowerShell profile support">​</a></h2>
<p>When proto was first launched, we didn't support PowerShell profiles, but did support Windows by
running <code>setx</code> commands to inject the <code>PROTO_HOME</code> environment variable, and update <code>PATH</code>. While
this worked, it was not ideal, and unexpected for users. This is our fault and our lack of Windows
knowledge.</p>
<p>Starting with v0.27, we now official support PowerShell profiles, and will no longer call <code>setx</code>.
Instead we write the environment variable changes to one of these files, depending on what exists:</p>
<ul>
<li>Windows<!-- -->
<ul>
<li><code>~\Documents\PowerShell\Microsoft.PowerShell_profile.ps1</code></li>
<li><code>~\Documents\PowerShell\Profile.ps1</code></li>
</ul>
</li>
<li>Unix<!-- -->
<ul>
<li><code>~/.config/powershell/Microsoft.PowerShell_profile.ps1</code></li>
<li><code>~/.config/powershell/profile.ps1</code></li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="regenerate-shims--bins">Regenerate shims &amp; bins<a href="https://moonrepo.dev/blog/proto-v0.27#regenerate-shims--bins" class="hash-link" aria-label="Direct link to Regenerate shims &amp; bins" title="Direct link to Regenerate shims &amp; bins">​</a></h2>
<p>proto has gone through some growing pains, we won't deny that. With the handful of breaking changes,
the configuration refactor, and the ground-up rework of how shims/bins are handled, we've hit a few
snags. Most of those snags have been around tool execution.</p>
<p>To remedy some of these problems, we're introducing the <a href="https://moonrepo.dev/docs/proto/commands/regen"><code>proto regen</code></a>
command. This command will clean the shims (<code>~/.proto/shims</code>) and optionally bins (<code>~/.proto/bins</code>)
directory, regenerate shims, and relink bins based on globally pinned versions.</p>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ proto regen</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token comment" style="color:#97a1af;font-style:italic"># Include bins</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ proto regen </span><span class="token parameter variable" style="color:#fef9c3">--bin</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This is extremely useful in resetting to a clean state.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="better-version-parsing-for-toml-plugins">Better version parsing for TOML plugins<a href="https://moonrepo.dev/blog/proto-v0.27#better-version-parsing-for-toml-plugins" class="hash-link" aria-label="Direct link to Better version parsing for TOML plugins" title="Direct link to Better version parsing for TOML plugins">​</a></h2>
<p>When our <a href="https://moonrepo.dev/docs/proto/toml-plugin">TOML plugin</a> receives a version, we attempt to parse it into a
valid semantic version. However, not all tools follow semver, as they may release without patch or
minor versions, or use a different pre/build pattern.</p>
<p>To remedy this, we've updated our regex to be more flexible, and to utilize named capture groups.
With named groups, we can now piece the version together, fill in missing values, and then parse it.</p>
<p>We've also renamed the field to <code>version-pattern</code> from <code>git-tag-pattern</code>, as the regex is now also
used for manifest parsing. The old name is still supported for the time being.</p>
<div class="language-toml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-toml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token comment" style="color:#97a1af;font-style:italic"># Before</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token table class-name" style="color:#ff94ff;font-weight:bold">resolve</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key property" style="color:#b7a9f9">git-tag-pattern</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">=</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"^@protostar/cli@((\\d+)\\.(\\d+)\\.(\\d+))"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token comment" style="color:#97a1af;font-style:italic"># After</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token table class-name" style="color:#ff94ff;font-weight:bold">resolve</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key property" style="color:#b7a9f9">version-pattern</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">=</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"^@protostar/cli@((?&lt;major&gt;\\d+)\\.(?&lt;minor&gt;\\d+)\\.(?&lt;patch&gt;\\d+))"</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>Jump to the <a href="https://moonrepo.dev/docs/proto/toml-plugin#version-patterns">official documentation</a> for more
information!</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="https://moonrepo.dev/blog/proto-v0.27#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2>
<p>View the <a href="https://github.com/moonrepo/proto/releases/tag/v0.27.0" target="_blank" rel="noopener noreferrer">official release</a> for a full list
of changes.</p>]]></content:encoded>
            <category>proto</category>
            <category>shim</category>
            <category>bin</category>
            <category>shell</category>
            <category>profile</category>
            <category>windows</category>
        </item>
        <item>
            <title><![CDATA[moon v1.19 - Improvements to task dependencies, codegen, and more]]></title>
            <link>https://moonrepo.dev/blog/moon-v1.19</link>
            <guid>https://moonrepo.dev/blog/moon-v1.19</guid>
            <pubDate>Mon, 01 Jan 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[In this release, we're introducing some long-awaited and requested improvements.]]></description>
            <content:encoded><![CDATA[<p>In this release, we're introducing some long-awaited and requested improvements.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="configure-args-and-env-vars-for-task-dependencies">Configure args and env vars for task dependencies<a href="https://moonrepo.dev/blog/moon-v1.19#configure-args-and-env-vars-for-task-dependencies" class="hash-link" aria-label="Direct link to Configure args and env vars for task dependencies" title="Direct link to Configure args and env vars for task dependencies">​</a></h2>
<p>This has been a long standing request from the community, and we're happy to finally deliver it.
Starting with v1.19, you can now configure optional command line arguments and environment variables
for each task <a href="https://moonrepo.dev/docs/config/project#deps"><code>deps</code></a> entry. These values will be passed to the task
when it is executed.</p>
<p>Here's an example of what both patterns look like. The <code>target</code> field is required when configuring
an object, and both the <code>args</code> and <code>env</code> fields can be mixed and matched.</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">moon.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">build</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'vite build'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">deps</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token comment" style="color:#97a1af;font-style:italic"># Just a target</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'^:build'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token comment" style="color:#97a1af;font-style:italic"># With args (string)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token key atrule">target</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'^:build'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">        </span><span class="token key atrule">args</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'--mode production'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token comment" style="color:#97a1af;font-style:italic"># With env vars</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token key atrule">target</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'^:build'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">        </span><span class="token key atrule">env</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">          </span><span class="token key atrule">NODE_ENV</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'production'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token comment" style="color:#97a1af;font-style:italic"># With args (array) and env vars</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token key atrule">target</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'^:build'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">        </span><span class="token key atrule">args</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">          </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'--mode'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">          </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'production'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">        </span><span class="token key atrule">env</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">          </span><span class="token key atrule">NODE_ENV</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'production'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>When using this functionality, there are a few things to understand about its implementation, and
how it affects the rest of the pipeline:</p>
<ul>
<li>When extending or inheriting a task and a merger is required, and this task has a dependency with
a colliding target, the <code>args</code> and <code>env</code> fields will <em>NOT</em> be deeply merged. Whichever task is
inherited last will have its <code>deps</code> used.</li>
<li>When multiple dependencies of the same target are ran in the action pipeline, but with differing
args or env vars, only 1 will run at a time. We try to avoid running them in parallel to avoid
collisions and corrupting outputs.</li>
<li>Arguments and environment variables do <em>NOT</em> support tokens.</li>
<li>If dependencies all write to the same output, cleaning the output is your responsibility, not
moon's.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="codegen-improvements">Codegen improvements<a href="https://moonrepo.dev/blog/moon-v1.19#codegen-improvements" class="hash-link" aria-label="Direct link to Codegen improvements" title="Direct link to Codegen improvements">​</a></h2>
<p>Code generation is one of moon's oldest features, and hasn't been improved in quite a while. We felt
the time was right to give it a little love.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="extend-other-templates">Extend other templates<a href="https://moonrepo.dev/blog/moon-v1.19#extend-other-templates" class="hash-link" aria-label="Direct link to Extend other templates" title="Direct link to Extend other templates">​</a></h3>
<p>This has been a <a href="https://github.com/moonrepo/moon/issues/434" target="_blank" rel="noopener noreferrer">request for over a year</a>, and we
finally found the time to put it on the roadmap. Starting with this release, you can now extend
other templates using the <a href="https://moonrepo.dev/docs/config/template#extends"><code>extends</code></a> setting in
<a href="https://moonrepo.dev/docs/config/template"><code>template.yml</code></a>, which supports a list of template names.</p>
<p>Templates will be recursively extended from top to bottom, and all files and variables will be
inherited and merged at the top-level.</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">template.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">title</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'npm package'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key atrule">extends</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token string" style="color:#c9e166">'node-common'</span><span class="token punctuation" style="color:#cad4e2">]</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="configure-a-default-destination">Configure a default destination<a href="https://moonrepo.dev/blog/moon-v1.19#configure-a-default-destination" class="hash-link" aria-label="Direct link to Configure a default destination" title="Direct link to Configure a default destination">​</a></h3>
<p>When you call <a href="https://moonrepo.dev/docs/commands/generate"><code>moon generate</code></a> you must provide a destination directory
for the generated files, or we'll prompt you to provide one. But what if you wanted to standardize
the destination? For example, a package scaffolding template should go to <code>packages/</code>. This is now
possible with the optional <a href="https://moonrepo.dev/docs/config/template#destination"><code>destination</code></a> setting in
<a href="https://moonrepo.dev/docs/config/template"><code>template.yml</code></a>.</p>
<p>If no destination is provided to <code>moon generate</code>, we'll use this default destination.</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">template.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">title</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'npm package'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key atrule">destination</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'packages/[name | kebab_case]'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key atrule">variables</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">type</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'string'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">default</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">''</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">required</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#94dded">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">prompt</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'Package name?'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_WCGJ alert alert--info"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_pbrs"><p>For better interoperability, this setting can also reference variables using <code>[var]</code> syntax, and can
also use Tera filters. Learn more about this in the
<a href="https://moonrepo.dev/docs/guides/codegen#interpolation">code generation documentation</a>.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="resolved-long-standing-experiments">Resolved long-standing experiments<a href="https://moonrepo.dev/blog/moon-v1.19#resolved-long-standing-experiments" class="hash-link" aria-label="Direct link to Resolved long-standing experiments" title="Direct link to Resolved long-standing experiments">​</a></h2>
<p>moon has a concept of <a href="https://moonrepo.dev/docs/config/workspace#experiments">experiments</a>, where certain features are
gated behind a flag. This allows us to support new and old functionality in parallel, and also allow
users to gradually upgrade when encountering a breaking change. For many months now, we've had 2
experiments running, and have decided on a path forward.</p>
<p>The first is <code>experiments.interweavedTaskInheritance</code>, which would inherit global and local tasks in
order, interweaved within each other. The old implementation would inherit global first, then local
second, distinctly grouping them. Since this experiment was introduced, we have not received a
single bug report or issue. This is a good sign that the new behavior is working as expected, and as
such, have decided <em>to move forward</em> with this experiment and make it the new implementation. The
old implementation has been removed entirely.</p>
<p>The second is <code>experiments.taskOutputBoundaries</code>, which was rather controversial when introduced.
This experiment would trigger an error anytime a <a href="https://moonrepo.dev/docs/config/project#outputs">task's <code>outputs</code></a> overlapped within
another <a href="https://moonrepo.dev/docs/config/project#outputs">task's <code>outputs</code></a>. The reason for this change, is that multiple tasks writing to
the same output location could "corrupt" the expected state, and trigger unexpected results when
hydrating from the cache. However in practice, this restriction has caused more headache and
introduced a steeper learning curve then expected. It also caused problems with
<a href="https://moonrepo.dev/docs/config/project#extends">tasks that extend</a> from another, resulting in the same outputs being
used. Because of this, we've decided <em>to <strong>not</strong> move forward</em> with this experiment, and allow
whatever task outputs you wish (we trust you're smart enough to not shoot yourself in the foot).</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="https://moonrepo.dev/blog/moon-v1.19#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2>
<p>View the <a href="https://github.com/moonrepo/moon/releases/tag/v1.19.0" target="_blank" rel="noopener noreferrer">official release</a> for a full list
of changes.</p>
<ul>
<li>Updated proto to v0.26 (from v0.25), which includes a new shims implementation.</li>
<li>Updated VS Code extension to support multiple VS Code workspace folders.</li>
</ul>]]></content:encoded>
            <category>task</category>
            <category>deps</category>
            <category>args</category>
            <category>env</category>
            <category>codegen</category>
            <category>templates</category>
            <category>experiments</category>
        </item>
        <item>
            <title><![CDATA[proto v0.26 - New native shim implementation]]></title>
            <link>https://moonrepo.dev/blog/proto-v0.26</link>
            <guid>https://moonrepo.dev/blog/proto-v0.26</guid>
            <pubDate>Thu, 21 Dec 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[After many release candidates, and a ton of testing, proto v0.26 is finally here!]]></description>
            <content:encoded><![CDATA[<p>After many release candidates, and a ton of testing, proto v0.26 is finally here!</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="rethinking-shims">Rethinking shims<a href="https://moonrepo.dev/blog/proto-v0.26#rethinking-shims" class="hash-link" aria-label="Direct link to Rethinking shims" title="Direct link to Rethinking shims">​</a></h2>
<p>proto at its core is a version manager, which means like most version managers, it relies on a
concept known as shims. Shims are lightweight executable scripts that act like a proxy to the
underlying binary, and are useful for proto to intercept executions and inject custom functionality,
like our dynamic version detection.</p>
<p>On Unix machines, we relied on Bash scripts for shims, which worked rather well. However, on
Windows, we relied on PowerShell scripts (<code>.ps1</code>), batch/cmd scripts (<code>.cmd</code>), and Bash scripts, all
with differing levels of functionality, and each serving a separate purpose. Windows support <em>did
not</em> work well.</p>
<p>To avoid current and future compatibility issues, we needed a truly native solution, and that's
exactly what we did. In this release, we wrote our own Rust based executable, that will replace all
of the custom shim scripts. This new executable is named <code>proto-shim</code> (<code>proto-shim.exe</code> on Windows)
and is published alongside the <code>proto</code> binary.</p>
<p>This new executable solves all of the following problems (hopfully):</p>
<ul>
<li>Locatable on <code>PATH</code> (is an <code>.exe</code> for Windows)</li>
<li>Can pipe/redirect data</li>
<li>Handles stdin prompts/interactivity</li>
<li>Supports ctrl+c interruptions</li>
<li>Passes parent signals to child processes (uses <code>execvp</code> on Unix)</li>
<li>Attempts to kill child processes on parent exit</li>
<li>Bubbles exit codes</li>
<li>Native performance</li>
<li>Doesn't require special privileges (no symlinks)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="upgrade-troubleshooting">Upgrade troubleshooting<a href="https://moonrepo.dev/blog/proto-v0.26#upgrade-troubleshooting" class="hash-link" aria-label="Direct link to Upgrade troubleshooting" title="Direct link to Upgrade troubleshooting">​</a></h2>
<p>Because this release adds a new executable (<code>proto-shim</code>), you'll most likely run into issues when
upgrading via <code>proto upgrade</code>. The root issue is that the upgrade process was only aware of the
single <code>proto</code> file, and not the new <code>proto-shim</code> file, so it will not copy the shim into the
correct location, and subsequent proto commands will fail.</p>
<p>We could backport this change to v0.25, but it would require all users to upgrade to that patch
version first before upgrading to v0.26. But this still wouldn't solve the issue for users upgrading
from v0.24, or an even earlier version.</p>
<p>The best way to remedy this situation is to simply
<a href="https://moonrepo.dev/docs/proto/install">re-install proto as a whole</a>. Once you're on v0.26, this will be a non-issue.</p>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token comment" style="color:#97a1af;font-style:italic"># Unix</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token function" style="color:#ff94ff;font-weight:bold">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:#fef9c3">-fsSL</span><span class="token plain"> https://moonrepo.dev/install/proto.sh </span><span class="token operator" style="color:#b7a9f9">|</span><span class="token plain"> </span><span class="token function" style="color:#ff94ff;font-weight:bold">bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token comment" style="color:#97a1af;font-style:italic"># Windows</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">irm https://moonrepo.dev/install/proto.ps1 </span><span class="token operator" style="color:#b7a9f9">|</span><span class="token plain"> iex</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="https://moonrepo.dev/blog/proto-v0.26#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2>
<p>View the <a href="https://github.com/moonrepo/proto/releases/tag/v0.26.0" target="_blank" rel="noopener noreferrer">official release</a> for a full list
of changes.</p>
<ul>
<li>Added basic telemetry to track tool install/uninstall metrics.</li>
<li>Fixed an issue where binaries were being symlinked with broken versions in their file name (most
commonly for Python).</li>
</ul>]]></content:encoded>
            <category>proto</category>
            <category>shim</category>
        </item>
        <item>
            <title><![CDATA[proto v0.26 (rc) - Release candidate available for testing!]]></title>
            <link>https://moonrepo.dev/blog/proto-v0.26-rc</link>
            <guid>https://moonrepo.dev/blog/proto-v0.26-rc</guid>
            <pubDate>Tue, 19 Dec 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[We've got a very special release candidate that we'd love to stress test before an official release!]]></description>
            <content:encoded><![CDATA[<p>We've got a very special release candidate that we'd love to stress test before an official release!</p>
<p>proto at its core is a version manager, which means like most version managers, it relies on a
concept known as shims. Shims are lightweight executable scripts that act like a proxy to the
underlying binary, and are useful for proto to intercept executions and inject custom functionality,
like our dynamic version detection.</p>
<p>On Unix machines, we relied on Bash scripts for shims, which worked rather well. However, on
Windows, we relied on PowerShell scripts (<code>.ps1</code>), batch/cmd scripts (<code>.cmd</code>), and Bash scripts, all
with differing levels of functionality, and each serving a separate purpose. Windows support <em>did
not</em> work well.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="what-didnt-work">What didn't work?<a href="https://moonrepo.dev/blog/proto-v0.26-rc#what-didnt-work" class="hash-link" aria-label="Direct link to What didn't work?" title="Direct link to What didn't work?">​</a></h2>
<p>When using shims, you must ensure that all the following scenarios work well: piping data/commands,
redirection, stdin prompts, interactivity, signal handling, exit code bubbling, so on and so forth.
Bash solves a lot of this for us, but Windows does not have a native Bash shell, and thus we had to
rely on other scripting languages. The <code>.cmd</code> files barely supported any of this, and the <code>.ps1</code>
files were a bit better, but still not great.</p>
<p>For the most part, executing a shim as-is and doing basic work was fine, but once you needed a
complex scenario (like above), it broke down pretty quickly. It was also further exacerbated when
dealing with nested shim exections, for example, <code>npm</code> calls <code>node</code> under the hood. The parent shim
may be executed with <code>.ps1</code> but the child may be <code>.cmd</code>, and these do not play well together.</p>
<p>The other problem on Windows is that scripts are not true executables, and are not easily located on
<code>PATH</code> (excluding <code>.cmd</code> files).</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="whats-new">What's new?<a href="https://moonrepo.dev/blog/proto-v0.26-rc#whats-new" class="hash-link" aria-label="Direct link to What's new?" title="Direct link to What's new?">​</a></h2>
<p>To combat all of these problems, we needed a truly native solution, and that's exactly what we did.
We wrote our own Rust based executable, that will replace all of the custom shim scripts, and can
properly handle all of the required scenarios. This new executable is named <code>proto-shim</code>
(<code>proto-shim.exe</code> on Windows) and is published alongside the <code>proto</code> binary.</p>
<p>This new executable solves all of the following problems (hopfully):</p>
<ul>
<li>Locatable on <code>PATH</code> (is an <code>.exe</code> for Windows)</li>
<li>Can pipe/redirect data</li>
<li>Handles stdin prompts/interactivity</li>
<li>Supports ctrl+c interruptions</li>
<li>Passes parent signals to child processes</li>
<li>Attempts to kill child processes on parent exit</li>
<li>Bubbles exit codes</li>
<li>Native performance</li>
<li>Doesn't require special privileges (no symlinks)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="how-to-test">How to test?<a href="https://moonrepo.dev/blog/proto-v0.26-rc#how-to-test" class="hash-link" aria-label="Direct link to How to test?" title="Direct link to How to test?">​</a></h2>
<p>If you're interested in testing this new implementation (we'd appreciate it), you can do so by
downloading the latest release candidate from GitHub: <a href="https://github.com/moonrepo/proto/releases" target="_blank" rel="noopener noreferrer">https://github.com/moonrepo/proto/releases</a></p>
<p>Once downloaded, unpack the archive, and move the <code>proto</code> and <code>proto-shim</code> binaries to the
<code>~/.proto/bin</code> directory (or the location of your <code>PROTO_INSTALL_DIR</code> environment variable). From
here, you can execute <code>proto</code> or your tool binaries as normal.</p>
<div class="theme-admonition theme-admonition-warning admonition_WCGJ alert alert--warning"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_pbrs"><p>If you run into issues, try deleting the old <code>~/.proto/shims</code> directory and trying again. If
problems still persist, please report an issue or reach out to us on Discord!</p></div></div>
<div class="theme-admonition theme-admonition-info admonition_WCGJ alert alert--info"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_pbrs"><p>On macOS, you may need to add the binary to the trusted list, in your Priacy &amp; Security settings.
This can also be achieved on the command line with <code>xattr -c ~/.proto/bin/*</code>.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="what-to-test">What to test?<a href="https://moonrepo.dev/blog/proto-v0.26-rc#what-to-test" class="hash-link" aria-label="Direct link to What to test?" title="Direct link to What to test?">​</a></h2>
<p>Basically everything. We want to ensure that all of the functionality in <a href="https://moonrepo.dev/blog/proto-v0.26-rc#whats-new">What's new?</a>
works as expected, so simply go about your day to day development and let us know if you run into
any issues!</p>]]></content:encoded>
            <category>proto</category>
            <category>shim</category>
        </item>
        <item>
            <title><![CDATA[moon v1.18 - New task execution flow and custom project names]]></title>
            <link>https://moonrepo.dev/blog/moon-v1.18</link>
            <guid>https://moonrepo.dev/blog/moon-v1.18</guid>
            <pubDate>Tue, 12 Dec 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[With this release, we've focused heavily on 2 important aspects: task execution, and our onboarding]]></description>
            <content:encoded><![CDATA[<p>With this release, we've focused heavily on 2 important aspects: task execution, and our onboarding
flow.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="new-path-based-task-execution">New path based task execution<a href="https://moonrepo.dev/blog/moon-v1.18#new-path-based-task-execution" class="hash-link" aria-label="Direct link to New path based task execution" title="Direct link to New path based task execution">​</a></h2>
<p>Since moon's inception, before we would execute a task's command, we would locate its executable on
the file system and execute it directly. We went with this approach as we wanted to avoid all of the
baggage and "unknown behavior" that came with executing through a shell, and to ensure a more
deterministic outcome. This approach worked very well for stand-alone binaries, like <code>node</code>,
<code>cargo</code>, and built-in commands like <code>rm</code>, <code>mkdir</code>, and <code>git</code>.</p>
<p>However, it was very problematic in 2 scenarios: executables from language dependencies (Node.js
modules, etc), and multi-command based tasks (using <code>&amp;&amp;</code>). To remedy this situation, we're no longer
locating the executables ourselves, and instead are prepending <code>PATH</code> with the locations in which we
know these executables should exist. We're also loosening the restriction on the
<a href="https://moonrepo.dev/docs/config/project#shell"><code>shell</code> task option</a>, which can now be enabled for <em>all</em> tasks, not
just system tasks.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="dependency-executables">Dependency executables<a href="https://moonrepo.dev/blog/moon-v1.18#dependency-executables" class="hash-link" aria-label="Direct link to Dependency executables" title="Direct link to Dependency executables">​</a></h3>
<p>For the 1st scenario, let's talk about Node.js modules. When we encountered an unknown task command,
like <code>eslint</code> or <code>prettier</code>, we'd attempt to locate its executable by traversing <code>node_modules/.bin</code>
directories, parsing Bash/PowerShell scripts, resolving the source <code>.js</code> files, and finally
executing with <code>node</code>. To demonstrate this, say you had the following task:</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">moon.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">format</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'prettier --write .'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>When finally executed, internally it would become something like this command:</p>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token plain">~/.proto/tools/node/</span><span class="token operator" style="color:#b7a9f9">&lt;</span><span class="token plain">version</span><span class="token operator" style="color:#b7a9f9">&gt;</span><span class="token plain">/bin/node </span><span class="token punctuation" style="color:#cad4e2">..</span><span class="token plain">/</span><span class="token punctuation" style="color:#cad4e2">..</span><span class="token plain">/node_modules/prettier/internal/cli.mjs </span><span class="token parameter variable" style="color:#fef9c3">--write</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#ff94ff;font-weight:bold">.</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This was required since our runtime is Rust and we don't have access to Node.js's module resolution
algorithm... but this approach was very brittle and error prone. It took us many releases to iron
out all the bugs, and we're pretty sure there are still edge cases unaccounted for. So instead, as
mentioned above, we now prepend <code>PATH</code>, resulting in the following command:</p>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token assign-left variable environment constant" style="color:#ff94ff;font-weight:bold">PATH</span><span class="token operator" style="color:#b7a9f9">=</span><span class="token string" style="color:#c9e166">"/path/to/node_modules/.bin:/path/to/proto/tools:</span><span class="token string environment constant" style="color:#ff94ff;font-weight:bold">$PATH</span><span class="token string" style="color:#c9e166">"</span><span class="token plain"> prettier </span><span class="token parameter variable" style="color:#fef9c3">--write</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#ff94ff;font-weight:bold">.</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This is a much cleaner approach and is far easier to understand as a user.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="multi-command-tasks">Multi-command tasks<a href="https://moonrepo.dev/blog/moon-v1.18#multi-command-tasks" class="hash-link" aria-label="Direct link to Multi-command tasks" title="Direct link to Multi-command tasks">​</a></h3>
<p>While not officially supported in moon, it's been possible to run multiple commands in a single task
using <code>&amp;&amp;</code> syntax. However, this approach did not work correctly with our integrated toolchain, as
only the 1st command in the list would have its binary be located and executed correctly.</p>
<p>For example, say we wanted to run 2 npm packages, the following would <em>not</em> work:</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">moon.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">build</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'rm -rf dist &amp;&amp; vite build &amp;&amp; tsc --build'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>With this new <code>PATH</code> based approach, this will now work correctly. And furthermore, this also
enables executables within Bash and PowerShell scripts to be located and executed correctly as well.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="whats-next">What's next?<a href="https://moonrepo.dev/blog/moon-v1.18#whats-next" class="hash-link" aria-label="Direct link to What's next?" title="Direct link to What's next?">​</a></h3>
<p>In the future, we'll continue to expand on this functionality, and our ultimate goal is to remove
the concept of <code>platform</code> from tasks, which has been a bit confusing for new users.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="customize-the-project-name-in-moonyml">Customize the project name in <code>moon.yml</code><a href="https://moonrepo.dev/blog/moon-v1.18#customize-the-project-name-in-moonyml" class="hash-link" aria-label="Direct link to customize-the-project-name-in-moonyml" title="Direct link to customize-the-project-name-in-moonyml">​</a></h2>
<p>This has been a long requested feature, but thanks to the project graph rework and improvements over
the last few releases, this is now possible. In <a href="https://moonrepo.dev/docs/config/project"><code>moon.yml</code></a>, you can now
configure the <a href="https://moonrepo.dev/docs/config/project#id"><code>id</code></a> setting to override the project name (identifier)
derived from <a href="https://moonrepo.dev/docs/config/workspace#projects"><code>projects</code></a> in
<a href="https://moonrepo.dev/docs/config/workspace"><code>.moon/workspace.yml</code></a> (most applicable to glob based project locations).</p>
<p>For example, say we have the following <code>projects</code> glob.</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/workspace.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">projects</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'apps/*'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'packages/*'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>By default, the project folder name becomes the project name. For the most part this is fine, but
what if you have a very large monorepo? Or have conflicting project names? Or are migrating
projects? It becomes difficult to manage and organize. But now, simply configure <code>id</code>!</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">&lt;project&gt;/moon.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">id</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'custom-project-name'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_WCGJ alert alert--info"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_pbrs"><p>Be sure that all targets, project dependencies, task dependencies, and other references are using
the new identifier, otherwise an error will be triggered!</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="improved-onboarding-flow">Improved onboarding flow<a href="https://moonrepo.dev/blog/moon-v1.18#improved-onboarding-flow" class="hash-link" aria-label="Direct link to Improved onboarding flow" title="Direct link to Improved onboarding flow">​</a></h2>
<p>While this doesn't affect current users, we still want to announce that we've made some slight
changes to our onboarding process and the <a href="https://moonrepo.dev/docs/commands/init"><code>moon init</code></a> command. The previous
command prompted far too many questions, as we would attempt to detect what languages are currently
in use, and integrate them into the toolchain.</p>
<p>This was confusing for new users, so starting with this release, we've simplified the process to
only create the moon workspace within a repository.</p>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token plain">moon init</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>With that being said, you can still integrate tools into the toolchain, by passing the identifier of
a supported moon tool as an argument.</p>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token plain">moon init </span><span class="token function" style="color:#ff94ff;font-weight:bold">node</span><span class="token plain"> </span><span class="token comment" style="color:#97a1af;font-style:italic"># bun, rust, etc</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-success admonition_WCGJ alert alert--success"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>success</div><div class="admonitionContent_pbrs"><p>We've also rewritten a good portion of the "<a href="https://moonrepo.dev/docs/setup-workspace">Getting started</a>" documentation
to reflect these changes!</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="https://moonrepo.dev/blog/moon-v1.18#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2>
<p>View the <a href="https://github.com/moonrepo/moon/releases/tag/v1.18.0" target="_blank" rel="noopener noreferrer">official release</a> for a full list
of changes.</p>
<ul>
<li>Improved string allocation and performance for queries, task tokens, and process commands.</li>
<li>Improved remote caching flow and handling.</li>
<li>Updated proto to v0.25.</li>
</ul>]]></content:encoded>
            <category>toolchain</category>
            <category>shell</category>
            <category>id</category>
            <category>name</category>
            <category>project</category>
            <category>init</category>
            <category>onboarding</category>
        </item>
        <item>
            <title><![CDATA[proto v0.25 - Linux arm64 gnu and musl support]]></title>
            <link>https://moonrepo.dev/blog/proto-v0.25</link>
            <guid>https://moonrepo.dev/blog/proto-v0.25</guid>
            <pubDate>Mon, 11 Dec 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[This is a very small release that primarily adds support for Linux arm64 targets.]]></description>
            <content:encoded><![CDATA[<p>This is a very small release that primarily adds support for Linux arm64 targets.</p>
<p>Thanks to <a href="https://github.com/axodotdev/cargo-dist" target="_blank" rel="noopener noreferrer">cargo-dist</a>, we can now build and distribute
arm64 binaries with relative ease. When building the binary, libraries are statically linked to
ensure that the binary can run on any Linux distribution.</p>
<p>You can download the binary from the official
<a href="https://github.com/moonrepo/proto/releases/tag/v0.21.0" target="_blank" rel="noopener noreferrer">GitHub release</a> or by running the
<a href="https://moonrepo.dev/docs/proto/install#linux-macos-wsl">Bash installation script</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="https://moonrepo.dev/blog/proto-v0.25#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2>
<p>View the <a href="https://github.com/moonrepo/proto/releases/tag/v0.25.0" target="_blank" rel="noopener noreferrer">official release</a> for a full list
of changes.</p>
<ul>
<li>Added a <a href="https://moonrepo.dev/docs/proto/commands/debug/config"><code>proto debug config</code></a> command, to debug all loaded
configs and the final merged config.</li>
<li>Added a <code>PROTO_BYPASS_VERSION_CHECK</code> environment variable, to bypass loading and checking of
versions.</li>
</ul>]]></content:encoded>
            <category>proto</category>
            <category>linux</category>
            <category>musl</category>
            <category>gnu</category>
            <category>arm64</category>
        </item>
        <item>
            <title><![CDATA[proto v0.24 - Standardized configuration and 10x WASM boost]]></title>
            <link>https://moonrepo.dev/blog/proto-v0.24</link>
            <guid>https://moonrepo.dev/blog/proto-v0.24</guid>
            <pubDate>Thu, 07 Dec 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[In this release, we've standardized our configuration from the ground-up.]]></description>
            <content:encoded><![CDATA[<p>In this release, we've standardized our configuration from the ground-up.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="improved-wasm-performance-up-to-20x">Improved WASM performance up to 20x<a href="https://moonrepo.dev/blog/proto-v0.24#improved-wasm-performance-up-to-20x" class="hash-link" aria-label="Direct link to Improved WASM performance up to 20x" title="Direct link to Improved WASM performance up to 20x">​</a></h2>
<p>Before we dive into the major changes of this release, we want to highlight the performance
improvements that have landed recently. Thanks to <a href="https://dylibso.com/" target="_blank" rel="noopener noreferrer">Dylibso</a> and the
<a href="https://extism.org/" target="_blank" rel="noopener noreferrer">Extism</a> team, we've been able to improve the performance of our WASM plugins
by 10-20x! This was achieved by plugging into wasmtime's ahead-of-time (AOT) compiler and caching
layer.</p>
<p>Here's an example of the performance improvements when running <code>node --version</code>. On older versions,
the execution time was anywhere from 100ms-200ms, but is now down to 10-20ms! This is almost as fast
as native's 5-10ms!</p>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token comment" style="color:#97a1af;font-style:italic"># proto v0.23.5 and below</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">hyperfine </span><span class="token parameter variable" style="color:#fef9c3">--warmup</span><span class="token plain"> </span><span class="token number" style="color:#94dded">10</span><span class="token plain"> -- </span><span class="token string" style="color:#c9e166">'node --version'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">Benchmark </span><span class="token number" style="color:#94dded">1</span><span class="token plain">: </span><span class="token function" style="color:#ff94ff;font-weight:bold">node</span><span class="token plain"> </span><span class="token parameter variable" style="color:#fef9c3">--version</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  Time </span><span class="token punctuation" style="color:#cad4e2">(</span><span class="token plain">mean ± σ</span><span class="token punctuation" style="color:#cad4e2">)</span><span class="token plain">:      </span><span class="token number" style="color:#94dded">99.2</span><span class="token plain"> ms ±   </span><span class="token number" style="color:#94dded">6.3</span><span class="token plain"> ms    </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token plain">User: </span><span class="token number" style="color:#94dded">662.5</span><span class="token plain"> ms, System: </span><span class="token number" style="color:#94dded">79.4</span><span class="token plain"> ms</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  Range </span><span class="token punctuation" style="color:#cad4e2">(</span><span class="token plain">min … max</span><span class="token punctuation" style="color:#cad4e2">)</span><span class="token plain">:    </span><span class="token number" style="color:#94dded">91.3</span><span class="token plain"> ms … </span><span class="token number" style="color:#94dded">119.7</span><span class="token plain"> ms    </span><span class="token number" style="color:#94dded">29</span><span class="token plain"> runs</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token comment" style="color:#97a1af;font-style:italic"># proto v0.23.6 and above</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">hyperfine </span><span class="token parameter variable" style="color:#fef9c3">--warmup</span><span class="token plain"> </span><span class="token number" style="color:#94dded">10</span><span class="token plain"> -- </span><span class="token string" style="color:#c9e166">'node --version'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">Benchmark </span><span class="token number" style="color:#94dded">1</span><span class="token plain">: </span><span class="token function" style="color:#ff94ff;font-weight:bold">node</span><span class="token plain"> </span><span class="token parameter variable" style="color:#fef9c3">--version</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  Time </span><span class="token punctuation" style="color:#cad4e2">(</span><span class="token plain">mean ± σ</span><span class="token punctuation" style="color:#cad4e2">)</span><span class="token plain">:      </span><span class="token number" style="color:#94dded">18.5</span><span class="token plain"> ms ±   </span><span class="token number" style="color:#94dded">1.0</span><span class="token plain"> ms    </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token plain">User: </span><span class="token number" style="color:#94dded">7.9</span><span class="token plain"> ms, System: </span><span class="token number" style="color:#94dded">12.7</span><span class="token plain"> ms</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  Range </span><span class="token punctuation" style="color:#cad4e2">(</span><span class="token plain">min … max</span><span class="token punctuation" style="color:#cad4e2">)</span><span class="token plain">:    </span><span class="token number" style="color:#94dded">17.1</span><span class="token plain"> ms …  </span><span class="token number" style="color:#94dded">23.8</span><span class="token plain"> ms    </span><span class="token number" style="color:#94dded">146</span><span class="token plain"> runs</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-success admonition_WCGJ alert alert--success"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>success</div><div class="admonitionContent_pbrs"><p>Dylibso is hosting an <a href="https://dylibso.com/events/2023/hack-for-good/" target="_blank" rel="noopener noreferrer">Extism hackathon</a> through the
month of December, that'll donate to children in need. Check it out and participate!</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="standardized-configuration-breaking">Standardized configuration (breaking)<a href="https://moonrepo.dev/blog/proto-v0.24#standardized-configuration-breaking" class="hash-link" aria-label="Direct link to Standardized configuration (breaking)" title="Direct link to Standardized configuration (breaking)">​</a></h2>
<p>Up until now, proto has supported 2 types of configuration, <code>.prototools</code> and
<code>~/.proto/config.toml</code>. The former can exist in any folder, and is used for pinning versions and
defining plugins. The latter is a per-user file that is used for customizing how proto works and
also defining plugins.</p>
<p>Over time, functionality in both of these files has grown, and so has the overlap between them. We
felt it was time to standardize these files into a single configuration file, and as such, have
removed <code>~/.proto/config.toml</code> and merged its functionality into
<a href="https://moonrepo.dev/docs/proto/config"><code>.prototools</code></a>. The biggest changes are:</p>
<ul>
<li>proto settings (like <code>auto-clean</code> and <code>http</code>) must now exist within a
<a href="https://moonrepo.dev/docs/proto/config#settings"><code>[settings]</code> table</a>.</li>
<li>Tool specific settings (like <code>node-intercept-globals</code>) have moved to the new
<a href="https://moonrepo.dev/docs/proto/config#tools"><code>[tools.node]</code> table</a> (<a href="https://moonrepo.dev/blog/proto-v0.24#tool-level-settings">more info below</a>).</li>
<li>Plugins are still configured within a <a href="https://moonrepo.dev/docs/proto/config#plugins"><code>[plugins]</code> table</a>.</li>
<li>Global/default settings can be defined in <code>~/.proto/.prototools</code>.</li>
</ul>
<div class="language-toml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.prototools</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-toml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key property" style="color:#b7a9f9">node</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">=</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"20.0.0"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token table class-name" style="color:#ff94ff;font-weight:bold">settings</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key property" style="color:#b7a9f9">auto-clean</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">=</span><span class="token plain"> </span><span class="token boolean" style="color:#94dded">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token table class-name" style="color:#ff94ff;font-weight:bold">settings.http</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key property" style="color:#b7a9f9">allow-invalid-certs</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">=</span><span class="token plain"> </span><span class="token boolean" style="color:#94dded">true</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The other massive benefit of this change, is that settings <em>can now be defined anywhere</em>!
Previously, settings like <code>auto-clean</code> or <code>detect-strategy</code> could only be defined at the user-level,
but what if your company or team wanted to control this setting? It wasn't possible without asking
all team members to update their configuration manually. With this change, settings can now be tied
to projects or repositories!</p>
<div class="theme-admonition theme-admonition-info admonition_WCGJ alert alert--info"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_pbrs"><p>After upgrading, run <code>proto migrate v0.24</code> to migrate the old user configuration to the new format!</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="tool-level-settings">Tool-level settings<a href="https://moonrepo.dev/blog/proto-v0.24#tool-level-settings" class="hash-link" aria-label="Direct link to Tool-level settings" title="Direct link to Tool-level settings">​</a></h3>
<p>While working on these configuration changes, we also landed the
<a href="https://github.com/moonrepo/proto/issues/261" target="_blank" rel="noopener noreferrer">Tool-level configuration RFC</a>, although with a
different implementation. This enables users to define settings that will be passed to the WASM
plugin of a specific tool, controlling how it works. These settings can be configured with the new
<a href="https://moonrepo.dev/docs/proto/config#tools"><code>[tools.&lt;name&gt;]</code> table</a>.</p>
<p>For example, the <code>node</code> tool has a setting called <code>intercept-globals</code>, which will trigger an error
when npm/pnpm/yarn attempt to install a global package.</p>
<div class="language-toml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.prototools</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-toml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token punctuation" style="color:#cad4e2">[</span><span class="token table class-name" style="color:#ff94ff;font-weight:bold">tools.go</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key property" style="color:#b7a9f9">gobin</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">=</span><span class="token plain"> </span><span class="token boolean" style="color:#94dded">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token table class-name" style="color:#ff94ff;font-weight:bold">tools.node</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key property" style="color:#b7a9f9">intercept-globals</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">=</span><span class="token plain"> </span><span class="token boolean" style="color:#94dded">false</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As of now, only the <a href="https://github.com/moonrepo/node-plugin" target="_blank" rel="noopener noreferrer">Node.js</a> and
<a href="https://github.com/moonrepo/go-plugin" target="_blank" rel="noopener noreferrer">Go</a> plugins support settings.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="moved-aliases-and-default-versions-breaking">Moved aliases and default versions (breaking)<a href="https://moonrepo.dev/blog/proto-v0.24#moved-aliases-and-default-versions-breaking" class="hash-link" aria-label="Direct link to Moved aliases and default versions (breaking)" title="Direct link to Moved aliases and default versions (breaking)">​</a></h2>
<p>To continue with these configuration changes, we've also moved aliases and the default version into
this new configuration. Previously, both of these values were stored in
<code>~/.proto/tools/&lt;name&gt;/manifest.json</code>, but the problem was, that this file is internally managed by
proto, and should not be modified by users. This made it difficult for users to manage, and to
persist these values across machines (think dotfile syncing).</p>
<p>Now these values are stored in <a href="https://moonrepo.dev/docs/proto/config"><code>.prototools</code></a>, with aliases being configured in
<a href="https://moonrepo.dev/docs/proto/config#toolsaliases"><code>[tools.&lt;name&gt;.aliases]</code></a>, and the default version (global) being
pinned as a version in <code>~/.proto/.prototools</code>. Here's an example:</p>
<div class="language-toml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">~/.proto/.prototools</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-toml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key property" style="color:#b7a9f9">node</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">=</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"20.0.0"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token table class-name" style="color:#ff94ff;font-weight:bold">tools.node.aliases</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key property" style="color:#b7a9f9">work</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">=</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"18"</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This change also enables aliases to be defined anywhere! Previously, aliases were only allowed to be
defined globally for a user, but now they can be defined per-project, or even per-directory.</p>
<div class="theme-admonition theme-admonition-info admonition_WCGJ alert alert--info"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_pbrs"><p>After upgrading, run <code>proto migrate v0.24</code> to migrate your aliases and default versions to the new
configuration format!</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="https://moonrepo.dev/blog/proto-v0.24#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2>
<p>View the <a href="https://github.com/moonrepo/proto/releases/tag/v0.24.0" target="_blank" rel="noopener noreferrer">official release</a> for a full list
of changes.</p>
<ul>
<li>proto now supports <a href="https://moonrepo.dev/docs/proto/install#canary-releases">canary</a> and
<a href="https://moonrepo.dev/docs/proto/install#nightly-releases">nightly</a> releases.</li>
<li>Updated non-latest plugins to be cached for 30 days, instead of forever.</li>
<li>Fixed an issue where resolving canary versions wouldn't work correctly.</li>
</ul>]]></content:encoded>
            <category>proto</category>
            <category>config</category>
            <category>tools</category>
        </item>
        <item>
            <title><![CDATA[moon v1.17 - Full Bun support, TypeScript improvements, and more!]]></title>
            <link>https://moonrepo.dev/blog/moon-v1.17</link>
            <guid>https://moonrepo.dev/blog/moon-v1.17</guid>
            <pubDate>Mon, 20 Nov 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[In this release, we've focused heavily on the JavaScript and TypeScript ecosystems, by improving our]]></description>
            <content:encoded><![CDATA[<p>In this release, we've focused heavily on the JavaScript and TypeScript ecosystems, by improving our
implementations, and providing full Bun support.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="bun-tier-1-2-and-3-support">Bun tier 1, 2, and 3 support<a href="https://moonrepo.dev/blog/moon-v1.17#bun-tier-1-2-and-3-support" class="hash-link" aria-label="Direct link to Bun tier 1, 2, and 3 support" title="Direct link to Bun tier 1, 2, and 3 support">​</a></h2>
<p>Yes you read that right! Not just 1 tier, not just 2 tiers, but all 3 language tiers have been
implemented for Bun, providing <a href="https://moonrepo.dev/docs/how-it-works/languages">full language support</a>, and parity
with Node.js. Thanks to the Bun work in <a href="https://moonrepo.dev/proto">proto</a> and the previous
<a href="https://moonrepo.dev/blog/moon-v1.16">v1.16 release</a>, we were able to add full Bun support with relative easy.</p>
<p>So what does Bun support look like? To start, you can now configure a
<a href="https://moonrepo.dev/docs/config/toolchain#bun"><code>bun</code></a> setting in <a href="https://moonrepo.dev/docs/config/toolchain"><code>.moon/toolchain.yml</code></a>,
including an optional <code>version</code> to download and install, and settings similar to Node.js.</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/toolchain.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">bun</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">version</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'1.0.13'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">syncProjectWorkspaceDependencies</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#94dded">true</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This will enable the <code>bun</code> platform and the following integrations are applied:</p>
<ul>
<li>Will automatically download and install Bun for the configured version.</li>
<li>Will install dependencies using <code>bun install</code> (deduping currently not supported).</li>
<li>Will parse <code>bun.lockb</code> for dependency resolution and task hashing.</li>
<li>Will use <code>bunx</code> instead of <code>npx</code> for one-off package executions.</li>
<li>Can execute <code>bun</code> commands within tasks.</li>
</ul>
<p>With the <code>bun</code> platform enabled, you can now configure the platform for projects and tasks (is
automatically detected when running the <code>bun</code> or <code>bunx</code> commands).</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">&lt;project&gt;/moon.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token comment" style="color:#97a1af;font-style:italic"># Default platform for all tasks (optional)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key atrule">platform</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'bun'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">dev</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'bun run dev'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">test</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'bun test'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">lint</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'eslint .'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token comment" style="color:#97a1af;font-style:italic"># Only required for npm packages (if not defined above)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">platform</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'bun'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="typescript-improvements">TypeScript improvements<a href="https://moonrepo.dev/blog/moon-v1.17#typescript-improvements" class="hash-link" aria-label="Direct link to TypeScript improvements" title="Direct link to TypeScript improvements">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="configure-the-root-directory">Configure the root directory<a href="https://moonrepo.dev/blog/moon-v1.17#configure-the-root-directory" class="hash-link" aria-label="Direct link to Configure the root directory" title="Direct link to Configure the root directory">​</a></h3>
<p>When moon was first designed, it was designed for JavaScript based monorepos. Because of this, there
were a handful of assumptions that still exist today, one of which is that the moon workspace root
was assumed to be the JavaScript and TypeScript root. The root is extremely important in resolving
relative paths for project references and other path based functionality, so using the workspace
root made the most sense.</p>
<p>However, what if your TypeScript root isn't the workspace root? Or the TypeScript root and
JavaScript root are different? Well, you were out of luck... until now! We're introducing a new
setting called <a href="https://moonrepo.dev/docs/config/toolchain#root"><code>typescript.root</code></a>, that denotes the root directory for
TypeScript related functionality (relative from moon's workspace root).</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/toolchain.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">typescript</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">root</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'./typescript'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="include-shared-types">Include shared types<a href="https://moonrepo.dev/blog/moon-v1.17#include-shared-types" class="hash-link" aria-label="Direct link to Include shared types" title="Direct link to Include shared types">​</a></h3>
<p>Another common TypeScript practice is to have shared <code>.d.ts</code> types that are used across multiple
projects, or to augment third-party types. This is so common that we felt obligated to support it in
some capacity within moon. With that said, we're introducing a new setting,
<a href="https://moonrepo.dev/docs/config/toolchain#includesharedtypes"><code>typescript.includeSharedTypes</code></a>.</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/toolchain.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">typescript</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">includeSharedTypes</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#94dded">true</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>When enabled, we'll automatically sync the shared types path to the <code>include</code> field of all relevant
project <code>tsconfig.json</code>s. However, for this to work correctly, the shared types <em>must</em> exist in a
<code>types</code> folder relative from the <a href="https://moonrepo.dev/blog/moon-v1.17#configure-the-root-directory">TypeScript root</a>.</p>
<p>For example, if the TypeScript root is <code>/</code>, and shared types is <code>/types</code>, then all packages in
<code>/packages/*</code> will be updated with the following:</p>
<div class="language-json codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">packages/example/tsconfig.json</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-json codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">"include"</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token string" style="color:#c9e166">"../../types/**/*"</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">}</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>This setting can be overridden on a per-project basis.</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="include-sources-of-project-references">Include sources of project references<a href="https://moonrepo.dev/blog/moon-v1.17#include-sources-of-project-references" class="hash-link" aria-label="Direct link to Include sources of project references" title="Direct link to Include sources of project references">​</a></h3>
<p>Continuing with <code>include</code> related functionality, we've introducing yet another new setting,
<a href="https://moonrepo.dev/docs/config/toolchain#includeprojectreferencesources"><code>typescript.includeProjectReferenceSources</code></a>,
which does exactly as its name implies. It automatically appends the sources (<code>**/*</code>) of all project
references to the <code>include</code> field of all relevant project <code>tsconfig.json</code>s.</p>
<p>This is useful (and sometimes required) for the following reasons:</p>
<ul>
<li>It makes files within a referenced project available for import into the consuming project. This
is required for "press tab to auto-import" nested/deep files, otherwise only index imports will
work (and barrel files are costly).</li>
<li>It also improves the editor experience by making the source files available for intellisense,
autocomplete, and other features.</li>
</ul>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/toolchain.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">typescript</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">includeProjectReferenceSources</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#94dded">true</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To understand this functionality, say you have a project with the following <code>tsconfig.json</code>, and
this project depends on 2 other projects: ui and utils.</p>
<div class="language-json codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">packages/example/tsconfig.json</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-json codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">"compilerOptions"</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">{</span><span class="token punctuation" style="color:#cad4e2">}</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">"include"</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token string" style="color:#c9e166">"src/**/*"</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">}</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>When our syncing process occurs, we'll automatically sync project references, and include referenced
sources, like so.</p>
<div class="language-json codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">packages/example/tsconfig.json</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-json codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">"compilerOptions"</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">{</span><span class="token punctuation" style="color:#cad4e2">}</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">"include"</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token string" style="color:#c9e166">"src/**/*"</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"../ui/**/*"</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"../utils/**/*"</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">"references"</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"> </span><span class="token property" style="color:#b7a9f9">"path"</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"../ui"</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">}</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"> </span><span class="token property" style="color:#b7a9f9">"path"</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"../utils"</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">}</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">}</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>This setting can also be overridden on a per-project basis.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="javascript-improvements">JavaScript improvements<a href="https://moonrepo.dev/blog/moon-v1.17#javascript-improvements" class="hash-link" aria-label="Direct link to JavaScript improvements" title="Direct link to JavaScript improvements">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="supporting-the-single-version-policy-pattern">Supporting the "single version policy" pattern<a href="https://moonrepo.dev/blog/moon-v1.17#supporting-the-single-version-policy-pattern" class="hash-link" aria-label="Direct link to Supporting the &quot;single version policy&quot; pattern" title="Direct link to Supporting the &quot;single version policy&quot; pattern">​</a></h3>
<p>If you're unfamiliar with the single version policy, or the one version rule, it's a pattern that
only allows dependencies to be configured in a single location, typically the root <code>package.json</code>.
This pattern forces <em>all</em> projects in a monorepo to use the same dependencies, and avoid the package
<code>workspaces</code> functionality.</p>
<p>This pattern was previously not possible in moon, as our automatic dependency installation process
did not account for it, and it would either install in the root if using <code>workspaces</code>, or in a
project otherwise. To support this pattern, we're introducing the new setting
<a href="https://moonrepo.dev/docs/config/toolchain#rootpackageonly"><code>node.rootPackageOnly</code></a> for Node.js, and
<code>bun.rootPackageOnly</code> for Bun.</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/toolchain.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">node</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">rootPackageOnly</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#94dded">true</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>When enabled, we'll only install dependencies in the workspace root, regardless of other settings or
how <code>package.json</code>s are configured. However, this setting <em>does not</em> verify that other
<code>package.json</code>s <em>do not</em> have dependencies. It's up to you to ensure that other <code>package.json</code>s do
not have dependencies.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="https://moonrepo.dev/blog/moon-v1.17#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2>
<p>View the <a href="https://github.com/moonrepo/moon/releases/tag/v1.17.0" target="_blank" rel="noopener noreferrer">official release</a> for a full list
of changes.</p>
<ul>
<li>Updated automatic dependency linking to use the <code>build</code> scope instead of <code>peer</code> scope. This should
alleviate some of the pain points with <code>package.json</code> syncing.</li>
<li>Improved project reference syncing and edge case handling.</li>
</ul>]]></content:encoded>
            <category>bun</category>
            <category>typescript</category>
            <category>javascript</category>
        </item>
        <item>
            <title><![CDATA[proto v0.23 - New detection strategy, tool commands, and more]]></title>
            <link>https://moonrepo.dev/blog/proto-v0.23</link>
            <guid>https://moonrepo.dev/blog/proto-v0.23</guid>
            <pubDate>Thu, 16 Nov 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[With this release, we've reorganized our commands, improved version detection, and Windows support.]]></description>
            <content:encoded><![CDATA[<p>With this release, we've reorganized our commands, improved version detection, and Windows support.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="new-detect-strategy-setting">New <code>detect-strategy</code> setting<a href="https://moonrepo.dev/blog/proto-v0.23#new-detect-strategy-setting" class="hash-link" aria-label="Direct link to new-detect-strategy-setting" title="Direct link to new-detect-strategy-setting">​</a></h2>
<p>Up until now, when proto would attempt to detect a version, it would use a version from the closest
<code>.prototools</code> file, or tool specific file (<code>package.json</code>, <code>.nvmrc</code>, etc), which ever matched first.
For the most part, this works great, but what if you wanted <code>.prototools</code> to take precedence over
other files, even if found in a higher parent directory? You unfortunately couldn't.</p>
<p>To support this new flow, we're introducing a new
<a href="https://moonrepo.dev/docs/proto/config#user-configuration"><code>~/.proto/config.toml</code></a> setting called
<a href="https://moonrepo.dev/docs/proto/config#detect-strategy"><code>detect-strategy</code></a>. This setting supports the following values,
with more possibly in the future!</p>
<ul>
<li><code>first-available</code> (default) - Will use the first available version that is found. Either from
<code>.prototools</code> or a tool specific file.</li>
<li><code>prefer-prototools</code> - Prefer a <code>.prototools</code> version, even if found in a parent directory. If none
found, falls back to tool specific file.</li>
</ul>
<div class="language-toml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">~/.proto/config.toml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-toml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key property" style="color:#b7a9f9">detect-strategy</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">=</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"prefer-prototools"</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="new-proto-tool-command-group-breaking">New <code>proto tool</code> command group (breaking)<a href="https://moonrepo.dev/blog/proto-v0.23#new-proto-tool-command-group-breaking" class="hash-link" aria-label="Direct link to new-proto-tool-command-group-breaking" title="Direct link to new-proto-tool-command-group-breaking">​</a></h2>
<p>Our CLI surface area has been growing and we felt it was time to start grouping commands, starting
with the new <a href="https://moonrepo.dev/docs/proto/commands/tool"><code>proto tool</code></a> command. This command will contain "not used
very often" subcommands in relation to tools and their plugins, primarily for managing plugins, and
viewing tool information and inventory. As such, we've deprecated and moved the following top-level
commands:</p>
<ul>
<li>Moved <code>proto add-plugin</code> to <code>proto tool add</code>.</li>
<li>Moved <code>proto remove-plugin</code> to <code>proto tool remove</code>.</li>
<li>Moved <code>proto plugins</code> to <code>proto tool list-plugins</code>.</li>
<li>Moved <code>proto tools</code> to <code>proto tool list</code>.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="new-proto-tool-info-command">New <code>proto tool info</code> command<a href="https://moonrepo.dev/blog/proto-v0.23#new-proto-tool-info-command" class="hash-link" aria-label="Direct link to new-proto-tool-info-command" title="Direct link to new-proto-tool-info-command">​</a></h2>
<p>Continuing with the changes above, we're also introducing a new command,
<a href="https://moonrepo.dev/docs/proto/commands/tool/info"><code>proto tool info</code></a>, which displays detailed information about a
tool and its backing plugin. For example:</p>
<div class="codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-text codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ proto tool info node</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">node - Node.js</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">Inventory</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  Store: ~/.proto/tools/node</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  Executable: ~/.proto/tools/node/20.0.0/bin/node</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  Globals directory: ~/.proto/tools/node/globals/bin</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  Binaries:</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    - ~/.proto/bin/node (primary)</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  Shims:</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    - ~/.proto/shims/node (primary)</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">Plugin</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  Version: 0.5.2</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  Source: https://github.com/moonrepo/node-plugin/releases/download/v0.5.2/node_plugin.wasm</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>This command also supports JSON output via <code>--json</code>.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="https://moonrepo.dev/blog/proto-v0.23#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2>
<p>View the <a href="https://github.com/moonrepo/proto/releases/tag/v0.23.0" target="_blank" rel="noopener noreferrer">official release</a> for a full list
of changes.</p>
<ul>
<li>Added support to plugins to ignore certain paths when detecting a version.</li>
<li>Updated Windows to create 3 shim files for each tool: <code>.cmd</code> (cmd.exe), <code>.ps1</code> (powershell), and
no extension (bash).</li>
</ul>]]></content:encoded>
            <category>proto</category>
        </item>
        <item>
            <title><![CDATA[moon v1.16 - Bun support, Rust improvements, and more!]]></title>
            <link>https://moonrepo.dev/blog/moon-v1.16</link>
            <guid>https://moonrepo.dev/blog/moon-v1.16</guid>
            <pubDate>Mon, 30 Oct 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[With this release, we've focused on requests from the community, instead of internal migration work]]></description>
            <content:encoded><![CDATA[<p>With this release, we've focused on requests from the community, instead of internal migration work
or new features.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="bun-as-a-package-manager">Bun as a package manager<a href="https://moonrepo.dev/blog/moon-v1.16#bun-as-a-package-manager" class="hash-link" aria-label="Direct link to Bun as a package manager" title="Direct link to Bun as a package manager">​</a></h2>
<p>Now that <a href="https://bun.sh/blog/bun-v1.0" target="_blank" rel="noopener noreferrer">Bun v1 has officially released</a> and our
<a href="https://github.com/moonrepo/bun-plugin" target="_blank" rel="noopener noreferrer">bun-plugin</a> for proto has stabilized, we can start slowly
integrating Bun support into moon. The first step in this series is adding Bun as a supported
package manager for Node.js. Seems odd as they are conflicting runtimes... right? While true, a lot
of users are interested in using Bun purely as a package manager, as it can install dependencies
incredibly fast. So why not support it?</p>
<p>In this release, you can now install dependencies with Bun by configuring
<a href="https://moonrepo.dev/docs/config/toolchain#packagemanager"><code>node.packageManager</code></a> and
<a href="https://moonrepo.dev/docs/config/toolchain#npm-pnpm-yarn"><code>node.bun</code></a> in your toolchain.</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/toolchain.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">node</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">packageManager</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'bun'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">bun</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">version</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'1.0.0'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Additionally, you can now execute Bun commands within tasks! However, ensure the task's platform is
still set to <code>node</code> though, as this is using Bun as a package manager within Node.js, not as a
separate runtime.</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">moon.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">test</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'bun test'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">platform</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'node'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>When using Bun, the following integrations are applied:</p>
<ul>
<li>Will automatically download and install Bun for the configured version.</li>
<li>Will install dependencies using <code>bun install</code> (deduping currently not supported).</li>
<li>Will parse <code>bun.lockb</code> for dependency resolution and task hashing.</li>
<li>Will use <code>bunx</code> instead of <code>npx</code> for one-off package executions.</li>
<li>Can execute <code>bun</code> commands within tasks.</li>
</ul>
<blockquote>
<p>This change <em>only</em> adds support for Bun as a package manager for Node.js. It does not add Bun as a
supported language/platform in the toolchain, but it does pave the way for this to happen! Also
note that Bun <em>is not supported on Windows</em>!</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="configure-rust-components-and-targets">Configure Rust components and targets<a href="https://moonrepo.dev/blog/moon-v1.16#configure-rust-components-and-targets" class="hash-link" aria-label="Direct link to Configure Rust components and targets" title="Direct link to Configure Rust components and targets">​</a></h2>
<p>We've had Rust tier 2 and 3 support for quite a while now, but there was a big missing piece: the
ability to configure and install additional
<a href="https://rust-lang.github.io/rustup/concepts/components.html" target="_blank" rel="noopener noreferrer">components</a> and
<a href="https://doc.rust-lang.org/nightly/rustc/platform-support.html" target="_blank" rel="noopener noreferrer">targets</a> for the current toolchain.
In this release, we've added support for both!</p>
<p>Simply configure the <a href="https://moonrepo.dev/docs/config/toolchain#components"><code>rust.components</code></a> or
<a href="https://moonrepo.dev/docs/config/toolchain#targets"><code>rust.targets</code></a> settings in
<a href="https://moonrepo.dev/docs/config/toolchain"><code>.moon/toolchain.yml</code></a>, and moon will automatically install them when the
pipeline is ran. This functionality uses the same hashing implementation as
<a href="https://moonrepo.dev/docs/config/toolchain#bins-1"><code>rust.bins</code></a>, so will only install the first time, and again if the
configuration changes (or the cache is removed).</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/toolchain.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">rust</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">version</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'1.73.0'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">components</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'clippy'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'rust-analyzer'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">targets</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'wasm32-wasi'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="force-toolchain-to-use-global-binaries">Force toolchain to use global binaries<a href="https://moonrepo.dev/blog/moon-v1.16#force-toolchain-to-use-global-binaries" class="hash-link" aria-label="Direct link to Force toolchain to use global binaries" title="Direct link to Force toolchain to use global binaries">​</a></h2>
<p>Our <a href="https://moonrepo.dev/docs/concepts/toolchain">toolchain</a> is great for local development, as it ensures all
developers and machines are running the exact versions of tools required for the workspace. However,
it becomes overkill for other environments like CI and Docker where the environment has been
pre-configured.</p>
<p>To avoid the unnecessary overhead of download and installing tools in the toolchain, we're
introducing the <code>MOON_TOOLCHAIN_FORCE_GLOBALS</code> environment variable. When provided, this will:</p>
<ul>
<li>Disable downloading and installing tools (will still download the WASM plugins).</li>
<li>Execute all tool commands using the global binary available on <code>PATH</code>.</li>
</ul>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token assign-left variable" style="color:#fef9c3">MOON_TOOLCHAIN_FORCE_GLOBALS</span><span class="token operator" style="color:#b7a9f9">=</span><span class="token plain">true moon ci</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>We're looking into ways to automate this process, but for now, this is the best solution.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="https://moonrepo.dev/blog/moon-v1.16#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2>
<p>View the <a href="https://github.com/moonrepo/moon/releases/tag/v1.16.0" target="_blank" rel="noopener noreferrer">official release</a> for a full list
of changes.</p>
<ul>
<li>Added an improved task inheritance chain resolver. To fallback to the previous behavior, set
<code>experiments.interweavedTaskInheritance: false</code> in <code>.moon/workspace.yml</code>.</li>
<li>Added a new <a href="https://moonrepo.dev/docs/config/project#type">project type <code>automation</code></a>, for projects like E2E and
integration testing.</li>
<li>Updated action graph cycle detection to list all nodes in the cycle (when detectable).</li>
<li>Updated all npx calls to use a package manager equivalent. For example: <code>yarn dlx</code>, <code>pnpm dlx</code>,
<code>bunx</code>.</li>
<li>Updated to support Yarn v4.</li>
</ul>]]></content:encoded>
            <category>bun</category>
            <category>rust</category>
            <category>toolchain</category>
            <category>automation</category>
            <category>package</category>
            <category>manager</category>
        </item>
        <item>
            <title><![CDATA[proto v0.21 - Linux x64 musl support]]></title>
            <link>https://moonrepo.dev/blog/proto-v0.21</link>
            <guid>https://moonrepo.dev/blog/proto-v0.21</guid>
            <pubDate>Fri, 27 Oct 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[This is a very small release that primarily adds support for the Linux x64 musl target.]]></description>
            <content:encoded><![CDATA[<p>This is a very small release that primarily adds support for the Linux x64 musl target.</p>
<p>Thanks to <a href="https://github.com/axodotdev/cargo-dist" target="_blank" rel="noopener noreferrer">cargo-dist</a>, we can now build and distribute
musl binaries with relative ease. When building the binary, libraries are statically linked to
ensure that the binary can run on any Linux distribution.</p>
<p>You can download the binary from the official
<a href="https://github.com/moonrepo/proto/releases/tag/v0.21.0" target="_blank" rel="noopener noreferrer">GitHub release</a> or by running the
<a href="https://moonrepo.dev/docs/proto/install#linux-macos-wsl">Bash installation script</a>. In the future, we plan to support
arm64 builds for both Linux gnu and musl.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="https://moonrepo.dev/blog/proto-v0.21#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2>
<p>View the <a href="https://github.com/moonrepo/proto/releases/tag/v0.21.0" target="_blank" rel="noopener noreferrer">official release</a> for a full list
of changes.</p>
<ul>
<li>Improved file and directory locking. Will now work correctly across processes and signals,
especially for those killed/dropped.</li>
<li>Updated WASM functions to use explicit Rust enum types for versions to properly handle all
variations (version, alias, requirement, range).</li>
</ul>]]></content:encoded>
            <category>proto</category>
            <category>linux</category>
            <category>musl</category>
        </item>
        <item>
            <title><![CDATA[proto v0.20 - New shims and binaries management]]></title>
            <link>https://moonrepo.dev/blog/proto-v0.20</link>
            <guid>https://moonrepo.dev/blog/proto-v0.20</guid>
            <pubDate>Fri, 20 Oct 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[In this release, we're reworking how shims and binaries work.]]></description>
            <content:encoded><![CDATA[<p>In this release, we're reworking how shims and binaries work.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="shims-and-binaries-breaking">Shims <em>and</em> Binaries (breaking)<a href="https://moonrepo.dev/blog/proto-v0.20#shims-and-binaries-breaking" class="hash-link" aria-label="Direct link to shims-and-binaries-breaking" title="Direct link to shims-and-binaries-breaking">​</a></h2>
<p>Since proto's inception, we've used shims as a way to execute installed tools. This allowed us to
wrap the underlying tool binary to provide additional functionality, such as automatic version
detection, runtime hooks, and more. However, this approach has some limitations, such as:</p>
<ul>
<li>Shims are forced onto you and there's no way to use proto without shims.</li>
<li>Shims are slower than executing the native binary, upwards of 10x slower. While this equates in
milliseconds, it can be noticeable dependending on the tool.</li>
<li>For Windows, our shim files are <code>.cmd</code> <em>and not</em> <code>.exe</code>. This causes a lot of weird and unexpected
problems when an environment expects a real executable, or uses a hard-coded <code>.exe</code> extension.</li>
</ul>
<p>To remedy this, we're introducing both a shim and non-shim approach, which has resulted in a pretty
big breaking change. Shims are now generated in <code>~/.proto/shims</code> (instead of <code>~/.proto/bin</code>), while
<code>~/.proto/bin</code> will now store symlinks to native binaries. To migrate to this new pattern, we're
introducing a new <code>proto migrate</code> command (this only needs to be ran once).</p>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ proto upgrade</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ proto migrate v0.20 </span><span class="token parameter variable" style="color:#fef9c3">--log</span><span class="token plain"> debug</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="how-it-works">How it works<a href="https://moonrepo.dev/blog/proto-v0.20#how-it-works" class="hash-link" aria-label="Direct link to How it works" title="Direct link to How it works">​</a></h3>
<p>When installing proto for the first time, or running the <code>proto migrate</code> command, we prepend <code>PATH</code>
with <code>$PROTO_HOME/shims:$PROTO_HOME/bin</code>. This allows shims to be executed <em>first</em> and fallthrough
to native binaries if a shim does not exist (for example, <code>.exe</code> on Windows).</p>
<p>Furthermore, if you'd prefer to <em>only use</em> shims, or <em>only use</em> binaries, you can update <code>PATH</code> and
remove the unwanted directory path.</p>
<p>And lastly, if shims are causing problems, you can now easily reference the native binaries
directly. This was rather complicated before.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="comparison">Comparison<a href="https://moonrepo.dev/blog/proto-v0.20#comparison" class="hash-link" aria-label="Direct link to Comparison" title="Direct link to Comparison">​</a></h3>
<table><thead><tr><th></th><th>Shims</th><th>Binaries</th></tr></thead><tbody><tr><td><strong>Location</strong></td><td><code>~/.proto/shims</code></td><td><code>~/.proto/bin</code></td></tr><tr><td><strong>Created as</strong></td><td>Scripts that run <code>proto run</code></td><td>Symlinks to the native binary</td></tr><tr><td><strong>Version executed</strong></td><td>Detects version at runtime</td><td>Last version that was installed + pinned</td></tr><tr><td><strong>Supported for</strong></td><td>All tools</td><td>Only tools that support native execution (may not work for <code>.js</code> files)</td></tr><tr><td><strong>Additional files</strong></td><td>Creates extra files (like <code>bunx</code>, <code>node-gyp</code>, etc)</td><td>Only links the primary binary</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="support-for-minisign-checksums">Support for minisign checksums<a href="https://moonrepo.dev/blog/proto-v0.20#support-for-minisign-checksums" class="hash-link" aria-label="Direct link to Support for minisign checksums" title="Direct link to Support for minisign checksums">​</a></h2>
<p>When proto installs a tool, it runs a process known as checksum verification, where we ensure the
download hasn't been modified maliciously in anyway. Historically we only supported SHA256
checksums, but now, we also support the new <a href="https://jedisct1.github.io/minisign/" target="_blank" rel="noopener noreferrer">minisign</a> tool,
used by popular tools like <a href="https://ziglang.org/" target="_blank" rel="noopener noreferrer">Zig</a>.</p>
<p>If you're building a plugin for a tool that uses minisign, you can use the new
<a href="https://moonrepo.dev/docs/proto/wasm-plugin#downloading-pre-builts"><code>checksum_public_key</code></a> (WASM) or
<a href="https://moonrepo.dev/docs/proto/toml-plugin#downloading-and-installing"><code>install.checksum-public-key</code></a> (TOML) field to
provide the public key for use in verification.</p>
<p>When the checksum URL ends in a <code>.minisig</code> extension, proto will automatically use minisign for
checksum verification!</p>
<div class="language-toml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-toml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token punctuation" style="color:#cad4e2">[</span><span class="token table class-name" style="color:#ff94ff;font-weight:bold">install</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key property" style="color:#b7a9f9">checksum-url</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">=</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"https://domain.com/some/path/to/checksum.minisig"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key property" style="color:#b7a9f9">checksum-public-key</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">=</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"untrusted comment: ..."</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="https://moonrepo.dev/blog/proto-v0.20#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2>
<p>View the <a href="https://github.com/moonrepo/proto/releases/tag/v0.20.0" target="_blank" rel="noopener noreferrer">official release</a> for a full list
of changes.</p>
<ul>
<li>Updated <code>proto use</code> to install tools in parallel.</li>
<li>Updated <code>proto plugins</code> and <code>proto tools</code> to load plugins in parallel.</li>
<li>Updated <code>proto run</code> to error when the tool attempts to self-upgrade outside of proto.</li>
<li>Rust plugin<!-- -->
<ul>
<li>Will now attempt to install <code>rustup</code> if it does not exist on the current machine.</li>
<li>Will now respect the <code>RUSTUP_HOME</code> environment variable when locating the <code>.rustup</code> store.</li>
</ul>
</li>
<li>Schema plugin<!-- -->
<ul>
<li>Added <code>install.checksum_public_key</code> for defining the public key used to verify checksums.</li>
<li>Added <code>metadata.self_upgrade_commands</code> for defining which sub-commands should be blocked for
self-upgrades.</li>
</ul>
</li>
</ul>]]></content:encoded>
            <category>proto</category>
            <category>bin</category>
            <category>shim</category>
            <category>checksum</category>
        </item>
        <item>
            <title><![CDATA[moon v1.15 - Next-generation action graph]]></title>
            <link>https://moonrepo.dev/blog/moon-v1.15</link>
            <guid>https://moonrepo.dev/blog/moon-v1.15</guid>
            <pubDate>Mon, 09 Oct 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[In this release, we've taken the next step in modernizing our action pipeline, by rewriting the]]></description>
            <content:encoded><![CDATA[<p>In this release, we've taken the next step in modernizing our action pipeline, by rewriting the
dependency graph.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="hello-action-graph-goodbye-dependency-graph">Hello action graph, goodbye dependency graph<a href="https://moonrepo.dev/blog/moon-v1.15#hello-action-graph-goodbye-dependency-graph" class="hash-link" aria-label="Direct link to Hello action graph, goodbye dependency graph" title="Direct link to Hello action graph, goodbye dependency graph">​</a></h2>
<p>For the past few months, we've been working on a rewrite of our action pipeline, which consists of
the project graph, dependency graph, task executor, process pipeline, and more. It's a slow process,
with many different pieces that must land in sequence, but we're almost done. The next step in this
process is the <a href="https://moonrepo.dev/docs/how-it-works/action-graph">introduction of the new action graph</a>, which
replaces the previous dependency graph.</p>
<p>For the most part, the graphs work in a similar fashion, but since we rewrote it from the ground up,
we were able to resolve any discrepancies and performance issues. The biggest changes between the
new and old graphs are:</p>
<ul>
<li>All actions now depend on the <code>SyncWorkspace</code> action, instead of this action running arbitrarily.</li>
<li>Cleaned up dependency chains between actions, greatly reducing the number of nodes in the graph.</li>
<li>Renamed <code>RunTarget</code> to <code>RunTask</code>, including interactive and persistent variants.</li>
<li>And lastly, we ditched our batched task approach for a ready queue. Continue reading for more
information!</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="a-new-performant-thread-pool">A new performant thread pool<a href="https://moonrepo.dev/blog/moon-v1.15#a-new-performant-thread-pool" class="hash-link" aria-label="Direct link to A new performant thread pool" title="Direct link to A new performant thread pool">​</a></h3>
<p>In the old dependency graph, when we'd execute a task, we'd order the graph topologically and then
group actions into batches (or buckets) based on their dependency chains. Batches would then be
executed in order within the thread pool. This approach worked well, but had one major flaw: it
wasn't as performant as could be. For example, if our thread pool size was 12, and a batch only had
2 tasks in it, what were the other 10 threads doing? Absolutely nothing. They were sitting idly,
waiting for a task.</p>
<p>And now with the new action graph, we take full advantage of all threads in the pool. Instead of the
batched approach above, we now use a topological task-ready queue, where a thread without work (or
is waiting for work) can poll the graph for a new task to run. A task is considered ready to run if
it either has no dependencies, or all of its dependencies (in the chain) have been ran.</p>
<p>For large graphs, this should result in a significant performance improvement!</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="automatic-dependency-linking-breaking">Automatic dependency linking (breaking)<a href="https://moonrepo.dev/blog/moon-v1.15#automatic-dependency-linking-breaking" class="hash-link" aria-label="Direct link to Automatic dependency linking (breaking)" title="Direct link to Automatic dependency linking (breaking)">​</a></h3>
<blockquote>
<p>In v1.17, we changed the scope from "peer" to "build" to reduce friction.</p>
</blockquote>
<p>Because of these graph changes, we do have a minor "breaking change". Tasks that depend (via <code>deps</code>)
on other tasks from arbitrary projects (the parent project doesn't implicitly or explicitly depend
on the other project), not including the root-level project, will now automatically mark that other
project as a "peer" dependency (if not already configured with <code>dependsOn</code>). For example, "b"
becomes a peer dependency for "a".</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">a/moon.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">build</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">deps</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token string" style="color:#c9e166">'b:build'</span><span class="token punctuation" style="color:#cad4e2">]</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now internally becomes:</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">a/moon.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">dependsOn</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token key atrule">id</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'b'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">scope</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'peer'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">build</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">deps</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token string" style="color:#c9e166">'b:build'</span><span class="token punctuation" style="color:#cad4e2">]</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you'd prefer this dependency to <em>not be</em> a peer, you can explicitly configure it with a different
scope. For Node.js projects, the "build" scope can be used as a no-op replacement.</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">a/moon.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">dependsOn</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token key atrule">id</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'b'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">scope</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'build'</span><span class="token plain"> </span><span class="token comment" style="color:#97a1af;font-style:italic"># production, development</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">build</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">deps</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token string" style="color:#c9e166">'b:build'</span><span class="token punctuation" style="color:#cad4e2">]</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We're marking this as a breaking change as this could subtly introduce cycles in the project graph
that weren't present before, and for Node.js projects, this may inject <code>peerDependencies</code>. However,
this change was necessary to ensure accurate dependency chains in the graph.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="new-moonreposetup-toolchain-github-action">New <code>moonrepo/setup-toolchain</code> GitHub action<a href="https://moonrepo.dev/blog/moon-v1.15#new-moonreposetup-toolchain-github-action" class="hash-link" aria-label="Direct link to new-moonreposetup-toolchain-github-action" title="Direct link to new-moonreposetup-toolchain-github-action">​</a></h2>
<p>We've begun a process to deprecate the
<a href="https://github.com/moonrepo/setup-moon-action" target="_blank" rel="noopener noreferrer">moonrepo/setup-moon-action</a> and
<a href="https://github.com/moonrepo/setup-proto" target="_blank" rel="noopener noreferrer">moonrepo/setup-proto</a> GitHub actions, and instead, combine
and replace them with a new <a href="https://github.com/moonrepo/setup-toolchain" target="_blank" rel="noopener noreferrer">moonrepo/setup-toolchain</a>
action. Why a new action instead of fixing the others?</p>
<p>The biggest problem was that both previous actions shared about 90% of the same code, but were
slightly different in how they installed the binaries and cached the toolchain. It was was also
confusing for consumers to understand and know which action to use (because they shouldn't be used
together).</p>
<p>To remedy this, we're prototyping the new
<a href="https://github.com/moonrepo/setup-toolchain" target="_blank" rel="noopener noreferrer">moonrepo/setup-toolchain</a> action, which has been
working quite well. It aims to solve the following:</p>
<ul>
<li>Installs <code>proto</code> globally so that installed tools can also be executed globally.</li>
<li>Conditionally installs <code>moon</code> globally if the repository is using moon (attempts to detect a
<code>.moon</code> directory).</li>
<li>Caches the toolchain (<code>~/.proto</code>) so subsequent runs are faster.</li>
<li>Hashes <code>.prototools</code> and <code>.moon/toolchain.yml</code> files to generate a unique cache key.</li>
<li>Cleans the toolchain before caching to remove unused or stale tools.</li>
<li>Can auto-install tools when used.</li>
</ul>
<div class="language-diff codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-diff codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token plain"># ...</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">jobs:</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> ci:</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   name: CI</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   runs-on: ubuntu-latest</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   steps:</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">     - uses: actions/checkout@v4</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">       with:</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">         fetch-depth: 0</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style="color:#ff7c89">-</span><span class="token deleted-sign deleted line" style="color:#ff7c89">      - uses: moonrepo/setup-moon-action@v1</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token deleted-sign deleted line" style="color:#ff7c89"></span><span class="token inserted-sign inserted prefix inserted" style="color:#b7d733">+</span><span class="token inserted-sign inserted line" style="color:#b7d733">      - uses: moonrepo/setup-toolchain@v0</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="now-supported-in-railway">Now supported in Railway<a href="https://moonrepo.dev/blog/moon-v1.15#now-supported-in-railway" class="hash-link" aria-label="Direct link to Now supported in Railway" title="Direct link to Now supported in Railway">​</a></h2>
<p>If you're a big fan of <a href="https://railway.app/" target="_blank" rel="noopener noreferrer">Railway</a> (like we are), and you're deploying a Node.js
backed application, then you'll be happy to hear that Railway now officially and natively supports
moon! We spent some time over the past month
<a href="https://nixpacks.com/docs/providers/node" target="_blank" rel="noopener noreferrer">integrating moon support into their Nixpacks architecture</a>.</p>
<p>To make use of this, set the <code>NIXPACKS_MOON_APP_NAME</code> environment variable to the name of your moon
project that you want to be deployed. This will then automatically run <code>moon run &lt;app&gt;:build</code> and
<code>moon run &lt;app&gt;:start</code> respectively. To customize the task names, you can set the
<code>NIXPACKS_MOON_BUILD_TASK</code> and <code>NIXPACKS_MOON_START_TASK</code> environment variables.</p>
<div class="theme-admonition theme-admonition-info admonition_WCGJ alert alert--info"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_pbrs"><p>This is currently only supported for Node.js projects, but will be expanded to other languages in
the future!</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="https://moonrepo.dev/blog/moon-v1.15#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2>
<p>View the <a href="https://github.com/moonrepo/moon/releases/tag/v1.15.0" target="_blank" rel="noopener noreferrer">official release</a> for a full list
of changes.</p>
<ul>
<li>Added a <code>moon action-graph</code> command.</li>
<li>Added a <code>--dependents</code> argument to <code>moon action-graph</code>.</li>
<li>Added the ability to skip non-<code>RunTask</code> actions using environment variables.</li>
<li>Deprecated the <code>moon dep-graph</code> command.</li>
</ul>]]></content:encoded>
            <category>action</category>
            <category>dependency</category>
            <category>graph</category>
            <category>pipeline</category>
            <category>railway</category>
        </item>
        <item>
            <title><![CDATA[proto v0.19 - Version pinning and outdated checks]]></title>
            <link>https://moonrepo.dev/blog/proto-v0.19</link>
            <guid>https://moonrepo.dev/blog/proto-v0.19</guid>
            <pubDate>Fri, 29 Sep 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[In this release, we're improving version pinning and introducing a new command to check for outdated]]></description>
            <content:encoded><![CDATA[<p>In this release, we're improving version pinning and introducing a new command to check for outdated
versions.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="new-proto-pin-command-breaking">New <code>proto pin</code> command (breaking)<a href="https://moonrepo.dev/blog/proto-v0.19#new-proto-pin-command-breaking" class="hash-link" aria-label="Direct link to new-proto-pin-command-breaking" title="Direct link to new-proto-pin-command-breaking">​</a></h2>
<p>Before our official v1 release, which is relatively soon, we'll be making some breaking changes with
the proto APIs. The first is the introduction of the new <a href="https://moonrepo.dev/docs/proto/commands/pin"><code>proto pin</code></a>
command, which replaces the previous <code>proto local</code> and <code>proto global</code> commands. We felt this was a
much cleaner change, and far easier to understand than the previous command names.</p>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token comment" style="color:#97a1af;font-style:italic"># v0.18</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ proto </span><span class="token builtin class-name" style="color:#ff94ff;font-weight:bold">local</span><span class="token plain"> go </span><span class="token number" style="color:#94dded">1.20</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ proto global </span><span class="token function" style="color:#ff94ff;font-weight:bold">node</span><span class="token plain"> </span><span class="token number" style="color:#94dded">20</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token comment" style="color:#97a1af;font-style:italic"># v0.19+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ proto pin go </span><span class="token number" style="color:#94dded">1.20</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ proto pin </span><span class="token function" style="color:#ff94ff;font-weight:bold">node</span><span class="token plain"> </span><span class="token number" style="color:#94dded">20</span><span class="token plain"> </span><span class="token parameter variable" style="color:#fef9c3">--global</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="new-pin-latest-setting">New <code>pin-latest</code> setting<a href="https://moonrepo.dev/blog/proto-v0.19#new-pin-latest-setting" class="hash-link" aria-label="Direct link to new-pin-latest-setting" title="Direct link to new-pin-latest-setting">​</a></h2>
<p>While we're on the subject of pinning versions, we've also introduced a new
<a href="https://moonrepo.dev/docs/proto/config#pin-latest"><code>pin-latest</code></a> setting. Do you want the latest version to always be
pinned? Do you forgot to pass <code>--pin</code> when installing? Do you forget to run the <code>proto global</code> or
<code>proto local</code> commands (now <code>proto pin</code>)? If you answered yes to any of these questions, then this
setting is for you.</p>
<p>When enabled, and a tool is installed with the "latest" version, the resolved version will
automatically be pinned to the configuration of your choice. For example, say we have the following
user config:</p>
<div class="language-toml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">~/.proto/config.toml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-toml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key property" style="color:#b7a9f9">pin-latest</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">=</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"local"</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>And we run one of the following commands:</p>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ proto </span><span class="token function" style="color:#ff94ff;font-weight:bold">install</span><span class="token plain"> go</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ proto </span><span class="token function" style="color:#ff94ff;font-weight:bold">install</span><span class="token plain"> </span><span class="token function" style="color:#ff94ff;font-weight:bold">node</span><span class="token plain"> latest</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then the resolved version of the tool will automatically be set to the <code>.prototools</code> file in the
current directory. Handy right?</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="new-proto-outdated-command">New <code>proto outdated</code> command<a href="https://moonrepo.dev/blog/proto-v0.19#new-proto-outdated-command" class="hash-link" aria-label="Direct link to new-proto-outdated-command" title="Direct link to new-proto-outdated-command">​</a></h2>
<p>By request of the community, we're introducing yet another new command,
<a href="https://moonrepo.dev/docs/proto/commands/outdated"><code>proto outdated</code></a>. If you're familiar with package managers, you can
probably guess what this command does! It'll check for newer available versions, for all tools
configured in the closest <code>.prototools</code> file. Very handy for keeping your tools up to date.</p>
<div class="codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-text codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ proto outdated</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">go - current version 1.20.2 (via ~1.20), newer version 1.20.8, update available!</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">node - current version 20.7.0 (via 20.7.0), latest version 20.8.0, update available!</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="https://moonrepo.dev/blog/proto-v0.19#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2>
<p>View the <a href="https://github.com/moonrepo/proto/releases/tag/v0.19.0" target="_blank" rel="noopener noreferrer">official release</a> for a full list
of changes.</p>
<ul>
<li>Added <code>PROTO_WASM_LOG</code> environment variable to toggle the logging of messages from Extism and WASM
plugins. Useful for debugging.</li>
<li>Updated <code>proto install</code> to auto-clean stale plugins after a successful installation.</li>
</ul>]]></content:encoded>
            <category>proto</category>
            <category>pin</category>
            <category>global</category>
            <category>local</category>
            <category>outdated</category>
        </item>
    </channel>
</rss>