<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-guides/javascript/typescript-project-refs" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.0">
<title data-rh="true">TypeScript project references | moonrepo</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://moonrepo.dev/docs/guides/javascript/typescript-project-refs"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="moon, repo, moonrepo, task, runner, build, system, ci, times, devx, developer, experience, tooling, tools, monorepo, polyrepo, productivity, platform, proto, toolchain"><meta data-rh="true" name="og:image" content="https://moonrepo.dev/img/hero/slate-bg.jpg"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="TypeScript project references | moonrepo"><meta data-rh="true" name="description" content="The ultimate in-depth guide for using TypeScript in a monorepo effectively!"><meta data-rh="true" property="og:description" content="The ultimate in-depth guide for using TypeScript in a monorepo effectively!"><link data-rh="true" rel="icon" href="/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://moonrepo.dev/docs/guides/javascript/typescript-project-refs"><link data-rh="true" rel="alternate" href="https://moonrepo.dev/docs/guides/javascript/typescript-project-refs" hreflang="en"><link data-rh="true" rel="alternate" href="https://moonrepo.dev/docs/guides/javascript/typescript-project-refs" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://400S075OEM-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="moonrepo RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="moonrepo Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LB233GTZD3"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-LB233GTZD3",{})</script>



<link rel="search" type="application/opensearchdescription+xml" title="moonrepo" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.6dcfee5e.css">
<script src="/assets/js/runtime~main.94521c5a.js" defer="defer"></script>
<script src="/assets/js/main.24aca8ae.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><link rel="preload" as="image" href="/assets/images/vscode-status-1c68ec4790b8766b34a5e91cba1231d7.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_oPtH" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="moon" class="themedComponent_siVc themedComponent--light_hHel"><img src="/img/logo.svg" alt="moon" class="themedComponent_siVc themedComponent--dark_yETr"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Products</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/moon"><strong class="block mr-2">moon</strong><div class="opacity-60">Build system for managing codebases</div></a></li><li><a class="dropdown__link" href="/proto"><strong class="block mr-2">proto</strong><div class="opacity-60">Multi-language version manager</div></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Docs</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs"><strong>moon</strong></a></li><li><a class="dropdown__link" href="/docs/proto"><strong>proto</strong></a></li></ul></div><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/guides/ci">Guides</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a href="https://github.com/moonrepo" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="toggle_ki11 colorModeToggle_Hewu"><button class="clean-btn toggleButton_MMFG toggleButtonDisabled_Uw7m" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_k9hJ lightToggleIcon_lgto"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_k9hJ darkToggleIcon_U96C"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_k9hJ systemToggleIcon_E5c0"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_bzqh"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_MB5r"><div class="docsWrapper__sE8"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_iEvu" type="button"></button><div class="docRoot_DfVB"><aside class="theme-doc-sidebar-container docSidebarContainer_c7NB"><div class="sidebarViewport_KYo0"><div class="sidebar_CUen"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_jmj1"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides/ci">Continuous integration (CI)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides/codegen">Code generation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides/codeowners">Code owners</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides/debug-task">Debugging a task</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides/docker">Docker integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides/extensions">Extensions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides/mcp">MCP integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides/offline-mode">Offline mode</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides/open-source">Open source usage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides/pkl-config">Pkl configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides/remote-cache">Remote caching</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides/root-project">Root-level project</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides/sharing-config">Sharing workspace configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides/notifications">Terminal notifications</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides/wasm-plugins">WASM plugins</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides/webhooks">Webhooks (experimental)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides/vcs-hooks">VCS hooks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menuHtmlItem_OniL menu__list-item"><hr></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/guides/javascript/bun-handbook">JavaScript</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/javascript/bun-handbook">Bun handbook</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/javascript/deno-handbook">Deno handbook</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/javascript/node-handbook">Node.js handbook</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/profile">Task profiling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/guides/javascript/typescript-project-refs">TypeScript project references</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/guides/node/examples">Examples</a><button aria-label="Expand sidebar category &#x27;Examples&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menuHtmlItem_OniL menu__list-item"><hr></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/guides/rust/handbook">Rust</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/rust/handbook">Handbook</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_a9sJ"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_Qr34"><div class="docItemContainer_tjFy"><article><span class="float-right ml-2"></span><nav class="flex pl-1 mb-2" aria-label="Breadcrumb"><ol role="list" class="list-none p-0 m-0 flex items-center space-x-2" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li><a class="cursor-pointer text-base text-gray-700 hover:text-gray-800 dark:text-gray-600 dark:hover:text-gray-500 font-normal" href="/"><span class="inline-block flex-shrink-0" aria-hidden="true" style="padding-top:5px"><span></span></span><span class="sr-only">Home</span></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem"><div class="flex items-center"><span class="inline-block flex-shrink-0 text-gray-600 mr-2" aria-hidden="true"><span></span></span><span class="text-sm text-gray-800 dark:text-slate-100 font-medium m-0">JavaScript</span><meta itemprop="position" content="1"></div></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem"><div class="flex items-center"><span class="inline-block flex-shrink-0 text-gray-600 mr-2" aria-hidden="true"><span></span></span><a class="cursor-pointer text-sm text-gray-700 hover:text-gray-800 dark:text-gray-600 dark:hover:text-gray-500 font-medium" aria-current="page" itemprop="item" href="/docs/guides/javascript/typescript-project-refs"><span itemprop="name">TypeScript project references</span></a><meta itemprop="position" content="2"></div></li></ol></nav><div class="tocCollapsible_wXna theme-doc-toc-mobile tocMobile_Ojys"><button type="button" class="clean-btn tocCollapsibleButton_iI2p">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>TypeScript project references</h1></header><blockquote>
<p>The ultimate in-depth guide for using TypeScript in a monorepo effectively!</p>
</blockquote>
<p>How to use TypeScript in a monorepo? What are project references? Why use project references? What
is the best way to use project references? These are just a handful of questions that are
<em>constantly</em> asked on Twitter, forums, Stack Overflow, and even your workplace.</p>
<p>Based on years of experience managing large-scale frontend repositories, we firmly believe that
TypeScript project references are the proper solution for effectively scaling TypeScript in a
monorepo. The official
<a href="https://www.typescriptlang.org/docs/handbook/project-references.html" target="_blank" rel="noopener noreferrer">TypeScript documentation on project references</a>
answers many of these questions, but it basically boils down to the following:</p>
<ul>
<li>Project references <em>enforce project boundaries, disallowing imports</em> to arbitrary projects unless
they have been referenced explicitly in configuration. This avoids circular references / cycles.</li>
<li>It enables TypeScript to <em>process individual units</em>, instead of the entire repository as a whole.
Perfect for reducing CI and local development times.</li>
<li>It supports <em>incremental compilation</em>, so only out-of-date or affected projects are processed. The
more TypeScript&#x27;s cache is warmed, the faster it will be.</li>
<li>It simulates how types work in the Node.js package ecosystem.</li>
</ul>
<p>This all sounds amazing but there&#x27;s got to be some downsides right? Unfortunately, there is:</p>
<ul>
<li>Project references require generating declarations to resolve type information correctly. This
results in a lot of compilation artifacts littered throughout the repository. There
<a href="#gitignore">are ways</a> <a href="/docs/config/toolchain#routeoutdirtocache">around this</a>.</li>
<li>This approach is a bit involved and may require some cognitive overhead based on your current
level of TypeScript tooling knowledge.</li>
</ul>
<div class="theme-admonition theme-admonition-success admonition_WCGJ alert alert--success"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>success</div><div class="admonitionContent_pbrs"><p>If you&#x27;d like a real-world repository to reference, our
<a href="https://github.com/moonrepo/moon" target="_blank" rel="noopener noreferrer">moonrepo/moon</a>, <a href="https://github.com/moonrepo/dev" target="_blank" rel="noopener noreferrer">moonrepo/dev</a>,
and <a href="https://github.com/moonrepo/examples" target="_blank" rel="noopener noreferrer">moonrepo/examples</a> repositories utilizes this
architecture!</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="preface">Preface<a href="#preface" class="hash-link" aria-label="Direct link to Preface" title="Direct link to Preface">​</a></h2>
<p>Before you dive into this questionably long guide, we&#x27;d like to preface with:</p>
<ul>
<li>This guide is a living document and will continually be updated with best practices and frequently
asked questions. Keep returning to learn more!</li>
<li>This guide assumes a basic level knowledge of TypeScript and how it works.</li>
<li>The architecture outlined in this guide assumes that TypeScript is <em>only</em> used for typechecking
and <em>not</em> compiling. However, supporting compilation should be as easy as modifying a handful of
compiler options.</li>
<li>Although this guide exists within moon&#x27;s documentation, it <em>does not</em> require moon. We&#x27;ve kept all
implementation details generic enough for it be used in any repository, but have also included
many notes on how moon would improve this experience.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="configuration">Configuration<a href="#configuration" class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration">​</a></h2>
<p>The most complicated part of integrating TypeScript in a monorepo is a proper configuration setup.
Based on our extensive experience, we suggest the following architecture as a base! This <em>is not</em>
perfect and can most definitely be expanded upon or modified to fit your needs.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="root-level">Root-level<a href="#root-level" class="hash-link" aria-label="Direct link to Root-level" title="Direct link to Root-level">​</a></h3>
<p>In a polyrepo, the root <code>tsconfig.json</code> is typically the only configuration file, as it defines
common compiler options, and includes files to typecheck. In a monorepo, these responsibilities are
now split across multiple configuration files.</p>
<h4 class="anchor anchorWithStickyNavbar_JmGV" id="tsconfigjson"><code>tsconfig.json</code><a href="#tsconfigjson" class="hash-link" aria-label="Direct link to tsconfigjson" title="Direct link to tsconfigjson">​</a></h4>
<p>To start, the root <code>tsconfig.json</code> file is nothing more than a list of <em>all</em> projects in the
monorepo, with each project being an individual entry in the <code>references</code> field. Each entry must
contain a <code>path</code> field with a relative file system path to the project root (that contains their
config).</p>
<p>We also <em>do not</em> define compiler options in this file, as project-level configuration files would
<em>not</em> be able to extend this file, as it would trigger a circular reference. Instead, we define
common compiler options in a root <a href="#tsconfigoptionsjson"><code>tsconfig.options.json</code></a> file, that this
file also <code>extends</code> from.</p>
<p>In the end, this file should only contain 3 fields: <code>extends</code>, <code>files</code> (an empty list), and
<code>references</code>. This abides the
<a href="https://www.typescriptlang.org/docs/handbook/project-references.html#overall-structure" target="_blank" rel="noopener noreferrer">official guidance around structure</a>.</p>
<div class="language-json codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_t_Hd"><pre tabindex="0" class="prism-code language-json codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">&quot;extends&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">&quot;./tsconfig.options.json&quot;</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">&quot;files&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">&quot;references&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token property" style="color:#b7a9f9">&quot;path&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">&quot;apps/foo&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">}</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token property" style="color:#b7a9f9">&quot;path&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">&quot;packages/bar&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token comment" style="color:#97a1af;font-style:italic">// ... more</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">}</span><br></span></code></pre></div></div>
<blockquote>
<p>When using moon, the
<a href="/docs/config/toolchain#syncprojectreferences"><code>typescript.syncProjectReferences</code></a> setting will
keep this <code>references</code> list automatically in sync, and the name of the file can be customized with
<a href="/docs/config/toolchain#rootconfigfilename"><code>typescript.rootConfigFileName</code></a>.</p>
</blockquote>
<h4 class="anchor anchorWithStickyNavbar_JmGV" id="tsconfigoptionsjson"><code>tsconfig.options.json</code><a href="#tsconfigoptionsjson" class="hash-link" aria-label="Direct link to tsconfigoptionsjson" title="Direct link to tsconfigoptionsjson">​</a></h4>
<p>This file will contain common compiler options that will be inherited by <em>all</em> projects in the
monorepo. For project references to work correctly, the following settings <em>must</em> be enabled at the
root, and typically should not be disabled in each project.</p>
<ul>
<li><code>composite</code> - Enables project references and informs the TypeScript program where to find
referenced outputs.</li>
<li><code>declaration</code> - Project references rely on the compiled declarations (<code>.d.ts</code>) of external
projects. If declarations do not exist, TypeScript will generate them on demand.</li>
<li><code>declarationMap</code> - Generate sourcemaps for declarations, so that language server integrations in
editors like &quot;Go to&quot; resolve correctly.</li>
<li><code>incremental</code> - Enables incremental compilation, greatly improving performance.</li>
<li><code>noEmitOnError</code> - If the typechecker fails, avoid generating invalid or partial declarations.</li>
<li><code>skipLibCheck</code> - Avoids eager loading and analyzing all declarations, greatly improving
performance.</li>
</ul>
<p>Furthermore, we have 2 settings that should be enabled <em>per project</em>, depending on the project type.</p>
<ul>
<li><code>emitDeclarationOnly</code> - For packages: Emit declarations, as they&#x27;re required for references, but
avoid compiling to JavaScript.</li>
<li><code>noEmit</code> - For applications: Don&#x27;t emit declarations, as others <em>should not</em> be depending on the
project.</li>
</ul>
<p>For convenience, we provide the
<a href="https://github.com/moonrepo/dev/tree/master/packages/tsconfig" target="_blank" rel="noopener noreferrer"><code>tsconfig-moon</code></a> package, which
defines common compiler options and may be used here.</p>
<div class="language-json codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_t_Hd"><pre tabindex="0" class="prism-code language-json codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">&quot;compilerOptions&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token property" style="color:#b7a9f9">&quot;composite&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token boolean" style="color:#94dded">true</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token property" style="color:#b7a9f9">&quot;declaration&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token boolean" style="color:#94dded">true</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token property" style="color:#b7a9f9">&quot;declarationMap&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token boolean" style="color:#94dded">true</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token property" style="color:#b7a9f9">&quot;emitDeclarationOnly&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token boolean" style="color:#94dded">true</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token property" style="color:#b7a9f9">&quot;incremental&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token boolean" style="color:#94dded">true</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token property" style="color:#b7a9f9">&quot;noEmitOnError&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token boolean" style="color:#94dded">true</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token property" style="color:#b7a9f9">&quot;skipLibCheck&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token boolean" style="color:#94dded">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token comment" style="color:#97a1af;font-style:italic">// ... others</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token punctuation" style="color:#cad4e2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">}</span><br></span></code></pre></div></div>
<blockquote>
<p>When using moon, the name of the file can be customized with
<a href="/docs/config/toolchain#rootoptionsconfigfilename"><code>typescript.rootOptionsConfigFileName</code></a>.</p>
</blockquote>
<h5 class="anchor anchorWithStickyNavbar_JmGV" id="ecmascript-interoperability">ECMAScript interoperability<a href="#ecmascript-interoperability" class="hash-link" aria-label="Direct link to ECMAScript interoperability" title="Direct link to ECMAScript interoperability">​</a></h5>
<p>ECMAScript modules (ESM) have been around for quite a while now, but the default TypeScript settings
are not configured for them. We suggest the following compiler options if you want proper ESM
support with interoperability with the ecosystem.</p>
<div class="language-json codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_t_Hd"><pre tabindex="0" class="prism-code language-json codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">&quot;compilerOptions&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token property" style="color:#b7a9f9">&quot;allowSyntheticDefaultImports&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token boolean" style="color:#94dded">true</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token property" style="color:#b7a9f9">&quot;esModuleInterop&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token boolean" style="color:#94dded">true</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token property" style="color:#b7a9f9">&quot;isolatedModules&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token boolean" style="color:#94dded">true</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token property" style="color:#b7a9f9">&quot;module&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">&quot;esnext&quot;</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token property" style="color:#b7a9f9">&quot;moduleResolution&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">&quot;bundler&quot;</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token property" style="color:#b7a9f9">&quot;strict&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token boolean" style="color:#94dded">true</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token property" style="color:#b7a9f9">&quot;target&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">&quot;esnext&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token comment" style="color:#97a1af;font-style:italic">// ... others</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token punctuation" style="color:#cad4e2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_JmGV" id="gitignore"><code>.gitignore</code><a href="#gitignore" class="hash-link" aria-label="Direct link to gitignore" title="Direct link to gitignore">​</a></h4>
<p>Project references unfortunately generate <em>a ton</em> of artifacts that typically shouldn&#x27;t be committed
to the repository (but could be if you so choose). We suggest ignoring the following:</p>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_kY6l">.gitignore</div><div class="codeBlockContent_t_Hd"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token comment" style="color:#97a1af;font-style:italic"># The `outDir` for declarations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">lib/</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token comment" style="color:#97a1af;font-style:italic"># Build cache manifests</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">*.tsbuildinfo</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="project-level">Project-level<a href="#project-level" class="hash-link" aria-label="Direct link to Project-level" title="Direct link to Project-level">​</a></h3>
<p>Each project that contains TypeScript files and will utilize the typechecker <em>must</em> contain a
<code>tsconfig.json</code> in the project root, typically as a sibling to <code>package.json</code>.</p>
<h4 class="anchor anchorWithStickyNavbar_JmGV" id="tsconfigjson-1"><code>tsconfig.json</code><a href="#tsconfigjson-1" class="hash-link" aria-label="Direct link to tsconfigjson-1" title="Direct link to tsconfigjson-1">​</a></h4>
<p>A <code>tsconfig.json</code> in the root of a project (application or package) is required, as it informs
TypeScript that this is a project, and that it can be referenced by other projects. In its simplest
form, this file should extend the root <a href="#tsconfigoptionsjson"><code>tsconfig.options.json</code></a> to inherit
common compiler options, define its own compiler options (below), define includes/excludes, and any
necessary references.</p>
<blockquote>
<p>When using moon, the name of the file can be customized with
<a href="/docs/config/toolchain#projectconfigfilename"><code>typescript.projectConfigFileName</code></a>.</p>
</blockquote>
<div class="tabs-container tabList_J5MA"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_l0OV tabs__item--active">Applications</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_l0OV">Packages</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_wHwb"><p>For applications, declaration emitting can be disabled, since external projects <em>should not</em> be
importing files from an application. If this use case ever arises, move those files into a package.</p><div class="language-json codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_kY6l">apps/foo/tsconfig.json</div><div class="codeBlockContent_t_Hd"><pre tabindex="0" class="prism-code language-json codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">&quot;extends&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">&quot;../../../../tsconfig.options.json&quot;</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">&quot;compilerOptions&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token property" style="color:#b7a9f9">&quot;noEmit&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token boolean" style="color:#94dded">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token punctuation" style="color:#cad4e2">}</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">&quot;include&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">&quot;references&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">}</span><br></span></code></pre></div></div></div><div role="tabpanel" class="tabItem_wHwb" hidden=""><p>For packages, we must define the location in which to generate declarations. These are the
declarations that external projects would reference. This location is typically
<a href="#gitignore">gitignored</a>!</p><div class="language-json codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_kY6l">packages/bar/tsconfig.json</div><div class="codeBlockContent_t_Hd"><pre tabindex="0" class="prism-code language-json codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">&quot;extends&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">&quot;../../../../tsconfig.options.json&quot;</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">&quot;compilerOptions&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token property" style="color:#b7a9f9">&quot;emitDeclarationOnly&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token boolean" style="color:#94dded">true</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token property" style="color:#b7a9f9">&quot;outDir&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">&quot;./lib&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token punctuation" style="color:#cad4e2">}</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">&quot;include&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">&quot;references&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">}</span><br></span></code></pre></div></div></div></div></div>
<blockquote>
<p>When using moon, the <code>outDir</code> can automatically be re-routed to a shared cache using
<a href="/docs/config/toolchain#routeoutdirtocache"><code>typescript.routeOutDirToCache</code></a>, to avoid littering
the repository with compilation artifacts.</p>
</blockquote>
<h5 class="anchor anchorWithStickyNavbar_JmGV" id="includes-and-excludes">Includes and excludes<a href="#includes-and-excludes" class="hash-link" aria-label="Direct link to Includes and excludes" title="Direct link to Includes and excludes">​</a></h5>
<p>Based on experience, we suggest defining <code>include</code> instead of <code>exclude</code>, as managing a whitelist of
typecheckable files is much easier. When dealing with excludes, there are far too many
possibilities. To start, you have <code>node_modules</code>, and for applications maybe <code>dist</code>, <code>build</code>,
<code>.next</code>, or another application specific folder, and then for packages you may have <code>lib</code>, <code>cjs</code>,
<code>esm</code>, etc. It becomes very... tedious.</p>
<p>The other benefit of using <code>include</code> is that it forces TypeScript to only load <em>what&#x27;s necessary</em>,
instead of eager loading everything into memory, and for typechecking files that aren&#x27;t part of
source, like configuration.</p>
<div class="language-json codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_kY6l">&lt;project&gt;/tsconfig.json</div><div class="codeBlockContent_t_Hd"><pre tabindex="0" class="prism-code language-json codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token comment" style="color:#97a1af;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">&quot;include&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token string" style="color:#c9e166">&quot;src/**/*&quot;</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">&quot;tests/**/*&quot;</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">&quot;*.js&quot;</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">&quot;*.ts&quot;</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">}</span><br></span></code></pre></div></div>
<h5 class="anchor anchorWithStickyNavbar_JmGV" id="depending-on-other-projects">Depending on other projects<a href="#depending-on-other-projects" class="hash-link" aria-label="Direct link to Depending on other projects" title="Direct link to Depending on other projects">​</a></h5>
<p>When a project depends on another project (by importing code from it), either using relative paths,
<a href="#using-paths-aliases">path aliases</a>, or its <code>package.json</code> name, it must be declared as a
reference. If not declared, TypeScript will error with a message about importing outside the project
boundary.</p>
<div class="language-json codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_kY6l">&lt;project&gt;/tsconfig.json</div><div class="codeBlockContent_t_Hd"><pre tabindex="0" class="prism-code language-json codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token comment" style="color:#97a1af;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">&quot;references&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token property" style="color:#b7a9f9">&quot;path&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">&quot;../../foo&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">}</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token property" style="color:#b7a9f9">&quot;path&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">&quot;../../bar&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">}</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token property" style="color:#b7a9f9">&quot;path&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">&quot;../../../../baz&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">}</span><br></span></code></pre></div></div>
<p>To make use of editor intellisense and auto-imports of deeply nested files, you&#x27;ll most likely need
to add includes for referenced projects as well.</p>
<div class="language-json codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_kY6l">&lt;project&gt;/tsconfig.json</div><div class="codeBlockContent_t_Hd"><pre tabindex="0" class="prism-code language-json codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token comment" style="color:#97a1af;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">&quot;include&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token comment" style="color:#97a1af;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token string" style="color:#c9e166">&quot;src/**/*&quot;</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token string" style="color:#c9e166">&quot;../../foo/src/**/*&quot;</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token string" style="color:#c9e166">&quot;../../bar/src/**/*&quot;</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token string" style="color:#c9e166">&quot;../../../../baz/src/**/*&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">}</span><br></span></code></pre></div></div>
<blockquote>
<p>When using moon, the
<a href="/docs/config/toolchain#syncprojectreferences"><code>typescript.syncProjectReferences</code></a> setting will
keep this <code>references</code> list automatically in sync, and
<a href="/docs/config/toolchain#syncprojectreferences"><code>typescript.includeProjectReferenceSources</code></a> for
<code>include</code>.</p>
</blockquote>
<h4 class="anchor anchorWithStickyNavbar_JmGV" id="tsconfigjson-2"><code>tsconfig.*.json</code><a href="#tsconfigjson-2" class="hash-link" aria-label="Direct link to tsconfigjson-2" title="Direct link to tsconfigjson-2">​</a></h4>
<p>Additional configurations may exist in a project that serve a role outside of typechecking, with one
such role being <em>npm package publishing</em>. These configs are sometimes named <code>tsconfig.build.json</code>,
<code>tsconfig.types.json</code>, or <code>tsconfig.lib.json</code>. Regardless of what they&#x27;re called, these configs are
<em>optional</em>, so unless you have a business need for them, you may skip this section.</p>
<h5 class="anchor anchorWithStickyNavbar_JmGV" id="package-publishing">Package publishing<a href="#package-publishing" class="hash-link" aria-label="Direct link to Package publishing" title="Direct link to Package publishing">​</a></h5>
<p>As mentioned previously, these configs may be used for npm packages, primarily for generating
TypeScript declarations that are mapped through the <code>package.json</code>
<a href="https://www.typescriptlang.org/docs/handbook/declaration-files/publishing.html" target="_blank" rel="noopener noreferrer"><code>types</code> (or <code>typings</code>) field</a>.</p>
<p>Given this <code>package.json</code>...</p>
<div class="language-json codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_kY6l">&lt;project&gt;/package.json</div><div class="codeBlockContent_t_Hd"><pre tabindex="0" class="prism-code language-json codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token comment" style="color:#97a1af;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">&quot;types&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">&quot;./lib/index.d.ts&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">}</span><br></span></code></pre></div></div>
<p>Our <code>tsconfig.build.json</code> may look like...</p>
<div class="language-json codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_kY6l">&lt;project&gt;/tsconfig.build.json</div><div class="codeBlockContent_t_Hd"><pre tabindex="0" class="prism-code language-json codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">&quot;extends&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">&quot;../../../../tsconfig.options.json&quot;</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">&quot;compilerOptions&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token property" style="color:#b7a9f9">&quot;outDir&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">&quot;lib&quot;</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token property" style="color:#b7a9f9">&quot;rootDir&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">&quot;src&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token punctuation" style="color:#cad4e2">}</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">&quot;include&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token string" style="color:#c9e166">&quot;src/**/*&quot;</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">}</span><br></span></code></pre></div></div>
<p>Simple right? But why do we need an additional configuration? Why not use the other <code>tsconfig.json</code>?
Great questions! The major reason is that we <em>only want to publish declarations for source files</em>,
and the declarations file structure should match 1:1 with the sources structure. The <code>tsconfig.json</code>
<em>does not</em> guarantee this, as it may include test, config, or arbitrary files, all of which may not
exist in the sources directory (<code>src</code>), and will alter the output to an incorrect directory
structure. Our <code>tsconfig.build.json</code> solves this problem by only including source files, and by
forcing the source root to <code>src</code> using the <code>rootDir</code> compiler option.</p>
<p>However, there is a giant caveat with this approach! Because TypeScript utilizes Node.js&#x27;s module
resolution, it will reference the declarations defined by the <code>package.json</code> <code>types</code> or
<a href="#supporting-packagejson-exports"><code>exports</code></a> fields, instead of the <code>outDir</code> compiler option, and
the other <code>tsconfig.json</code> <em>does not guarantee</em> these files will exist. This results in TypeScript
failing to find the appropriate types! To solve this, add the <code>tsconfig.build.json</code> as a project
reference to <code>tsconfig.json</code>.</p>
<div class="language-json codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_kY6l">&lt;project&gt;/tsconfig.json</div><div class="codeBlockContent_t_Hd"><pre tabindex="0" class="prism-code language-json codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token comment" style="color:#97a1af;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">&quot;references&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token property" style="color:#b7a9f9">&quot;path&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">&quot;./tsconfig.build.json&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token comment" style="color:#97a1af;font-style:italic">// ... others</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">}</span><br></span></code></pre></div></div>
<h5 class="anchor anchorWithStickyNavbar_JmGV" id="vendor-specific">Vendor specific<a href="#vendor-specific" class="hash-link" aria-label="Direct link to Vendor specific" title="Direct link to Vendor specific">​</a></h5>
<p>Some vendors, like <a href="/docs/guides/examples/vite">Vite</a>, <a href="/docs/guides/examples/vite">Vitest</a>, and
<a href="/docs/guides/examples/astro">Astro</a> may include additional <code>tsconfig.*.json</code> files unique to their ecosystem.
We suggest following their guidelines and implementation when applicable.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="running-the-typechecker">Running the typechecker<a href="#running-the-typechecker" class="hash-link" aria-label="Direct link to Running the typechecker" title="Direct link to Running the typechecker">​</a></h2>
<p>Now that our configuration is place, we can run the typechecker, or attempt to at least! This can be
done with the <code>tsc --build</code> command, which acts as a
<a href="https://www.typescriptlang.org/docs/handbook/project-references.html#build-mode-for-typescript" target="_blank" rel="noopener noreferrer">build orchestrator</a>.
We also suggest passing <code>--verbose</code> for insights into what projects are compiling, and which are
out-of-date.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="on-all-projects">On all projects<a href="#on-all-projects" class="hash-link" aria-label="Direct link to On all projects" title="Direct link to On all projects">​</a></h3>
<p>From the root of the repository, run <code>tsc --build --verbose</code> to typecheck <em>all</em> projects, as defined
in <a href="#tsconfigjson">tsconfig.json</a>. TypeScript will generate a directed acyclic graph (DAG) and
compile projects <em>in order</em> so that dependencies and references are resolved correctly.</p>
<div class="theme-admonition theme-admonition-info admonition_WCGJ alert alert--info"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_pbrs"><p>Why run TypeScript in the root? Typically you would only want to run against projects, but for
situations where you need to verify that all projects still work, running in the root is the best
approach. Some such situations are upgrading TypeScript itself, upgrading global <code>@types</code> packages,
updating shared types, reworking build processes, and more.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="on-an-individual-project">On an individual project<a href="#on-an-individual-project" class="hash-link" aria-label="Direct link to On an individual project" title="Direct link to On an individual project">​</a></h3>
<p>To only typecheck a single project (and its dependencies), there are 2 approaches. The first is to
run from the root, and pass a relative path to the project, such as
<code>tsc --build --verbose packages/foo</code>. The second is to change the working directory to the project,
and run from there, such as <code>cd packages/foo &amp;&amp; tsc --build --verbose</code>.</p>
<p>Both approaches are viable, and either may be used based on your tooling, build system, task runner,
so on and so forth. This is the approach moon suggests with its
<a href="/docs/guides/examples/typescript"><code>typecheck</code> task</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="on-affected-projects">On affected projects<a href="#on-affected-projects" class="hash-link" aria-label="Direct link to On affected projects" title="Direct link to On affected projects">​</a></h3>
<p>In CI environments, it&#x27;s nice to <em>only run</em> the typechecker on affected projects — projects that
have changed files. While this isn&#x27;t entirely possible with <code>tsc</code>, it is possible with moon! Head
over to the
<a href="/docs/run-task#running-based-on-affected-files-only">official docs for more information</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="using-paths-aliases">Using <code>paths</code> aliases<a href="#using-paths-aliases" class="hash-link" aria-label="Direct link to using-paths-aliases" title="Direct link to using-paths-aliases">​</a></h2>
<p>Path aliases, also known as path mapping or magic imports, is the concept of defining an import
alias that re-maps its underlying location on the file system. In TypeScript, this is achieved with
the
<a href="https://www.typescriptlang.org/docs/handbook/module-resolution.html#path-mapping" target="_blank" rel="noopener noreferrer"><code>paths</code> compiler option</a>.</p>
<p>In a monorepo world, we suggest using path aliases on a per-project basis, instead of defining them
&quot;globally&quot; in the root. This gives projects full control of what&#x27;s available and what they want to
import, and also plays nice with the mandatory <code>baseUrl</code> compiler option.</p>
<div class="language-json codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_kY6l">&lt;project&gt;/tsconfig.json</div><div class="codeBlockContent_t_Hd"><pre tabindex="0" class="prism-code language-json codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token comment" style="color:#97a1af;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">&quot;compilerOptions&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token comment" style="color:#97a1af;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token property" style="color:#b7a9f9">&quot;baseUrl&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">&quot;.&quot;</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token property" style="color:#b7a9f9">&quot;paths&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token comment" style="color:#97a1af;font-style:italic">// Within the project</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token property" style="color:#b7a9f9">&quot;:components/*&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token string" style="color:#c9e166">&quot;./src/components/*&quot;</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token comment" style="color:#97a1af;font-style:italic">// To a referenced project</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token property" style="color:#b7a9f9">&quot;:shared/*&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token string" style="color:#c9e166">&quot;../../shared/code/*&quot;</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token punctuation" style="color:#cad4e2">}</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">&quot;references&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token property" style="color:#b7a9f9">&quot;path&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">&quot;../../shared/code&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">}</span><br></span></code></pre></div></div>
<p>The above aliases would be imported like the following:</p>
<div class="language-ts codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_t_Hd"><pre tabindex="0" class="prism-code language-ts codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token comment" style="color:#97a1af;font-style:italic">// Before</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token keyword module" style="color:#b7a9f9">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#cad4e2">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Button</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#cad4e2">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#b7a9f9">from</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">&#x27;../../../../components/Button&#x27;</span><span class="token punctuation" style="color:#cad4e2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token keyword module" style="color:#b7a9f9">import</span><span class="token plain"> </span><span class="token imports">utils</span><span class="token plain"> </span><span class="token keyword module" style="color:#b7a9f9">from</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">&#x27;../../shared/code/utils&#x27;</span><span class="token punctuation" style="color:#cad4e2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token comment" style="color:#97a1af;font-style:italic">// After</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token keyword module" style="color:#b7a9f9">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#cad4e2">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Button</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#cad4e2">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#b7a9f9">from</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">&#x27;:components/Button&#x27;</span><span class="token punctuation" style="color:#cad4e2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token keyword module" style="color:#b7a9f9">import</span><span class="token plain"> </span><span class="token imports">utils</span><span class="token plain"> </span><span class="token keyword module" style="color:#b7a9f9">from</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">&#x27;:shared/utils&#x27;</span><span class="token punctuation" style="color:#cad4e2">;</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-info admonition_WCGJ alert alert--info"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_pbrs"><p>When using path aliases, we suggest prefixing or suffixing the alias with <code>:</code> so that it&#x27;s apparent
that it&#x27;s an alias (this also matches the new <code>node:</code> import syntax). Using no special character or
<code>@</code> is problematic as it risks a chance of collision with a public npm package and may accidentally
open your repository to a
<a href="https://snyk.io/blog/npm-security-preventing-supply-chain-attacks/" target="_blank" rel="noopener noreferrer">supply chain attack</a>. Other
characters like <code>~</code> and <code>$</code> have an existing meaning in the ecosystem, so it&#x27;s best to avoid them
aswell.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="importing-source-files-from-local-packages">Importing source files from local packages<a href="#importing-source-files-from-local-packages" class="hash-link" aria-label="Direct link to Importing source files from local packages" title="Direct link to Importing source files from local packages">​</a></h3>
<p>If you are importing from a project reference using a <code>package.json</code> name, then TypeScript will
abide by Node.js module resolution logic, and will import using the
<a href="https://nodejs.org/api/packages.html#package-entry-points" target="_blank" rel="noopener noreferrer"><code>main</code>/<code>types</code> or <code>exports</code> entry points</a>.
This means that you&#x27;re importing <em>compiled code</em> instead of source code, and will require the
package to be constantly rebuilt if changes are made to it.</p>
<p>However, why not simply import source files instead? With path aliases, you can do just that, by
defining a <code>paths</code> alias that maps the <code>package.json</code> name to its source files, like so.</p>
<div class="language-json codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_kY6l">&lt;project&gt;/tsconfig.json</div><div class="codeBlockContent_t_Hd"><pre tabindex="0" class="prism-code language-json codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token comment" style="color:#97a1af;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">&quot;compilerOptions&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token comment" style="color:#97a1af;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token property" style="color:#b7a9f9">&quot;paths&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token comment" style="color:#97a1af;font-style:italic">// Index import</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token property" style="color:#b7a9f9">&quot;@scope/name&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token string" style="color:#c9e166">&quot;../../shared/package/src/index.ts&quot;</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token comment" style="color:#97a1af;font-style:italic">// Deep imports</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token property" style="color:#b7a9f9">&quot;@scope/name/*&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token string" style="color:#c9e166">&quot;../../shared/package/src/*&quot;</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token punctuation" style="color:#cad4e2">}</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">&quot;references&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token property" style="color:#b7a9f9">&quot;path&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">&quot;../../shared/package&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">}</span><br></span></code></pre></div></div>
<blockquote>
<p>When using moon, the
<a href="/docs/config/toolchain#syncprojectreferencestopaths"><code>typescript.syncProjectReferencesToPaths</code></a>
setting will automatically create <code>paths</code> based on the local references.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="sharing-and-augmenting-types">Sharing and augmenting types<a href="#sharing-and-augmenting-types" class="hash-link" aria-label="Direct link to Sharing and augmenting types" title="Direct link to Sharing and augmenting types">​</a></h2>
<p>Declaring global types, augmenting node modules, and sharing reusable types is a common practice.
There are many ways to achieve this, so choose what works best for your repository. We use the
following pattern with great success.</p>
<p>At the root of the repository, create a <code>types</code> folder as a sibling to <code>tsconfig.json</code>. This folder
<em>must only</em> contain declarations (<code>.d.ts</code>) files for the following reasons:</p>
<ul>
<li>Declarations can be <code>include</code>ed in a project without having to be a project reference.</li>
<li>Hard-coded declarations <em>do not</em> need to be compiled from TypeScript files.</li>
</ul>
<p>Based on the above, update your project&#x27;s <code>tsconfig.json</code> to include all of these types, or just
some of these types.</p>
<div class="language-json codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_kY6l">&lt;project&gt;/tsconfig.json</div><div class="codeBlockContent_t_Hd"><pre tabindex="0" class="prism-code language-json codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token comment" style="color:#97a1af;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">&quot;include&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token string" style="color:#c9e166">&quot;src/**/*&quot;</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">&quot;../../../../types/**/*&quot;</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">}</span><br></span></code></pre></div></div>
<blockquote>
<p>In the future, moon will provide a setting to automate this workflow!</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="supporting-packagejson-exports">Supporting <code>package.json</code> exports<a href="#supporting-packagejson-exports" class="hash-link" aria-label="Direct link to supporting-packagejson-exports" title="Direct link to supporting-packagejson-exports">​</a></h2>
<p>In Node.js v12, they introduced a new field to <code>package.json</code> called <code>exports</code> that aims to solve
the shortcomings of the <code>main</code> field. The <code>exports</code> field is very complicated, and instead of
repeating all of its implementation details, we suggest reading
<a href="https://nodejs.org/api/packages.html#package-entry-points" target="_blank" rel="noopener noreferrer">the official Node.js docs on this topic</a>.</p>
<p>With that being said, TypeScript completely ignored the <code>exports</code> field until
<a href="https://devblogs.microsoft.com/typescript/announcing-typescript-4-7/#esm-nodejs" target="_blank" rel="noopener noreferrer">v4.7</a>, and
respecting <code>exports</code> is <em>still ignored unless</em> the <code>moduleResolution</code> compiler option is set to
&quot;nodenext&quot;, &quot;node16&quot;, or &quot;bundler&quot;. If <code>moduleResolution</code> is set to &quot;node&quot;, then your integration is
resolving based on the <code>main</code> and <code>types</code> field, which are basically &quot;legacy&quot;.</p>
<div class="theme-admonition theme-admonition-warning admonition_WCGJ alert alert--warning"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_pbrs"><p>Enabling <code>package.json</code> imports/exports resolution is very complicated, and may be very tedious,
especially considering the state of the npm ecosystem. Proceed with caution!</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="state-of-the-npm-ecosystem">State of the npm ecosystem<a href="#state-of-the-npm-ecosystem" class="hash-link" aria-label="Direct link to State of the npm ecosystem" title="Direct link to State of the npm ecosystem">​</a></h3>
<p>As mentioned above, the npm ecosystem (as of November 2022) is in a very fragile state in regards to
imports/exports. Based on our experience attempting to utilize them in a monorepo, we ran into an
array of problems, some of which are:</p>
<ul>
<li>Published packages are simply utilizing imports/exports incorrectly. The semantics around CJS/ESM
are very strict, and they may be configured wrong. This is exacerbated by the new <code>type</code> field.</li>
<li>The <code>exports</code> field <em>overrides</em> the <code>main</code> and <code>types</code> fields. If <code>exports</code> exists without type
conditions, but the <code>types</code> field exists, the <code>types</code> entry point is completely ignored, resulting
in TypeScript failures.</li>
</ul>
<p>With that being said, there are <a href="#resolving-issues">ways around this</a> and moving forward is
possible, if you dare!</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="enabling-importsexports-resolution">Enabling imports/exports resolution<a href="#enabling-importsexports-resolution" class="hash-link" aria-label="Direct link to Enabling imports/exports resolution" title="Direct link to Enabling imports/exports resolution">​</a></h3>
<p>To start, set the <code>moduleResolution</code> compiler option to &quot;nodenext&quot; (for packages) or &quot;bundler&quot; (for
apps) in the <a href="#tsconfigoptionsjson"><code>tsconfig.options.json</code></a> file.</p>
<div class="language-json codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_t_Hd"><pre tabindex="0" class="prism-code language-json codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">&quot;compilerOptions&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token comment" style="color:#97a1af;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token property" style="color:#b7a9f9">&quot;moduleResolution&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">&quot;nodenext&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token punctuation" style="color:#cad4e2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">}</span><br></span></code></pre></div></div>
<p>Next, <a href="#on-all-projects">run the typechecker from the root</a> against all projects. This will help
uncover all potential issues with the dependencies you&#x27;re using or the current configuration
architecture. If no errors are found, well <em>congratulations</em>, otherwise jump to the next section for
more information on <a href="#resolving-issues">resolving them</a>.</p>
<p>If you&#x27;re trying to use <code>exports</code> in your own packages, ensure that the <code>types</code> condition is set,
and it&#x27;s the first condition in the mapping! We also suggest including <code>main</code> and the top-level
<code>types</code> for tooling that do not support <code>exports</code> yet.</p>
<div class="language-json codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_kY6l">package.json</div><div class="codeBlockContent_t_Hd"><pre tabindex="0" class="prism-code language-json codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token comment" style="color:#97a1af;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">&quot;main&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">&quot;./lib/index.js&quot;</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">&quot;types&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">&quot;./lib/index.d.ts&quot;</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">&quot;exports&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token property" style="color:#b7a9f9">&quot;./package.json&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">&quot;./package.json&quot;</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token property" style="color:#b7a9f9">&quot;.&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token property" style="color:#b7a9f9">&quot;types&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">&quot;./lib/index.d.ts&quot;</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token property" style="color:#b7a9f9">&quot;node&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">&quot;./lib/index.js&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token punctuation" style="color:#cad4e2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">}</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-info admonition_WCGJ alert alert--info"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_pbrs"><p>Managing <code>exports</code> is non-trivial. If you&#x27;d prefer them to be automatically generated based on a set
of inputs, we suggest using <a href="https://packemon.dev/" target="_blank" rel="noopener noreferrer">Packemon</a>!</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="resolving-issues">Resolving issues<a href="#resolving-issues" class="hash-link" aria-label="Direct link to Resolving issues" title="Direct link to Resolving issues">​</a></h3>
<p>There&#x27;s only one way to resolve issues around incorrectly published <code>exports</code>, and that is package
patching, either with <a href="https://yarnpkg.com/features/protocols/#patch" target="_blank" rel="noopener noreferrer">Yarn&#x27;s patching feature</a>,
<a href="https://pnpm.io/cli/patch" target="_blank" rel="noopener noreferrer">pnpm&#x27;s patching feature</a>, or the
<a href="https://www.npmjs.com/package/patch-package" target="_blank" rel="noopener noreferrer"><code>patch-package</code> package</a>. With patching, you can:</p>
<ul>
<li>Inject the <code>types</code> condition/field if it&#x27;s missing.</li>
<li>Re-structure the <code>exports</code> mapping if it&#x27;s incorrect.</li>
<li>Fix incorrect entry point paths.</li>
<li>And even fix invalid TypeScript declarations or JavaScript code!</li>
</ul>
<div class="language-diff codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_kY6l">package.json</div><div class="codeBlockContent_t_Hd"><pre tabindex="0" class="prism-code language-diff codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token plain">{</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> &quot;main&quot;: &quot;./lib/index.js&quot;,</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> &quot;types&quot;: &quot;./lib/index.d.ts&quot;,</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> &quot;exports&quot;: {</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   &quot;./package.json&quot;: &quot;./package.json&quot;,</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style="color:#ff7c89">-</span><span class="token deleted-sign deleted line" style="color:#ff7c89">    &quot;.&quot;: &quot;./lib/index.js&quot;</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token deleted-sign deleted line" style="color:#ff7c89"></span><span class="token inserted-sign inserted prefix inserted" style="color:#b7d733">+</span><span class="token inserted-sign inserted line" style="color:#b7d733">    &quot;.&quot;: {</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token inserted-sign inserted line" style="color:#b7d733"></span><span class="token inserted-sign inserted prefix inserted" style="color:#b7d733">+</span><span class="token inserted-sign inserted line" style="color:#b7d733">      &quot;types&quot;: &quot;./lib/index.d.ts&quot;,</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token inserted-sign inserted line" style="color:#b7d733"></span><span class="token inserted-sign inserted prefix inserted" style="color:#b7d733">+</span><span class="token inserted-sign inserted line" style="color:#b7d733">      &quot;node&quot;: &quot;./lib/index.js&quot;</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token inserted-sign inserted line" style="color:#b7d733"></span><span class="token inserted-sign inserted prefix inserted" style="color:#b7d733">+</span><span class="token inserted-sign inserted line" style="color:#b7d733">    }</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token inserted-sign inserted line" style="color:#b7d733"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> }</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token unchanged line"></span><span class="token plain">}</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-info admonition_WCGJ alert alert--info"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_pbrs"><p>More often than not, the owners of these packages may be unaware that their <code>exports</code> mapping is
incorrect. Why not be a good member of the community and report an issue or even submit a pull
request?</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="editor-integration">Editor integration<a href="#editor-integration" class="hash-link" aria-label="Direct link to Editor integration" title="Direct link to Editor integration">​</a></h2>
<p>Unfortunately, we only have experience with VS Code. If you prefer another editor and have guidance
you&#x27;d like to share with the community, feel free to submit a pull request and we&#x27;ll include it
below!</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="vs-code">VS Code<a href="#vs-code" class="hash-link" aria-label="Direct link to VS Code" title="Direct link to VS Code">​</a></h3>
<p><a href="https://code.visualstudio.com/" target="_blank" rel="noopener noreferrer">VS Code</a> has first-class support for TypeScript and project
references, and should &quot;just work&quot; without any configuration. You can verify this by restarting the
TypeScript server in VS Code (with the <kbd>cmd + shift + p</kbd> command palette) and navigating to
each project. Pay attention to the status bar at the bottom, as you&#x27;ll see this:</p>
<div style="margin-bottom:1rem;margin-top:1rem;text-align:center"><img src="/assets/images/vscode-status-1c68ec4790b8766b34a5e91cba1231d7.png" width="350px" alt="" class="inline-block"></div>
<p>When this status appears, it means that VS Code is <em>compiling a project</em>. It will re-appear multiple
times, basically for each project, instead of once for the entire repository.</p>
<p>Furthermore, ensure that VS Code is using the version of TypeScript from the <code>typescript</code> package in
<code>node_modules</code>. Relying on the version that ships with VS Code may result in unexpected TypeScript
failures.</p>
<div class="language-json codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_kY6l">.vscode/settings.json</div><div class="codeBlockContent_t_Hd"><pre tabindex="0" class="prism-code language-json codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">&quot;typescript.tsdk&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">&quot;node_modules/typescript/lib&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token comment" style="color:#97a1af;font-style:italic">// Or &quot;Select TypeScript version&quot; from the command palette</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="faq">FAQ<a href="#faq" class="hash-link" aria-label="Direct link to FAQ" title="Direct link to FAQ">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="i-still-have-questions-where-can-i-ask-them">I still have questions, where can I ask them?<a href="#i-still-have-questions-where-can-i-ask-them" class="hash-link" aria-label="Direct link to I still have questions, where can I ask them?" title="Direct link to I still have questions, where can I ask them?">​</a></h3>
<p>We&#x27;d love to answer your questions and help anyway that we can. Feel free to...</p>
<ul>
<li>Join the <a href="https://discord.gg/qCh9MEynv2" target="_blank" rel="noopener noreferrer">moonrepo discord</a> and post your question in the
<code>#typescript</code> channel.</li>
<li>Ping me, <a href="https://twitter.com/mileswjohnson" target="_blank" rel="noopener noreferrer">Miles Johnson</a>, on Twitter. I&#x27;ll try my best to
respond to every tweet.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="do-i-have-to-use-project-references">Do I have to use project references?<a href="#do-i-have-to-use-project-references" class="hash-link" aria-label="Direct link to Do I have to use project references?" title="Direct link to Do I have to use project references?">​</a></h3>
<p>Short answer, no. If you have less than say 10 projects, references may be overkill. If your
repository is primarily an application, but then has a handful of shared npm packages, references
may also be unnecessary here. In the end, it really depends on how many projects exist in the
monorepo, and what your team/company is comfortable with.</p>
<p>However, we do suggest using project references for very large monorepos (think 100s of projects),
or repositories with a large number of contributors, or if you merely want to reduce CI typechecking
times.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="what-about-not-using-project-references-and-only-using-source-files">What about not using project references and only using source files?<a href="#what-about-not-using-project-references-and-only-using-source-files" class="hash-link" aria-label="Direct link to What about not using project references and only using source files?" title="Direct link to What about not using project references and only using source files?">​</a></h3>
<p>A popular alternative to project references is to simply use the source files as-is, by updating the
<code>main</code> and <code>types</code> entry fields within each <code>package.json</code> to point to the original TypeScript
files. This approach is also known as &quot;internal packages&quot;.</p>
<div class="language-json codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_kY6l">package.json</div><div class="codeBlockContent_t_Hd"><pre tabindex="0" class="prism-code language-json codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token comment" style="color:#97a1af;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">&quot;main&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">&quot;./src/index.tsx&quot;</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">&quot;types&quot;</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">&quot;./src/index.tsx&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">}</span><br></span></code></pre></div></div>
<p>While this <em>works</em>, there are some downsides to this approach.</p>
<ul>
<li>Loading declaration files are much faster than source files.</li>
<li>You&#x27;ll lose all the benefits of TypeScript&#x27;s incremental caching and compilation. TypeScript will
consistently load, parse, and evaluate these source files every time. This is especially true for
CI environments.</li>
<li>When using <code>package.json</code> workspaces, bundlers and other tools may consider these source files
&quot;external&quot; as they&#x27;re found in <code>node_modules</code>. This will require custom configuration to allow it.</li>
<li>It breaks consistency. Consistency with the npm ecosystem, and consistency with how packaging and
TypeScript was designed to work. If all packages are internal, then great, but if you have some
packages that are published, you now have 2 distinct patterns for &quot;using packages&quot; instead of 1.</li>
</ul>
<p>With that being said, theres a 3rd alternative that may be the best of both worlds, using project
references <em>and</em> source files,
<a href="#importing-source-files-from-local-packages">by using <code>paths</code> aliases</a>.</p>
<p>All in all, this is a viable approach if you&#x27;re comfortable with the downsides listed above. Use the
pattern that works best for your repository, team, or company!</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="how-to-integrate-with-eslint">How to integrate with ESLint?<a href="#how-to-integrate-with-eslint" class="hash-link" aria-label="Direct link to How to integrate with ESLint?" title="Direct link to How to integrate with ESLint?">​</a></h3>
<p>We initially included ESLint integration in this guide, but it was very complex and in-depth on its
own, so we&#x27;ve opted to push it to another guide. Unfortunately, that guide is not yet available, so
please come back soon! We&#x27;ll announce when it&#x27;s ready.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="how-to-handle-circular-references">How to handle circular references?<a href="#how-to-handle-circular-references" class="hash-link" aria-label="Direct link to How to handle circular references?" title="Direct link to How to handle circular references?">​</a></h3>
<p>Project references <em>do <strong>not</strong> support
<a href="https://github.com/microsoft/TypeScript/issues/33685" target="_blank" rel="noopener noreferrer">circular references</a></em> (cycles), which is
great, as they are a <em>code smell</em>! If you find yourself arbitrarily importing code from random
sources, or between 2 projects that depend on each other, then this highlights a problem with your
architecture. Projects should be encapsulated and isolated from outside sources, unless explicitly
allowed through a dependency. Dependencies are &quot;upstream&quot;, so having them depend on the current
project (the &quot;downstream&quot;), makes little to no sense.</p>
<p>If you&#x27;re trying to adopt project references and are unfortunately hitting the circular reference
problem, don&#x27;t fret, untangling is possible, although non-trivial depending on the size of your
repository. It basically boils down to creating an additional project to move coupled code to.</p>
<p>For example, if project A was importing from project B, and B from A, then the solution would be to
create another project, C (typically a shared npm package), and move both pieces of code into C. A
and B would then import from C, instead of from each other. We&#x27;re not aware of any tools that would
automate this, or detect cycles, so you&#x27;ll need to do it manually.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/moonrepo/moon/tree/master/website/docs/guides/javascript/typescript-project-refs.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_bHB7" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_ydrU"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><div class="flex-1 text-left"><a class="cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-bold inline-flex" href="/docs/guides/profile"><span class="inline-block mr-1 icon-previous" aria-hidden="true"><span></span></span><span>Task profiling</span></a></div><div class="flex-1 text-right"><a class="cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-bold inline-flex" href="/docs/guides/node/examples"><span>Examples</span><span class="inline-block ml-1 icon-next" aria-hidden="true"><span></span></span></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_XG6w thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#preface" class="table-of-contents__link toc-highlight">Preface</a></li><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a><ul><li><a href="#root-level" class="table-of-contents__link toc-highlight">Root-level</a><ul><li><a href="#tsconfigjson" class="table-of-contents__link toc-highlight"><code>tsconfig.json</code></a></li><li><a href="#tsconfigoptionsjson" class="table-of-contents__link toc-highlight"><code>tsconfig.options.json</code></a><ul><li><a href="#ecmascript-interoperability" class="table-of-contents__link toc-highlight">ECMAScript interoperability</a></li></ul></li><li><a href="#gitignore" class="table-of-contents__link toc-highlight"><code>.gitignore</code></a></li></ul></li><li><a href="#project-level" class="table-of-contents__link toc-highlight">Project-level</a><ul><li><a href="#tsconfigjson-1" class="table-of-contents__link toc-highlight"><code>tsconfig.json</code></a><ul><li><a href="#includes-and-excludes" class="table-of-contents__link toc-highlight">Includes and excludes</a></li><li><a href="#depending-on-other-projects" class="table-of-contents__link toc-highlight">Depending on other projects</a></li></ul></li><li><a href="#tsconfigjson-2" class="table-of-contents__link toc-highlight"><code>tsconfig.*.json</code></a><ul><li><a href="#package-publishing" class="table-of-contents__link toc-highlight">Package publishing</a></li><li><a href="#vendor-specific" class="table-of-contents__link toc-highlight">Vendor specific</a></li></ul></li></ul></li></ul></li><li><a href="#running-the-typechecker" class="table-of-contents__link toc-highlight">Running the typechecker</a><ul><li><a href="#on-all-projects" class="table-of-contents__link toc-highlight">On all projects</a></li><li><a href="#on-an-individual-project" class="table-of-contents__link toc-highlight">On an individual project</a></li><li><a href="#on-affected-projects" class="table-of-contents__link toc-highlight">On affected projects</a></li></ul></li><li><a href="#using-paths-aliases" class="table-of-contents__link toc-highlight">Using <code>paths</code> aliases</a><ul><li><a href="#importing-source-files-from-local-packages" class="table-of-contents__link toc-highlight">Importing source files from local packages</a></li></ul></li><li><a href="#sharing-and-augmenting-types" class="table-of-contents__link toc-highlight">Sharing and augmenting types</a></li><li><a href="#supporting-packagejson-exports" class="table-of-contents__link toc-highlight">Supporting <code>package.json</code> exports</a><ul><li><a href="#state-of-the-npm-ecosystem" class="table-of-contents__link toc-highlight">State of the npm ecosystem</a></li><li><a href="#enabling-importsexports-resolution" class="table-of-contents__link toc-highlight">Enabling imports/exports resolution</a></li><li><a href="#resolving-issues" class="table-of-contents__link toc-highlight">Resolving issues</a></li></ul></li><li><a href="#editor-integration" class="table-of-contents__link toc-highlight">Editor integration</a><ul><li><a href="#vs-code" class="table-of-contents__link toc-highlight">VS Code</a></li></ul></li><li><a href="#faq" class="table-of-contents__link toc-highlight">FAQ</a><ul><li><a href="#i-still-have-questions-where-can-i-ask-them" class="table-of-contents__link toc-highlight">I still have questions, where can I ask them?</a></li><li><a href="#do-i-have-to-use-project-references" class="table-of-contents__link toc-highlight">Do I have to use project references?</a></li><li><a href="#what-about-not-using-project-references-and-only-using-source-files" class="table-of-contents__link toc-highlight">What about not using project references and only using source files?</a></li><li><a href="#how-to-integrate-with-eslint" class="table-of-contents__link toc-highlight">How to integrate with ESLint?</a></li><li><a href="#how-to-handle-circular-references" class="table-of-contents__link toc-highlight">How to handle circular references?</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="bg-gray-100 dark:bg-slate-600" aria-labelledby="footer-heading"><h2 id="footer-heading" class="sr-only">Footer</h2><div class="max-w-7xl mx-auto py-3 px-2 sm:px-3 md:py-4 md:px-4 lg:px-6"><div class="lg:grid lg:grid-cols-5 lg:gap-3"><div class="grid grid-cols-3 gap-3 lg:col-span-3"><div><h6 class="m-0 text-base font-semibold uppercase">Learn</h6><ul role="list" class="m-0 mt-2 p-0 space-y-1 list-none"><li><a class="cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal" href="/docs">Docs</a></li><li><a class="cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal" href="/docs/guides/ci">Guides</a></li><li><a class="cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal" href="/blog">Blog</a></li></ul></div><div><h6 class="m-0 text-base font-semibold uppercase">Ecosystem</h6><ul role="list" class="m-0 mt-2 p-0 space-y-1 list-none"><li><a href="https://github.com/moonrepo/moon/releases" target="_blank" rel="noopener noreferrer" class="cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal">Releases</a></li><li><a href="https://github.com/moonrepo/moon-configs" target="_blank" rel="noopener noreferrer" class="cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal">Shared configs</a></li><li><a href="https://github.com/moonrepo/dev" target="_blank" rel="noopener noreferrer" class="cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal">Developer tools</a></li><li><a href="https://github.com/moonrepo/examples" target="_blank" rel="noopener noreferrer" class="cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal">Examples repository</a></li></ul></div><div><h6 class="m-0 text-base font-semibold uppercase">Support</h6><ul role="list" class="m-0 mt-2 p-0 space-y-1 list-none"><li><a href="https://github.com/moonrepo" target="_blank" rel="noopener noreferrer" class="cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal">GitHub</a></li><li><a href="https://discord.gg/qCh9MEynv2" target="_blank" rel="noopener noreferrer" class="cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal">Discord</a></li><li><a href="https://twitter.com/tothemoonrepo" target="_blank" rel="noopener noreferrer" class="cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal">Twitter</a></li></ul></div></div><div class="mt-4 lg:mt-0 col-span-2"><h6 class="m-0 text-base font-semibold uppercase">Contact us</h6><p class="text-base text-gray-800 dark:text-slate-100 font-normal">Want to learn more about moonrepo? Have questions?</p><div class="mt-2"><div class="flex justify-between gap-x-1"><div class="w-3/4"><label for="subject" class="sr-only">Subject</label><select id="subject" name="subject" required="" class="outline-none min-w-0 w-full bg-white border border-transparent rounded-md px-1 py-1 text-base text-gray-800 placeholder-gray-600 h-full font-sans"><option value="" selected=""></option><option value="Consultation">Consultation</option><option value="Partnership">Partnership</option><option value="Affiliation">Affiliation</option></select></div><button class="border border-transparent rounded-md px-2 flex items-center justify-center text-base font-bold text-white bg-blurple-400 dark:bg-purple-600 opacity-60 py-1 w-1/4" disabled="" id="contact-next" type="button">Next</button></div></div><div class="mt-4 flex justify-end items-start gap-1"><div><p class="text-sm text-gray-800 dark:text-slate-100 font-normal">Backed by</p></div><div><svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" id="Layer_1" x="0" y="0" viewBox="0 0 1604 320" height="22"><style>.st0{fill-rule:evenodd;clip-rule:evenodd;fill:#fb651e}</style><g id="Group-19"><path id="Fill-1" d="M0 320h320V0H0z" class="st0"></path><path id="Fill-2" d="M173 175.9V247h-27v-71.1L77.1 73H110l49.6 76L209 73h32.9z" style="fill-rule:evenodd;clip-rule:evenodd;fill:#fff"></path><g id="Group-18" transform="translate(425.854 73.217)"><path id="Fill-3" d="M81.8 34.1C52.2 34.1 30 57 30 86.6s22.2 52.7 51.8 52.7c19 0 35.5-9.8 44.4-26.3l25.4 15.1c-14.2 24.3-40.8 40.1-69.8 40.1C36.2 168.1 0 131.9 0 86.6 0 41.2 36.2 5 81.8 5c29.3 0 55.6 15.6 69.8 40.1l-25.4 15.1c-9-16.5-25.4-26.1-44.4-26.1" class="st0"></path><path id="Fill-5" d="M249.2 107.2c0-18.5-13.5-32.5-30.9-32.5-17.9 0-31.4 14-31.4 32.5s13.5 32.5 31.4 32.5c17.1 0 30.9-14 30.9-32.5m-91.4 0c0-33.4 26.8-60.2 60.5-60.2 33.2 0 60 26.8 60 60.2s-26.8 60.2-60 60.2c-33.7 0-60.5-26.8-60.5-60.2" class="st0"></path><path id="Fill-7" d="M467.1 97.6v67.2h-29v-62.1c0-17.4-8.5-28.4-21.3-28.4-13.1 0-22.7 11-22.7 28.4v62.1h-28v-62.1c0-17.4-8.8-28.4-21.7-28.4s-22.3 11-22.3 28.4v62.1h-29v-115h29v14.7c7.1-11 18.1-17.9 31.6-17.9 14.7 0 26.3 8.3 33.4 21.2 7.3-11.5 20.8-21.2 37.8-21.2 25.5 0 42.2 22.5 42.2 51" class="st0"></path><path id="Fill-9" d="M570.2 108.4c0-19.2-11.9-33-28.6-33-16.3 0-28.6 13.1-28.6 32.7 0 19.5 12.6 32.7 29.1 32.7 16.2-.1 28.1-13.6 28.1-32.4m-22.5 59.4c-16 0-27.8-7.3-34.6-17.4v14.4h-29V4.8h29v59c7-9.4 18.8-16.2 34.1-16.2 29.7 0 52.4 25.6 52.9 60.1.5 34.9-22.7 60.1-52.4 60.1" class="st0"></path><path id="Fill-11" d="M612.1 164.8h29v-115h-29zm-3.7-147.6c0-9.8 8.2-17.2 18.1-17.2 9.6 0 17.6 7.3 17.6 17.2 0 9.8-8 17.2-17.6 17.2-9.8-.1-18.1-7.4-18.1-17.2" class="st0"></path><path id="Fill-13" d="M766.1 98.1v66.7h-28v-60.5c0-18.5-9.7-30-23.7-30-15.4 0-26.3 14-26.3 30.5v60h-28v-115h28v14.5c7.8-10.8 20.3-17.7 34.9-17.7 25.8 0 43.1 22 43.1 51.5" class="st0"></path><path id="Fill-14" d="M854.1 113.8v-2.5l-29.3 5.7c-9.8 2.3-15.8 7.3-15.8 14 0 7.1 6.5 12.4 17.2 12.1 15.4-.5 27.9-13.9 27.9-29.3m28-18.4v69.4h-28v-13.3c-8.5 9.2-21.8 16-36.5 16.3-19.5 0-36.7-12.8-36.7-34.8 0-20.8 15.6-32.7 38.8-37.3l33.7-6.4c-2.3-9.6-9.6-16.9-20.7-16.9-11 0-21.3 6.9-27.5 15.6l-21.1-15.3c10.8-15.1 29.8-25.2 48.7-25.2 28.2-.2 49.3 19.3 49.3 47.9" class="st0"></path><path id="Fill-15" d="M941.1 75.8V124c0 9.4 4.1 13.7 12.6 13.7h14.4v27h-18.4c-24.5 0-36.6-12-36.6-37.2V75.8h-21v-26h20V21.4l29-8.9v37.3h27v26z" class="st0"></path><path id="Fill-16" d="M1069 107.2c0-18.5-13.5-32.5-30.9-32.5-17.9 0-31.4 14-31.4 32.5s13.5 32.5 31.4 32.5c17.1 0 30.9-14 30.9-32.5m-91.4 0c0-33.4 26.8-60.2 60.5-60.2 33.2 0 60 26.8 60 60.2s-26.8 60.2-60 60.2c-33.7 0-60.5-26.8-60.5-60.2" class="st0"></path><path id="Fill-17" d="M1178.1 47.3v27.9c-25.9 0-37 12.6-37 29.1v60.5h-28v-115h28v14.4c7.9-10.3 20.6-16.9 37-16.9" class="st0"></path></g></g></svg></div></div></div></div><div class="mt-3 pt-3 md:mt-4 md:pt-4 border-0 border-t border-solid border-gray-200 dark:border-slate-400 flex items-center justify-between"><div class="text-sm text-gray-800 dark:text-slate-100 font-normal m-0"><div class="footer__copyright">Copyright © 2025, moonrepo, Inc.</div></div><div class="flex space-x-2"><a href="https://github.com/moonrepo" target="_blank" rel="noopener noreferrer" class="cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal"><span class="sr-only">GitHub</span><span class="inline-block" aria-hidden="true"><span></span></span></a><a href="https://discord.gg/qCh9MEynv2" target="_blank" rel="noopener noreferrer" class="cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal"><span class="sr-only">Discord</span><span class="inline-block" aria-hidden="true"><span></span></span></a><a href="https://twitter.com/tothemoonrepo" target="_blank" rel="noopener noreferrer" class="cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal"><span class="sr-only">Twitter</span><span class="inline-block" aria-hidden="true"><span></span></span></a></div></div></div></footer></div>
</body>
</html>