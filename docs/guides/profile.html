<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-guides/profile" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.0">
<title data-rh="true">Task profiling | moonrepo</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://moonrepo.dev/docs/guides/profile"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="moon, repo, moonrepo, task, runner, build, system, ci, times, devx, developer, experience, tooling, tools, monorepo, polyrepo, productivity, platform, proto, toolchain"><meta data-rh="true" name="og:image" content="https://moonrepo.dev/img/hero/slate-bg.jpg"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Task profiling | moonrepo"><meta data-rh="true" name="description" content="Troubleshooting slow or unperformant tasks? Profile and diagnose them with ease!"><meta data-rh="true" property="og:description" content="Troubleshooting slow or unperformant tasks? Profile and diagnose them with ease!"><link data-rh="true" rel="icon" href="/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://moonrepo.dev/docs/guides/profile"><link data-rh="true" rel="alternate" href="https://moonrepo.dev/docs/guides/profile" hreflang="en"><link data-rh="true" rel="alternate" href="https://moonrepo.dev/docs/guides/profile" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://400S075OEM-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="moonrepo RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="moonrepo Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LB233GTZD3"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-LB233GTZD3",{})</script>



<link rel="search" type="application/opensearchdescription+xml" title="moonrepo" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.6dcfee5e.css">
<script src="/assets/js/runtime~main.94521c5a.js" defer="defer"></script>
<script src="/assets/js/main.24aca8ae.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><link rel="preload" as="image" href="/assets/images/cpu-deb9e0f9310721da8e3394071dbaa637.png"><link rel="preload" as="image" href="/assets/images/cpu-loaded-ff6afad307a77cc32e53364c0cd3a597.png"><link rel="preload" as="image" href="/assets/images/cpu-selected-febbd2aef4ffaea46979cbeb583bd648.png"><link rel="preload" as="image" href="/assets/images/heap-3451a7088c4f41a89ad4e068d250f6b4.png"><link rel="preload" as="image" href="/assets/images/heap-loaded-4bbbd3b5dd677a0d5bbdce7585ea3286.png"><link rel="preload" as="image" href="/assets/images/heap-selected-41365c3cb6e1244aa6dd2382e58b5804.png"><link rel="preload" as="image" href="/assets/images/bottom-up-2e2e925bb1bd78f49bf29e4f6f848f7c.png"><link rel="preload" as="image" href="/assets/images/top-down-409f6e1447d9875d7013017d0c7f643c.png"><link rel="preload" as="image" href="/assets/images/flame-chart-aa69d1306f8472d449c7d9755e7995e8.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_oPtH" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="moon" class="themedComponent_siVc themedComponent--light_hHel"><img src="/img/logo.svg" alt="moon" class="themedComponent_siVc themedComponent--dark_yETr"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Products</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/moon"><strong class="block mr-2">moon</strong><div class="opacity-60">Build system for managing codebases</div></a></li><li><a class="dropdown__link" href="/proto"><strong class="block mr-2">proto</strong><div class="opacity-60">Multi-language version manager</div></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Docs</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs"><strong>moon</strong></a></li><li><a class="dropdown__link" href="/docs/proto"><strong>proto</strong></a></li></ul></div><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/guides/ci">Guides</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a href="https://github.com/moonrepo" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="toggle_ki11 colorModeToggle_Hewu"><button class="clean-btn toggleButton_MMFG toggleButtonDisabled_Uw7m" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_k9hJ lightToggleIcon_lgto"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_k9hJ darkToggleIcon_U96C"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_k9hJ systemToggleIcon_E5c0"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_bzqh"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_MB5r"><div class="docsWrapper__sE8"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_iEvu" type="button"></button><div class="docRoot_DfVB"><aside class="theme-doc-sidebar-container docSidebarContainer_c7NB"><div class="sidebarViewport_KYo0"><div class="sidebar_CUen"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_jmj1"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides/ci">Continuous integration (CI)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides/codegen">Code generation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides/codeowners">Code owners</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides/debug-task">Debugging a task</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides/docker">Docker integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides/extensions">Extensions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides/mcp">MCP integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides/offline-mode">Offline mode</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides/open-source">Open source usage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides/pkl-config">Pkl configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides/remote-cache">Remote caching</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides/root-project">Root-level project</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides/sharing-config">Sharing workspace configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides/notifications">Terminal notifications</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides/wasm-plugins">WASM plugins</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides/webhooks">Webhooks (experimental)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guides/vcs-hooks">VCS hooks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menuHtmlItem_OniL menu__list-item"><hr></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/guides/javascript/bun-handbook">JavaScript</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/javascript/bun-handbook">Bun handbook</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/javascript/deno-handbook">Deno handbook</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/javascript/node-handbook">Node.js handbook</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/guides/profile">Task profiling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/javascript/typescript-project-refs">TypeScript project references</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/guides/node/examples">Examples</a><button aria-label="Expand sidebar category &#x27;Examples&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menuHtmlItem_OniL menu__list-item"><hr></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/guides/rust/handbook">Rust</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/rust/handbook">Handbook</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_a9sJ"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_Qr34"><div class="docItemContainer_tjFy"><article><span class="float-right ml-2"></span><nav class="flex pl-1 mb-2" aria-label="Breadcrumb"><ol role="list" class="list-none p-0 m-0 flex items-center space-x-2" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li><a class="cursor-pointer text-base text-gray-700 hover:text-gray-800 dark:text-gray-600 dark:hover:text-gray-500 font-normal" href="/"><span class="inline-block flex-shrink-0" aria-hidden="true" style="padding-top:5px"><span></span></span><span class="sr-only">Home</span></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem"><div class="flex items-center"><span class="inline-block flex-shrink-0 text-gray-600 mr-2" aria-hidden="true"><span></span></span><span class="text-sm text-gray-800 dark:text-slate-100 font-medium m-0">JavaScript</span><meta itemprop="position" content="1"></div></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem"><div class="flex items-center"><span class="inline-block flex-shrink-0 text-gray-600 mr-2" aria-hidden="true"><span></span></span><a class="cursor-pointer text-sm text-gray-700 hover:text-gray-800 dark:text-gray-600 dark:hover:text-gray-500 font-medium" aria-current="page" itemprop="item" href="/docs/guides/profile"><span itemprop="name">Task profiling</span></a><meta itemprop="position" content="2"></div></li></ol></nav><div class="tocCollapsible_wXna theme-doc-toc-mobile tocMobile_Ojys"><button type="button" class="clean-btn tocCollapsibleButton_iI2p">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Task profiling</h1></header><p>Troubleshooting slow or unperformant tasks? Profile and diagnose them with ease!</p>
<div class="theme-admonition theme-admonition-caution admonition_WCGJ alert alert--warning"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_pbrs"><p>Profiling is only supported by <code>node</code> based tasks, and is not supported by tasks that are created
through <code>package.json</code> inference, or for packages that ship non-JavaScript code (like Rust or Go).</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="cpu-snapshots">CPU snapshots<a href="#cpu-snapshots" class="hash-link" aria-label="Direct link to CPU snapshots" title="Direct link to CPU snapshots">​</a></h2>
<p>CPU profiling helps you get a better understanding of which parts of your code require the most CPU
time, and how your code is executed and optimized by Node.js. The profiler will measure code
execution and activities performed by the engine itself, such as compilation, calls of system
libraries, optimization, and garbage collection.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="record-a-profile">Record a profile<a href="#record-a-profile" class="hash-link" aria-label="Direct link to Record a profile" title="Direct link to Record a profile">​</a></h3>
<p>To record a CPU profile, pass <code>--profile cpu</code> to the <a href="/docs/commands/run"><code>moon run</code></a> command. When
successful, the profile will be written to
<code>.moon/cache/states/&lt;project&gt;/&lt;task&gt;/snapshot.cpuprofile</code>.</p>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_t_Hd"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ moon run </span><span class="token parameter variable" style="color:#fef9c3">--profile</span><span class="token plain"> cpu app:lint</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="analyze-in-chrome">Analyze in Chrome<a href="#analyze-in-chrome" class="hash-link" aria-label="Direct link to Analyze in Chrome" title="Direct link to Analyze in Chrome">​</a></h3>
<p>CPU profiles can be reviewed and analyzed with
<a href="https://developer.chrome.com/docs/devtools/" target="_blank" rel="noopener noreferrer">Chrome developer tools</a> using the following steps.</p>
<ol>
<li>Open Chrome and navigate to <code>chrome://inspect</code>.</li>
<li>Under &quot;Devices&quot;, navigate to &quot;Open dedicated DevTools for Node&quot;.</li>
<li>The following window will popup. Ensure the &quot;Profiler&quot; tab is selected.</li>
</ol>
<div class="m-3 text-center"><img alt="DevTools Profiler - CPU" src="/assets/images/cpu-deb9e0f9310721da8e3394071dbaa637.png" class="block w-auto max-w-full"></div>
<ol start="4">
<li>Click &quot;Load&quot; and select the <code>snapshot.cpuprofile</code> that was
<a href="#record-a-profile">previously recorded</a>. If successful, the snapshot will appear in the left
column.</li>
</ol>
<blockquote>
<p>On macOS, press <code>command</code> + <code>shift</code> + <code>.</code> to display hidden files and folders, to locate the
<code>.moon</code> folder.</p>
</blockquote>
<div class="m-3 text-center"><img alt="DevTools Profiler - CPU snapshot loaded" src="/assets/images/cpu-loaded-ff6afad307a77cc32e53364c0cd3a597.png" class="block w-auto max-w-full"></div>
<ol start="5">
<li>Select the snapshot in the left column. From here, the snapshot can be analyzed and represented
with <a href="#bottom-up">Bottom up</a>, <a href="#top-down">Top down</a>, or <a href="#flame-chart">Flame chart</a> views.</li>
</ol>
<div class="m-3 text-center"><img alt="DevTools Profiler - CPU snapshot being analyzed through charts" src="/assets/images/cpu-selected-febbd2aef4ffaea46979cbeb583bd648.png" class="block w-auto max-w-full"></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="heap-snapshots">Heap snapshots<a href="#heap-snapshots" class="hash-link" aria-label="Direct link to Heap snapshots" title="Direct link to Heap snapshots">​</a></h2>
<p>Heap profiling lets you detect memory leaks, dynamic memory problems, and locate the fragments of
code that caused them.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="record-a-profile-1">Record a profile<a href="#record-a-profile-1" class="hash-link" aria-label="Direct link to Record a profile" title="Direct link to Record a profile">​</a></h3>
<p>To record a heap profile, pass <code>--profile heap</code> to the <a href="/docs/commands/run"><code>moon run</code></a> command. When
successful, the profile will be written to
<code>.moon/cache/states/&lt;project&gt;/&lt;task&gt;/snapshot.heapprofile</code>.</p>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_t_Hd"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ moon run </span><span class="token parameter variable" style="color:#fef9c3">--profile</span><span class="token plain"> heap app:lint</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="analyze-in-chrome-1">Analyze in Chrome<a href="#analyze-in-chrome-1" class="hash-link" aria-label="Direct link to Analyze in Chrome" title="Direct link to Analyze in Chrome">​</a></h3>
<p>Heap profiles can be reviewed and analyzed with
<a href="https://developer.chrome.com/docs/devtools/" target="_blank" rel="noopener noreferrer">Chrome developer tools</a> using the following steps.</p>
<ol>
<li>Open Chrome and navigate to <code>chrome://inspect</code>.</li>
<li>Under &quot;Devices&quot;, navigate to &quot;Open dedicated DevTools for Node&quot;.</li>
<li>The following window will popup. Ensure the &quot;Memory&quot; tab is selected.</li>
</ol>
<div class="m-3 text-center"><img alt="DevTools Profiler - Heap" src="/assets/images/heap-3451a7088c4f41a89ad4e068d250f6b4.png" class="block w-auto max-w-full"></div>
<ol start="4">
<li>Click &quot;Load&quot; and select the <code>snapshot.heapprofile</code> that was
<a href="#record-a-profile-1">previously recorded</a>. If successful, the snapshot will appear in the left
column.</li>
</ol>
<blockquote>
<p>On macOS, press <code>command</code> + <code>shift</code> + <code>.</code> to display hidden files and folders, to locate the
<code>.moon</code> folder.</p>
</blockquote>
<div class="m-3 text-center"><img alt="DevTools Profiler - Heap snapshot loaded" src="/assets/images/heap-loaded-4bbbd3b5dd677a0d5bbdce7585ea3286.png" class="block w-auto max-w-full"></div>
<ol start="5">
<li>Select the snapshot in the left column. From here, the snapshot can be analyzed and represented
with <a href="#bottom-up">Bottom up</a>, <a href="#top-down">Top down</a>, or <a href="#flame-chart">Flame chart</a> views.</li>
</ol>
<div class="m-3 text-center"><img alt="DevTools Profiler - Heap snapshot being analyzed through charts" src="/assets/images/heap-selected-41365c3cb6e1244aa6dd2382e58b5804.png" class="block w-auto max-w-full"></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="views">Views<a href="#views" class="hash-link" aria-label="Direct link to Views" title="Direct link to Views">​</a></h2>
<p>Chrome DevTools provide 3 views for analyzing activities within a snapshot. Each view gives you a
different perspective on these activities.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="bottom-up">Bottom up<a href="#bottom-up" class="hash-link" aria-label="Direct link to Bottom up" title="Direct link to Bottom up">​</a></h3>
<p>The Bottom up view is helpful if you encounter a heavy function and want to find out where it was
called from.</p>
<ul>
<li>The &quot;Self Time&quot; column represents the aggregated time spent directly in that activity, across all
of its occurrences.</li>
<li>The &quot;Total Time&quot; column represents aggregated time spent in that activity or any of its children.</li>
<li>The &quot;Function&quot; column is the function that was executed, including source location, and any
children.</li>
</ul>
<div class="m-3 text-center"><img alt="Bottom up profiler view" src="/assets/images/bottom-up-2e2e925bb1bd78f49bf29e4f6f848f7c.png" class="block w-auto max-w-full"></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="top-down">Top down<a href="#top-down" class="hash-link" aria-label="Direct link to Top down" title="Direct link to Top down">​</a></h3>
<p>The Top down view works in a similar fashion to <a href="#bottom-up">Bottom up</a>, but displays functions
starting from the top-level entry points. These are also known as root activities.</p>
<div class="m-3 text-center"><img alt="Top down profiler view" src="/assets/images/top-down-409f6e1447d9875d7013017d0c7f643c.png" class="block w-auto max-w-full"></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="flame-chart">Flame chart<a href="#flame-chart" class="hash-link" aria-label="Direct link to Flame chart" title="Direct link to Flame chart">​</a></h3>
<p>DevTools represents main thread activity with a flame chart. The x-axis represents the recording
over time. The y-axis represents the call stack. The events on top cause the events below it.</p>
<div class="m-3 text-center"><img alt="Flame chart profiler view" src="/assets/images/flame-chart-aa69d1306f8472d449c7d9755e7995e8.png" class="block w-auto max-w-full"></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/moonrepo/moon/tree/master/website/docs/guides/profile.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_bHB7" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_ydrU"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><div class="flex-1 text-left"><a class="cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-bold inline-flex" href="/docs/guides/javascript/node-handbook"><span class="inline-block mr-1 icon-previous" aria-hidden="true"><span></span></span><span>Node.js handbook</span></a></div><div class="flex-1 text-right"><a class="cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-bold inline-flex" href="/docs/guides/javascript/typescript-project-refs"><span>TypeScript project references</span><span class="inline-block ml-1 icon-next" aria-hidden="true"><span></span></span></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_XG6w thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#cpu-snapshots" class="table-of-contents__link toc-highlight">CPU snapshots</a><ul><li><a href="#record-a-profile" class="table-of-contents__link toc-highlight">Record a profile</a></li><li><a href="#analyze-in-chrome" class="table-of-contents__link toc-highlight">Analyze in Chrome</a></li></ul></li><li><a href="#heap-snapshots" class="table-of-contents__link toc-highlight">Heap snapshots</a><ul><li><a href="#record-a-profile-1" class="table-of-contents__link toc-highlight">Record a profile</a></li><li><a href="#analyze-in-chrome-1" class="table-of-contents__link toc-highlight">Analyze in Chrome</a></li></ul></li><li><a href="#views" class="table-of-contents__link toc-highlight">Views</a><ul><li><a href="#bottom-up" class="table-of-contents__link toc-highlight">Bottom up</a></li><li><a href="#top-down" class="table-of-contents__link toc-highlight">Top down</a></li><li><a href="#flame-chart" class="table-of-contents__link toc-highlight">Flame chart</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="bg-gray-100 dark:bg-slate-600" aria-labelledby="footer-heading"><h2 id="footer-heading" class="sr-only">Footer</h2><div class="max-w-7xl mx-auto py-3 px-2 sm:px-3 md:py-4 md:px-4 lg:px-6"><div class="lg:grid lg:grid-cols-5 lg:gap-3"><div class="grid grid-cols-3 gap-3 lg:col-span-3"><div><h6 class="m-0 text-base font-semibold uppercase">Learn</h6><ul role="list" class="m-0 mt-2 p-0 space-y-1 list-none"><li><a class="cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal" href="/docs">Docs</a></li><li><a class="cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal" href="/docs/guides/ci">Guides</a></li><li><a class="cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal" href="/blog">Blog</a></li></ul></div><div><h6 class="m-0 text-base font-semibold uppercase">Ecosystem</h6><ul role="list" class="m-0 mt-2 p-0 space-y-1 list-none"><li><a href="https://github.com/moonrepo/moon/releases" target="_blank" rel="noopener noreferrer" class="cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal">Releases</a></li><li><a href="https://github.com/moonrepo/moon-configs" target="_blank" rel="noopener noreferrer" class="cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal">Shared configs</a></li><li><a href="https://github.com/moonrepo/dev" target="_blank" rel="noopener noreferrer" class="cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal">Developer tools</a></li><li><a href="https://github.com/moonrepo/examples" target="_blank" rel="noopener noreferrer" class="cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal">Examples repository</a></li></ul></div><div><h6 class="m-0 text-base font-semibold uppercase">Support</h6><ul role="list" class="m-0 mt-2 p-0 space-y-1 list-none"><li><a href="https://github.com/moonrepo" target="_blank" rel="noopener noreferrer" class="cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal">GitHub</a></li><li><a href="https://discord.gg/qCh9MEynv2" target="_blank" rel="noopener noreferrer" class="cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal">Discord</a></li><li><a href="https://twitter.com/tothemoonrepo" target="_blank" rel="noopener noreferrer" class="cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal">Twitter</a></li></ul></div></div><div class="mt-4 lg:mt-0 col-span-2"><h6 class="m-0 text-base font-semibold uppercase">Contact us</h6><p class="text-base text-gray-800 dark:text-slate-100 font-normal">Want to learn more about moonrepo? Have questions?</p><div class="mt-2"><div class="flex justify-between gap-x-1"><div class="w-3/4"><label for="subject" class="sr-only">Subject</label><select id="subject" name="subject" required="" class="outline-none min-w-0 w-full bg-white border border-transparent rounded-md px-1 py-1 text-base text-gray-800 placeholder-gray-600 h-full font-sans"><option value="" selected=""></option><option value="Consultation">Consultation</option><option value="Partnership">Partnership</option><option value="Affiliation">Affiliation</option></select></div><button class="border border-transparent rounded-md px-2 flex items-center justify-center text-base font-bold text-white bg-blurple-400 dark:bg-purple-600 opacity-60 py-1 w-1/4" disabled="" id="contact-next" type="button">Next</button></div></div><div class="mt-4 flex justify-end items-start gap-1"><div><p class="text-sm text-gray-800 dark:text-slate-100 font-normal">Backed by</p></div><div><svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" id="Layer_1" x="0" y="0" viewBox="0 0 1604 320" height="22"><style>.st0{fill-rule:evenodd;clip-rule:evenodd;fill:#fb651e}</style><g id="Group-19"><path id="Fill-1" d="M0 320h320V0H0z" class="st0"></path><path id="Fill-2" d="M173 175.9V247h-27v-71.1L77.1 73H110l49.6 76L209 73h32.9z" style="fill-rule:evenodd;clip-rule:evenodd;fill:#fff"></path><g id="Group-18" transform="translate(425.854 73.217)"><path id="Fill-3" d="M81.8 34.1C52.2 34.1 30 57 30 86.6s22.2 52.7 51.8 52.7c19 0 35.5-9.8 44.4-26.3l25.4 15.1c-14.2 24.3-40.8 40.1-69.8 40.1C36.2 168.1 0 131.9 0 86.6 0 41.2 36.2 5 81.8 5c29.3 0 55.6 15.6 69.8 40.1l-25.4 15.1c-9-16.5-25.4-26.1-44.4-26.1" class="st0"></path><path id="Fill-5" d="M249.2 107.2c0-18.5-13.5-32.5-30.9-32.5-17.9 0-31.4 14-31.4 32.5s13.5 32.5 31.4 32.5c17.1 0 30.9-14 30.9-32.5m-91.4 0c0-33.4 26.8-60.2 60.5-60.2 33.2 0 60 26.8 60 60.2s-26.8 60.2-60 60.2c-33.7 0-60.5-26.8-60.5-60.2" class="st0"></path><path id="Fill-7" d="M467.1 97.6v67.2h-29v-62.1c0-17.4-8.5-28.4-21.3-28.4-13.1 0-22.7 11-22.7 28.4v62.1h-28v-62.1c0-17.4-8.8-28.4-21.7-28.4s-22.3 11-22.3 28.4v62.1h-29v-115h29v14.7c7.1-11 18.1-17.9 31.6-17.9 14.7 0 26.3 8.3 33.4 21.2 7.3-11.5 20.8-21.2 37.8-21.2 25.5 0 42.2 22.5 42.2 51" class="st0"></path><path id="Fill-9" d="M570.2 108.4c0-19.2-11.9-33-28.6-33-16.3 0-28.6 13.1-28.6 32.7 0 19.5 12.6 32.7 29.1 32.7 16.2-.1 28.1-13.6 28.1-32.4m-22.5 59.4c-16 0-27.8-7.3-34.6-17.4v14.4h-29V4.8h29v59c7-9.4 18.8-16.2 34.1-16.2 29.7 0 52.4 25.6 52.9 60.1.5 34.9-22.7 60.1-52.4 60.1" class="st0"></path><path id="Fill-11" d="M612.1 164.8h29v-115h-29zm-3.7-147.6c0-9.8 8.2-17.2 18.1-17.2 9.6 0 17.6 7.3 17.6 17.2 0 9.8-8 17.2-17.6 17.2-9.8-.1-18.1-7.4-18.1-17.2" class="st0"></path><path id="Fill-13" d="M766.1 98.1v66.7h-28v-60.5c0-18.5-9.7-30-23.7-30-15.4 0-26.3 14-26.3 30.5v60h-28v-115h28v14.5c7.8-10.8 20.3-17.7 34.9-17.7 25.8 0 43.1 22 43.1 51.5" class="st0"></path><path id="Fill-14" d="M854.1 113.8v-2.5l-29.3 5.7c-9.8 2.3-15.8 7.3-15.8 14 0 7.1 6.5 12.4 17.2 12.1 15.4-.5 27.9-13.9 27.9-29.3m28-18.4v69.4h-28v-13.3c-8.5 9.2-21.8 16-36.5 16.3-19.5 0-36.7-12.8-36.7-34.8 0-20.8 15.6-32.7 38.8-37.3l33.7-6.4c-2.3-9.6-9.6-16.9-20.7-16.9-11 0-21.3 6.9-27.5 15.6l-21.1-15.3c10.8-15.1 29.8-25.2 48.7-25.2 28.2-.2 49.3 19.3 49.3 47.9" class="st0"></path><path id="Fill-15" d="M941.1 75.8V124c0 9.4 4.1 13.7 12.6 13.7h14.4v27h-18.4c-24.5 0-36.6-12-36.6-37.2V75.8h-21v-26h20V21.4l29-8.9v37.3h27v26z" class="st0"></path><path id="Fill-16" d="M1069 107.2c0-18.5-13.5-32.5-30.9-32.5-17.9 0-31.4 14-31.4 32.5s13.5 32.5 31.4 32.5c17.1 0 30.9-14 30.9-32.5m-91.4 0c0-33.4 26.8-60.2 60.5-60.2 33.2 0 60 26.8 60 60.2s-26.8 60.2-60 60.2c-33.7 0-60.5-26.8-60.5-60.2" class="st0"></path><path id="Fill-17" d="M1178.1 47.3v27.9c-25.9 0-37 12.6-37 29.1v60.5h-28v-115h28v14.4c7.9-10.3 20.6-16.9 37-16.9" class="st0"></path></g></g></svg></div></div></div></div><div class="mt-3 pt-3 md:mt-4 md:pt-4 border-0 border-t border-solid border-gray-200 dark:border-slate-400 flex items-center justify-between"><div class="text-sm text-gray-800 dark:text-slate-100 font-normal m-0"><div class="footer__copyright">Copyright © 2025, moonrepo, Inc.</div></div><div class="flex space-x-2"><a href="https://github.com/moonrepo" target="_blank" rel="noopener noreferrer" class="cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal"><span class="sr-only">GitHub</span><span class="inline-block" aria-hidden="true"><span></span></span></a><a href="https://discord.gg/qCh9MEynv2" target="_blank" rel="noopener noreferrer" class="cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal"><span class="sr-only">Discord</span><span class="inline-block" aria-hidden="true"><span></span></span></a><a href="https://twitter.com/tothemoonrepo" target="_blank" rel="noopener noreferrer" class="cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal"><span class="sr-only">Twitter</span><span class="inline-block" aria-hidden="true"><span></span></span></a></div></div></div></footer></div>
</body>
</html>